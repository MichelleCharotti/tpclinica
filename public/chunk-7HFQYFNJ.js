import{c as y,d,f as k,g as E,h as S,i as b,k as I,l as A,m as F,n as N,o as D,p as z,q as T}from"./chunk-CKTPI4TQ.js";import{A as m,E as g,F as c,H as o,I as t,J as f,Ka as B,L as u,M as C,Oa as R,Pa as V,R as r,T as v,Y as h,Z as M,fa as x,ha as P,ia as O,ma as w,o as _,pa as L,z as l}from"./chunk-JWGQPPUO.js";var j=i=>({active:i});function U(i,s){i&1&&(o(0,"small",15),r(1," Debe Ingresar Un Mail Valido "),t())}function q(i,s){i&1&&(o(0,"small",15),r(1," Al Menos 16 Caracteres "),t())}function W(i,s){if(i&1&&(o(0,"strong",15),r(1),t()),i&2){let n=C();l(),v(" ",n.error," ")}}var G=class i{constructor(s,n,e,a){this.router=s;this.usuario=n;this.auth=e;this.db=a;this.formularioLogin=new S({email:new b("",[d.required,d.email]),password:new b("",[d.minLength(16),d.required])})}formularioLogin;validando=!1;error="";verBotones=!1;logear(){this.limpiarEspacios(),this.error="",this.validando=!0;let s=this.formularioLogin.value;V(this.auth,s.email,s.password).then(n=>{n.user?n.user.emailVerified?this.usuario.obtenerDatos().then(e=>{e.tipo=="especialista"&&!e.habilitado?(this.validando=!1,this.error="Cuenta NO Verificado Por Administracion. Contacte a la Clinica",this.usuario.cerrarSesion()):(this.db.generarLog(this.usuario.datos),this.router.navigate(["/perfil"]))}):(this.validando=!1,this.error="Debe verificar su email antes de iniciar sesion",R(n.user),this.auth.signOut()):(this.validando=!1,this.error="Credenciales Invalidas")}).catch(n=>{this.validando=!1,this.error="Credenciales Invalidas"})}limpiarEspacios(){this.formularioLogin.get("email")?.setValue(this.formularioLogin.get("email")?.value.trim()),this.formularioLogin.get("password")?.setValue(this.formularioLogin.get("password")?.value.trim())}registro(){this.router.navigate(["registro"])}mostrarBotones(){this.verBotones=!this.verBotones}static \u0275fac=function(n){return new(n||i)(m(w),m(T),m(B),m(z))};static \u0275cmp=_({type:i,selectors:[["app-login"]],standalone:!0,features:[h],decls:25,vars:8,consts:[[1,"zoom"],[1,"login-form",3,"formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","email","placeholder","Ingrese usuario","formControlName","email"],["class","error",4,"ngIf"],["for","password"],[1,"password"],["appMostrarPassword","","type","password","id","password","placeholder","Ingrese contrase\xF1a","formControlName","password"],[1,"button-group"],[1,"login-button",3,"click","disabled"],[1,"register-button",3,"click"],["appClickAfuera","",1,"button-container",3,"cliclAfueraEvent","ngClass"],[1,"main-button",3,"click"],[1,"hidden-buttons"],[1,"error"]],template:function(n,e){if(n&1&&(o(0,"span",0)(1,"form",1)(2,"h3"),r(3,"Login"),t(),o(4,"div",2)(5,"label",3),r(6,"Usuario"),t(),f(7,"input",4),g(8,U,2,0,"small",5),t(),o(9,"div",2)(10,"label",6),r(11,"Contrase\xF1a"),t(),o(12,"div",7),f(13,"input",8),t(),g(14,q,2,0,"small",5),t(),o(15,"div",9)(16,"button",10),u("click",function(){return e.logear()}),r(17,"Login"),t(),o(18,"button",11),u("click",function(){return e.registro()}),r(19,"Registrarse"),t()(),g(20,W,2,1,"strong",5),t(),o(21,"div",12),u("cliclAfueraEvent",function(){return e.mostrarBotones()}),o(22,"button",13),u("click",function(){return e.mostrarBotones()}),r(23,"Acceso Rapido"),t(),f(24,"div",14),t()()),n&2){let a,p;l(),c("formGroup",e.formularioLogin),l(7),c("ngIf",((a=e.formularioLogin.get("email"))==null?null:a.touched)&&!((a=e.formularioLogin.get("email"))!=null&&a.valid)),l(6),c("ngIf",((p=e.formularioLogin.get("password"))==null?null:p.touched)&&!((p=e.formularioLogin.get("password"))!=null&&p.valid)),l(2),c("disabled",!e.formularioLogin.valid),l(4),c("ngIf",e.error!=""),l(),c("ngClass",M(6,j,e.verBotones))}},dependencies:[L,O,x,P,N,I,y,k,E,D,A,F],styles:[".login-form[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column;align-items:center}.form-group[_ngcontent-%COMP%]{margin:10px 0}.button-group[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column;align-items:center}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}input[_ngcontent-%COMP%]{padding:5px;border-radius:5px;border:1px solid #ccc;width:100%;max-width:300px}button[_ngcontent-%COMP%]{width:212px;margin:2px 25px;padding:10px;border:none;border-radius:5px;font-size:1rem;font-weight:700;cursor:pointer}.password[_ngcontent-%COMP%]{display:flex;align-items:center}.password[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:195px}.login-button[_ngcontent-%COMP%], .register-button[_ngcontent-%COMP%]{background-color:#3485c3;color:#fff}.login-button[_ngcontent-%COMP%]:hover, .register-button[_ngcontent-%COMP%]:hover{background-color:#2f75aa}.login-button[_ngcontent-%COMP%]:disabled{background-color:#3485c3b3;cursor:not-allowed}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:red 1px solid}small[_ngcontent-%COMP%]{text-decoration:underline;display:block;width:212px}.error[_ngcontent-%COMP%]{color:red}.button-container[_ngcontent-%COMP%]{position:fixed;bottom:.5%;left:.5%}.main-button[_ngcontent-%COMP%]{background-color:#00f;color:#fff;padding:10px 20px;font-size:16px;border:none;border-radius:5px;cursor:pointer}.hidden-buttons[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;opacity:0;visibility:hidden;transition:opacity .3s,visibility .3s}.button-container.active[_ngcontent-%COMP%]   .hidden-buttons[_ngcontent-%COMP%]{opacity:1;visibility:visible}.sub-button[_ngcontent-%COMP%]{height:50px;background-color:#3485c3;color:#fff;padding:0 20px;font-size:16px;border:none;border-radius:10px;cursor:pointer;transition:transform .5s;display:flex;align-items:center}.sub-button[_ngcontent-%COMP%]:hover{background-color:#2f75aa}.sub-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 5px}.sub-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:100%;border:1px solid whitesmoke}.button-container.active[_ngcontent-%COMP%]   .sub-button[_ngcontent-%COMP%]{transform:translateY(-370px)}.zoom[_ngcontent-%COMP%], .zomm[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInAnimation 1s ease forwards,_ngcontent-%COMP%_sizeChangeAnimation 2s ease forwards}@keyframes _ngcontent-%COMP%_fadeInAnimation{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_sizeChangeAnimation{0%{transform:scale(.1)}to{transform:scale(1)}}.button-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInAnimation 1s ease forwards}"]})};export{G as LoginComponent};
