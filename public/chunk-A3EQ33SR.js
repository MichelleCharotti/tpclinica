import{a as V}from"./chunk-FYXG26VS.js";import{a as I,b as T,c as P}from"./chunk-QG4ALEQJ.js";import"./chunk-LBLMZG4W.js";import"./chunk-QVBJDRAH.js";import{C as u,D as h,H as x,I as c,K as r,L as a,M as y,N as f,O as _,P as l,U as s,V as g,W as L,aa as C,db as E,na as k,oa as M,p as b,ra as v,u as m,v as d,wa as O,y as S,za as U}from"./chunk-ZJHYH6I5.js";function X(i,t){if(i&1){let e=f();r(0,"button",5),_("click",function(){let o=m(e).$implicit,p=l();return d(p.seleccionarUsuario(o))}),r(1,"p",0),s(2),a(),r(3,"p",1),s(4),a(),r(5,"p",2),s(6),a(),r(7,"p",3),s(8),a()()}if(i&2){let e=t.$implicit;u(2),g(e.tipo),u(2),g(e.dni),u(2),g(e.nombre),u(2),g(e.apellido)}}var w=class i{constructor(t){this.db=t}usuarioSeleccionado=new S;usuariosLista=new S;usuarios=[];subToUsuarios;ngOnInit(){this.subToUsuarios=this.db.obtenerUsuarios().subscribe(t=>{this.usuarios=t,this.actualizarLista()})}ngOnDestroy(){this.subToUsuarios&&this.subToUsuarios.unsubscribe()}seleccionarUsuario(t){this.usuarioSeleccionado.emit(t)}actualizarLista(){this.usuariosLista.emit(this.usuarios)}static \u0275fac=function(e){return new(e||i)(h(E))};static \u0275cmp=b({type:i,selectors:[["app-lista-usuarios"]],outputs:{usuarioSeleccionado:"usuarioSeleccionado",usuariosLista:"usuariosLista"},standalone:!0,features:[C],decls:10,vars:1,consts:[[1,"tipo"],[1,"dni"],[1,"nombre"],[1,"apellido"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,n){e&1&&(r(0,"div")(1,"p",0),s(2,"Tipo"),a(),r(3,"p",1),s(4,"DNI"),a(),r(5,"p",2),s(6,"Nombre"),a(),r(7,"p",3),s(8,"Apellido"),a()(),x(9,X,9,4,"button",4)),e&2&&(u(9),c("ngForOf",n.usuarios))},dependencies:[U,v,k],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;overflow-y:auto}div[_ngcontent-%COMP%]{margin:2px 10px}button[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:10px;display:flex;text-align:left;margin:2px 10px;border:1px solid gainsboro;padding-top:5px;padding-bottom:5px}p[_ngcontent-%COMP%]{display:inline-block;margin-bottom:0;text-transform:capitalize}.tipo[_ngcontent-%COMP%]{width:15%;padding-left:5px}.nombre[_ngcontent-%COMP%], .apellido[_ngcontent-%COMP%]{width:35%;padding-left:5px}.dni[_ngcontent-%COMP%]{width:15%;padding-left:5px}"]})};function j(i,t){if(i&1){let e=f();r(0,"div",6)(1,"button",7),_("click",function(){m(e);let o=l();return d(o.enviarARegistro())}),s(2,"Generar Nuevo Usuario"),a(),r(3,"app-lista-usuarios",8),_("usuarioSeleccionado",function(o){m(e);let p=l();return d(p.onSeleccion(o))})("usuariosLista",function(o){m(e);let p=l();return d(p.onListaNueva(o))}),a(),r(4,"button",7),_("click",function(){m(e);let o=l();return d(o.descargarExcel())}),s(5,"Descargar Datos Excel"),a()()}}function A(i,t){if(i&1){let e=f();r(0,"app-detalle-usuario",9),_("mostrarHistoria",function(o){m(e);let p=l();return d(p.onMostrarHistoria(o))}),a()}if(i&2){let e=l();c("usuario",e.usuario)}}function F(i,t){if(i&1){let e=f();r(0,"button",10),_("click",function(){m(e);let o=l();return d(o.volver())}),s(1,"Volver"),a()}}function z(i,t){if(i&1&&(r(0,"h2"),s(1),a()),i&2){let e=l();u(),L("Historia Clinica de ",(e.usuario==null?null:e.usuario.nombre)+" "+(e.usuario==null?null:e.usuario.apellido),"")}}function B(i,t){if(i&1&&y(0,"app-historia-clinica",11),i&2){let e=l();c("paciente",e.usuario)}}var H=class i{constructor(t){this.router=t}usuario;usuariosLista=[];mostrandoHistoria=!1;onSeleccion(t){this.usuario=t}onListaNueva(t){this.usuariosLista=t}enviarARegistro(){this.router.navigate(["/registro"])}descargarExcel(){let t="datos-usuarios",e=this.formatearDatos(this.usuariosLista),n=T.json_to_sheet(e),o={Sheets:{[t]:n},SheetNames:[t]},p=I(o,{bookType:"xlsx",type:"array"});this.generarArchivoExcel(p,`${t}.xlsx`)}formatearDatos(t){return t.map(e=>({id:e.id,tipo:e.tipo,habilitado:e.habilitado===void 0?"":e.habilitado?"SI":"NO",nombre:e.nombre,apellido:e.apellido,dni:e.dni,edad:e.edad,obraSocial:e.obraSocial||"",especialidades:e.especialidades?e.especialidades.join(", "):"",email:e.email,imagen1:e.imagen1,imagen2:e.imagen2}))}generarArchivoExcel(t,e){let n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=document.createElement("a");o.href=window.URL.createObjectURL(n),o.download=e,o.click(),setTimeout(()=>{window.URL.revokeObjectURL(o.href)},100)}onMostrarHistoria(t){this.usuario=t,this.mostrandoHistoria=!0}volver(){this.mostrandoHistoria=!1}static \u0275fac=function(e){return new(e||i)(h(O))};static \u0275cmp=b({type:i,selectors:[["app-usuarios"]],standalone:!0,features:[C],decls:6,vars:5,consts:[["class","izquierda",4,"ngIf"],["class","derecha",3,"usuario","mostrarHistoria",4,"ngIf"],["class","top-boton",3,"click",4,"ngIf"],[1,"historia"],[4,"ngIf"],[3,"paciente",4,"ngIf"],[1,"izquierda"],[3,"click"],[3,"usuarioSeleccionado","usuariosLista"],[1,"derecha",3,"mostrarHistoria","usuario"],[1,"top-boton",3,"click"],[3,"paciente"]],template:function(e,n){e&1&&(x(0,j,6,0,"div",0)(1,A,1,1,"app-detalle-usuario",1)(2,F,2,0,"button",2),r(3,"div",3),x(4,z,2,1,"h2",4)(5,B,1,1,"app-historia-clinica",5),a()),e&2&&(c("ngIf",!n.mostrandoHistoria),u(),c("ngIf",!n.mostrandoHistoria),u(),c("ngIf",n.mostrandoHistoria),u(2),c("ngIf",n.mostrandoHistoria),u(),c("ngIf",n.mostrandoHistoria&&n.usuario))},dependencies:[U,v,M,w,P,V],styles:["[_nghost-%COMP%]{display:flex;justify-content:space-around;height:100%;margin-top:5px}.derecha[_ngcontent-%COMP%]{border:1px solid whitesmoke;width:40%;border-radius:25px;padding:10px}app-lista-usuarios[_ngcontent-%COMP%]{width:100%}.izquierda[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;border:1px solid whitesmoke;padding:10px;width:58%;height:90%;border-radius:25px}button[_ngcontent-%COMP%]{width:80%;margin:2px 0;padding:10px 0;border:none;border-radius:5px;font-size:1rem;font-weight:700;background-color:#3485c3;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:#2f75aa}.top-boton[_ngcontent-%COMP%]{position:absolute;left:1%;width:150px}p[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-transform:capitalize}.historia[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}"]})};export{H as UsuariosComponent};
