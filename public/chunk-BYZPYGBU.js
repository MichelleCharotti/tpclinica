import{o as R}from"./chunk-5VHRWU7W.js";import{a as U}from"./chunk-VP4YQ6D5.js";import{$ as D,A as r,B as f,F as h,G as p,I as l,J as e,L as b,M as E,N as d,S as o,T as m,U as c,V as I,Z as S,_ as P,aa as O,cb as B,da as M,la as T,m as _,ma as y,na as F,pa as C,qa as H,r as v,ra as w,s as g,ya as k}from"./chunk-ZKOOGIRO.js";var j=n=>({activo:n});function N(n,t){if(n&1&&(l(0,"h2"),o(1),e()),n&2){let i=d(2);r(),c("Historia Clinica de ",i.datos.nombre+" "+i.datos.apellido,"")}}function V(n,t){if(n&1){let i=b();l(0,"button",6),E("click",function(){let s=v(i).$implicit,u=d(2);return g(u.seleccionarEspecialidad(s.nombre))}),o(1),e()}if(n&2){let i=t.$implicit,a=d(2);p("ngClass",D(2,j,a.especialidadSeleccionada==i.nombre)),r(),c(" ",i.nombre," ")}}function A(n,t){if(n&1&&(l(0,"div",2),h(1,N,2,1,"h2",3),l(2,"div")(3,"h5"),o(4,"Filtrar Especialidades"),e(),l(5,"div",4),h(6,V,2,4,"button",5),e()()()),n&2){let i=d();r(),p("ngIf",i.datos&&i.datos.tipo=="paciente"),r(5),p("ngForOf",i.especialidades)}}function z(n,t){if(n&1&&(l(0,"p")(1,"strong"),o(2),e(),o(3),e()),n&2){let i=d().$implicit;r(2),c("",i.historiaClinica==null||i.historiaClinica.dato1==null?null:i.historiaClinica.dato1.clave,": "),r(),c("",i.historiaClinica==null||i.historiaClinica.dato1==null?null:i.historiaClinica.dato1.valor," ")}}function L(n,t){if(n&1&&(l(0,"p")(1,"strong"),o(2),e(),o(3),e()),n&2){let i=d().$implicit;r(2),c("",i.historiaClinica==null||i.historiaClinica.dato2==null?null:i.historiaClinica.dato2.clave,": "),r(),c("",i.historiaClinica==null||i.historiaClinica.dato2==null?null:i.historiaClinica.dato2.valor," ")}}function q(n,t){if(n&1&&(l(0,"p")(1,"strong"),o(2),e(),o(3),e()),n&2){let i=d().$implicit;r(2),c("",i.historiaClinica==null||i.historiaClinica.dato3==null?null:i.historiaClinica.dato3.clave,": "),r(),c("",i.historiaClinica==null||i.historiaClinica.dato3==null?null:i.historiaClinica.dato3.valor," ")}}function G(n,t){if(n&1&&(l(0,"div",7)(1,"p")(2,"strong"),o(3,"Fecha: "),e(),o(4),O(5,"date"),e(),l(6,"p")(7,"strong"),o(8,"Especialista: "),e(),o(9),e(),l(10,"p")(11,"strong"),o(12,"Consulta: "),e(),o(13),e(),l(14,"p")(15,"strong"),o(16,"Altura: "),e(),o(17),e(),l(18,"p")(19,"strong"),o(20,"Peso: "),e(),o(21),e(),l(22,"p")(23,"strong"),o(24,"Temperatura: "),e(),o(25),e(),l(26,"p")(27,"strong"),o(28,"Presi\xF3n: "),e(),o(29),e(),h(30,z,4,2,"p",3)(31,L,4,2,"p",3)(32,q,4,2,"p",3),e()),n&2){let i=t.$implicit,a=d();r(4),m(M(5,11,i.fecha,"d/M HH:mm","-0300")),r(5),m(i.nombreEspecialista),r(4),m(i.tipo),r(4),m(i.historiaClinica==null?null:i.historiaClinica.altura),r(4),m(i.historiaClinica==null?null:i.historiaClinica.peso),r(4),c("",i.historiaClinica==null?null:i.historiaClinica.temperatura,"\xB0C"),r(4),I("",i.historiaClinica==null?null:i.historiaClinica.presionMax," / ",i.historiaClinica==null?null:i.historiaClinica.presionMin,""),r(),p("ngIf",a.validarDatoOpcional(i.historiaClinica==null?null:i.historiaClinica.dato1)),r(),p("ngIf",a.validarDatoOpcional(i.historiaClinica==null?null:i.historiaClinica.dato2)),r(),p("ngIf",a.validarDatoOpcional(i.historiaClinica==null?null:i.historiaClinica.dato3))}}var $=class n{constructor(t,i,a,s){this.db=t;this.usuario=i;this.datePipe=a;this.http=s;this.usuario.datos?.tipo=="paciente"&&(this.paciente=this.usuario.datos)}_turnos=[];turnos=[];sub;_especialista;especialidades=[];especialidadSeleccionada="";_paciente;get datos(){return this.usuario.datos}set especialista(t){t&&t.tipo=="especialista"&&(this._especialista=t)}set paciente(t){t&&(this._paciente=t,this.sub=this.db.obtenerTurnosPaciente(t.id).subscribe(i=>{this._turnos=[];for(let a of i)if(a.estado==6){if(this._especialista)a.idEspecialista==this._especialista.id&&this._turnos.push(a);else if(this._turnos.push(a),this.validadEspecialidad(a)){let s={nombre:a.tipo,id:a.id,foto:""};this.especialidades.push(s)}}this._turnos.sort((a,s)=>{let u=new Date(a.fecha);return new Date(s.fecha).getTime()-u.getTime()}),this.turnos=this._turnos}))}ngDestroy(){this.sub&&this.sub.unsubscribe()}validarDatoOpcional(t){return t!=null&&t.clave!=""&&t.valor!=""}seleccionarEspecialidad(t){this.especialidadSeleccionada==t?this.especialidadSeleccionada="":this.especialidadSeleccionada=t,this.filtrarPorEspecialidad(this.especialidadSeleccionada)}filtrarPorEspecialidad(t){if(t=="")this.turnos=this._turnos;else{this.turnos=[];for(let i of this._turnos)i.tipo==t&&this.turnos.push(i)}}validadEspecialidad(t){for(let i of this.especialidades)if(i.nombre==t.tipo)return!1;return!0}encodeImageToBase64(t){return new Promise((i,a)=>{this.http.get(t,{responseType:"blob"}).subscribe(s=>{let u=new FileReader;u.onloadend=()=>{let x=u.result;i(x)},u.onerror=x=>{a(x)},u.readAsDataURL(s)},s=>{a(s)})})}static \u0275fac=function(i){return new(i||n)(f(B),f(U),f(C),f(w))};static \u0275cmp=_({type:n,selectors:[["app-historia-clinica"]],inputs:{especialista:"especialista",paciente:"paciente"},standalone:!0,features:[S([C]),P],decls:2,vars:2,consts:[["class","titulo historia",4,"ngIf"],["class","historia",4,"ngFor","ngForOf"],[1,"titulo","historia"],[4,"ngIf"],[1,"opciones"],["class","opciones-imagen",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"opciones-imagen",3,"click","ngClass"],[1,"historia"]],template:function(i,a){i&1&&h(0,A,7,2,"div",0)(1,G,33,15,"div",1),i&2&&(p("ngIf",a.datos&&a.datos.tipo!="especialista"),r(),p("ngForOf",a.turnos))},dependencies:[k,H,T,y,F,C,R],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.historia[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#f5f5f5;border:2px solid grey;border-radius:15px;margin:10px 0;padding:5px 10px 0}.titulo[_ngcontent-%COMP%]{align-items:center;justify-content:center}p[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{text-transform:capitalize}h2[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{text-align:center}.activo[_ngcontent-%COMP%]{background-color:#3485c3;color:#fff}button[_ngcontent-%COMP%]{margin:5px;width:150px;padding:10px 0;border:none;border-radius:5px;font-size:1rem;font-weight:700;cursor:pointer}.descargar[_ngcontent-%COMP%]{width:auto;padding:10px 15px;background-color:#85c334}"]})};export{$ as a};
