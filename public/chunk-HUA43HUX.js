import{a as V}from"./chunk-BYZPYGBU.js";import{o as H}from"./chunk-5VHRWU7W.js";import{a as F}from"./chunk-VP4YQ6D5.js";import{$ as y,A as o,B as b,F as f,G as l,I as n,J as a,K as S,L as g,M as v,N as d,S as c,T as m,U as E,_ as P,aa as u,cb as D,da as _,la as I,m as C,ma as M,na as T,pa as w,qa as O,r as x,s as h,ya as k}from"./chunk-ZKOOGIRO.js";import"./chunk-WTI2L5DI.js";var N=t=>({activo:t});function j(t,s){if(t&1){let e=g();n(0,"button",4),v("click",function(){x(e);let i=d();return h(i.volver())}),c(1,"Volver"),a()}}function z(t,s){t&1&&(n(0,"p"),c(1,"---------------"),a())}function R(t,s){t&1&&(n(0,"p"),c(1,"---------------"),a())}function L(t,s){if(t&1){let e=g();n(0,"button",8),v("click",function(){let i=x(e).$implicit,p=d(2);return h(p.seleccionarPaciente(i))}),n(1,"p"),c(2),a(),n(3,"p"),c(4),a(),n(5,"p"),c(6,"Turnos Previos:"),a(),n(7,"p",9),c(8),u(9,"date"),a(),n(10,"p",9),c(11),a(),f(12,z,2,0,"p",2),n(13,"p",9),c(14),u(15,"date"),a(),n(16,"p",9),c(17),a(),f(18,R,2,0,"p",2),n(19,"p",9),c(20),u(21,"date"),a(),n(22,"p",9),c(23),a()()}if(t&2){let e=s.$implicit,r=d(2);l("ngClass",y(23,N,r.pacienteSeleccionado==e)),o(2),m(e.nombre),o(2),m(e.dni),o(4),m(_(9,11,e.fecha1,"d/M HH:mm","-0300")),o(3),m(e.tipo1),o(),l("ngIf",e.fecha2),o(2),m(_(15,15,e.fecha2,"d/M HH:mm","-0300")),o(3),m(e.tipo2),o(),l("ngIf",e.fecha3),o(2),m(_(21,19,e.fecha3,"d/M HH:mm","-0300")),o(3),m(e.tipo3)}}function $(t,s){if(t&1&&(n(0,"div",5)(1,"h4"),c(2,"Pacientes"),a(),n(3,"div",6),f(4,L,24,25,"button",7),a()()),t&2){let e=d();o(4),l("ngForOf",e.pacientes)}}function A(t,s){if(t&1&&(n(0,"h2"),c(1),a()),t&2){let e=d();o(),E("Historia Clinica de ",e.pacienteSeleccionado.nombre,"")}}function q(t,s){if(t&1&&S(0,"app-historia-clinica",10),t&2){let e=d();l("especialista",e.especialista)("paciente",e.pacienteSeleccionado)}}var B=class t{constructor(s,e){this.db=s;this.usuario=e;this.usuario.datos&&this.usuario.datos.tipo=="especialista"&&(this.subTurnos=this.db.obtenerTurnosEspecialista(this.usuario.datos.id).subscribe(r=>{this.pacientes=[],r.sort((i,p)=>new Date(p.fecha).getTime()-new Date(i.fecha).getTime());for(let i of r)if(i.estado==6)if(!this.existePaciente(this.pacientes,i.idPaciente))this.pacientes.push({id:i.idPaciente,nombre:i.nombrePaciente,dni:i.dniPaciente,fecha1:i.fecha,tipo1:i.tipo});else{let p=this.pacientes.findIndex(U=>U.id===i.idPaciente);p!==-1&&(this.pacientes[p].fecha2?this.pacientes[p].fecha3||(this.pacientes[p].fecha3=i.fecha,this.pacientes[p].tipo3=i.tipo):(this.pacientes[p].fecha2=i.fecha,this.pacientes[p].tipo2=i.tipo))}}))}pacientes=[];pacienteSeleccionado;subPacientes;subTurnos;get especialista(){return this.usuario.datos}ngDestroy(){this.subPacientes&&this.subPacientes.unsubscribe(),this.subTurnos&&this.subTurnos.unsubscribe()}seleccionarPaciente(s){this.pacienteSeleccionado=s}volver(){this.pacienteSeleccionado=void 0}existePaciente(s,e){for(let r of s)if(console.log(r," | ",e),r.id==e)return!0;return!1}static \u0275fac=function(e){return new(e||t)(b(D),b(F))};static \u0275cmp=C({type:t,selectors:[["app-especialista"]],standalone:!0,features:[P],decls:4,vars:4,consts:[["class","top-boton",3,"click",4,"ngIf"],["class","titulo",4,"ngIf"],[4,"ngIf"],[3,"especialista","paciente",4,"ngIf"],[1,"top-boton",3,"click"],[1,"titulo"],[1,"opciones"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"],[1,"soft"],[3,"especialista","paciente"]],template:function(e,r){e&1&&f(0,j,2,0,"button",0)(1,$,5,1,"div",1)(2,A,2,1,"h2",2)(3,q,1,2,"app-historia-clinica",3),e&2&&(l("ngIf",r.pacienteSeleccionado),o(),l("ngIf",!r.pacienteSeleccionado),o(),l("ngIf",r.pacienteSeleccionado),o(),l("ngIf",r.pacienteSeleccionado))},dependencies:[V,k,O,I,M,T,w,H],styles:[".top-boton[_ngcontent-%COMP%]{position:absolute;left:1%}.titulo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.opciones[_ngcontent-%COMP%]{background-color:#bebcbc;display:flex;align-items:center;justify-content:center;flex-wrap:wrap;max-height:50vh;max-width:80vw;padding:5px;border-radius:10px;border:1px solid grey;overflow-y:auto}[_nghost-%COMP%]{display:flex;align-items:center;flex-direction:column}p[_ngcontent-%COMP%]{margin:0;text-transform:capitalize}button[_ngcontent-%COMP%]{margin:5px;width:200px;padding:10px 5px;border:none;border-radius:5px;font-size:1rem;font-weight:700;cursor:pointer}.activo[_ngcontent-%COMP%]{background-color:#3485c3;color:#fff}h2[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-transform:capitalize}.soft[_ngcontent-%COMP%]{font-weight:300}"]})};export{B as EspecialistaComponent};
