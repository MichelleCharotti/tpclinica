import{a as D}from"./chunk-BT3VDQWR.js";import{c as G,f as z,j as F,l as I,o as j}from"./chunk-TNGGSYNN.js";import{a as P}from"./chunk-JUPKOMRS.js";import{$ as V,C as a,D as y,H as g,I as l,K as s,L as r,M as H,N as h,O as u,P as p,U as d,V as x,X as b,Y as v,Z as w,aa as f,la as k,ma as O,na as T,p as M,qa as S,u as m,v as _,xa as E}from"./chunk-CITMPR77.js";var C=n=>({activo:n}),W=n=>({habilitado:n});function A(n,i){if(n&1){let e=h();s(0,"button",4),u("click",function(){let o=m(e).$implicit,c=p();return _(c.seleccionarHorario(o))}),d(1),r()}if(n&2){let e=i.$implicit,t=p();l("ngClass",f(2,C,t.horario&&t.horario.especialidad==e.especialidad)),a(),x(e.especialidad)}}function L(n,i){if(n&1){let e=h();s(0,"div")(1,"p"),d(2),r(),s(3,"p",9),d(4),r(),s(5,"input",10),w("ngModelChange",function(o){let c=m(e).$implicit;return v(c.inicio,o)||(c.inicio=o),_(o)}),u("change",function(){let o=m(e).$implicit,c=p(2);return _(c.validarInicio(o))}),r(),s(6,"input",10),w("ngModelChange",function(o){let c=m(e).$implicit;return v(c.fin,o)||(c.fin=o),_(o)}),u("change",function(){let o=m(e).$implicit,c=p(2);return _(c.validarFin(o))}),r(),s(7,"button",11),u("click",function(){let o=m(e).index,c=p(2);return _(c.cambiarEstado(o))}),d(8,"Cambiar Estado"),r()()}if(n&2){let e=i.$implicit;a(2),x(e.nombre),a(),l("ngClass",f(5,W,e.estado)),a(),x(e.estado?"habilitado":"no disponible"),a(),b("ngModel",e.inicio),a(),b("ngModel",e.fin)}}function R(n,i){if(n&1&&(s(0,"p",12),d(1),r()),n&2){let e=p(2);a(),x(e.mensaje)}}function U(n,i){if(n&1){let e=h();s(0,"div",5)(1,"div")(2,"div")(3,"p"),d(4,"Tiempo del Turno"),r(),s(5,"button",4),u("click",function(){m(e);let o=p();return _(o.cambiarTiempo(30))}),d(6,"30"),r(),s(7,"button",4),u("click",function(){m(e);let o=p();return _(o.cambiarTiempo(45))}),d(8,"45"),r(),s(9,"button",4),u("click",function(){m(e);let o=p();return _(o.cambiarTiempo(60))}),d(10,"60"),r()(),g(11,L,9,7,"div",6),r(),s(12,"button",7),u("click",function(){m(e);let o=p();return _(o.actualizarHorarios())}),d(13,"Actualizar Horario Disponible"),r(),g(14,R,2,1,"p",8),r()}if(n&2){let e=p();a(5),l("ngClass",f(5,C,e.horario.tiempo==30)),a(2),l("ngClass",f(7,C,e.horario.tiempo==45)),a(2),l("ngClass",f(9,C,e.horario.tiempo==60)),a(2),l("ngForOf",e.horario.dias),a(3),l("ngIf",e.mensaje!="")}}function $(n,i){n&1&&H(0,"app-loading",13),n&2&&l("mensaje","Actualizando")}var N=class n{constructor(i){this.usuario=i}horario;actualizando=!1;mensaje="";get especialidades(){return this.usuario.datos?this.usuario.datos?.horarios:[]}seleccionarHorario(i){this.horario=i,this.horario.dias[0]}cambiarTiempo(i){this.horario&&(this.horario.tiempo=i)}cambiarEstado(i){this.horario?.dias&&(this.horario.dias[i].estado=!this.horario.dias[i].estado),console.log(this.horario),console.log(this.usuario.datos?.horarios)}validarInicio(i){let t=i.inicio;i.inicio<8&&(t=8),i.inicio>=i.fin&&(t=i.fin-1),i.inicio=t,console.log(this.horario)}validarFin(i){let e=i.nombre=="sabado"?14:19,t=i.fin;i.fin>e&&(t=e),i.fin<=i.inicio&&(t=i.inicio+1),i.fin=t,console.log(this.horario)}actualizarHorarios(){this.actualizando=!0,this.usuario.actualizarHorarios().then(()=>{this.actualizando=!1,this.mensaje="Horarios actualizados exitosamente"}).catch(i=>{console.log(i),this.mensaje="Error en la base de datos. Intentelo mas tarde"})}static \u0275fac=function(e){return new(e||n)(y(P))};static \u0275cmp=M({type:n,selectors:[["app-gestionar-horarios"]],standalone:!0,features:[V],decls:6,vars:3,consts:[[1,"especialidades"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","horario",4,"ngIf"],[3,"mensaje",4,"ngIf"],[3,"click","ngClass"],[1,"horario"],[4,"ngFor","ngForOf"],[1,"actualizar",3,"click"],["class","mensaje",4,"ngIf"],[1,"estado",3,"ngClass"],["type","number",3,"ngModelChange","change","ngModel"],[1,"cambiar-estado",3,"click"],[1,"mensaje"],[3,"mensaje"]],template:function(e,t){e&1&&(s(0,"h3"),d(1,"Gestionar Horarios"),r(),s(2,"div",0),g(3,A,2,4,"button",1),r(),g(4,U,15,11,"div",2)(5,$,1,1,"app-loading",3)),e&2&&(a(3),l("ngForOf",t.especialidades),a(),l("ngIf",t.horario),a(),l("ngIf",t.actualizando))},dependencies:[E,S,k,O,T,j,G,I,z,F,D],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center}p[_ngcontent-%COMP%]{display:inline-block;width:155px;text-transform:capitalize;font-weight:700;font-size:18px}h3[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{margin:5px;width:50px;padding:10px 0;border:none;border-radius:5px;font-size:1rem;font-weight:700;cursor:pointer}.activo[_ngcontent-%COMP%]{background-color:#3485c3;color:#fff}.especialidades[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.especialidades[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .actualizar[_ngcontent-%COMP%]{width:200px}.horario[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.horario[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border:2px solid whitesmoke;padding:10px 30px;border-radius:10px}input[_ngcontent-%COMP%]{background-color:#f5f5f5;border:1px solid #eee;width:50px;margin:0 10px;font-size:18px}.cambiar-estado[_ngcontent-%COMP%]{font-size:18px;width:auto;padding:2px 5px}.estado[_ngcontent-%COMP%]{color:red;background-color:#f5f5f5;text-align:center;font-weight:700;width:145px;border-radius:5px}.habilitado[_ngcontent-%COMP%]{color:#49b517}.mensaje[_ngcontent-%COMP%]{width:auto}"]})};export{N as GestionarHorariosComponent};
