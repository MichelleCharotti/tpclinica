import{a as U,b as be,d as OM,f as Nr,g as _}from"./chunk-WTI2L5DI.js";function mE(t,e){return Object.is(t,e)}var Qe=null,Cu=!1,Su=1,Bn=Symbol("SIGNAL");function ge(t){let e=Qe;return Qe=t,e}function yE(){return Qe}var Ia={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Yf(t){if(Cu)throw new Error("");if(Qe===null)return;Qe.consumerOnSignalRead(t);let e=Qe.nextProducerIndex++;if(Mu(Qe),e<Qe.producerNode.length&&Qe.producerNode[e]!==t&&_a(Qe)){let n=Qe.producerNode[e];Nu(n,Qe.producerIndexOfThis[e])}Qe.producerNode[e]!==t&&(Qe.producerNode[e]=t,Qe.producerIndexOfThis[e]=_a(Qe)?wE(t,Qe,e):0),Qe.producerLastReadVersion[e]=t.version}function kM(){Su++}function vE(t){if(!(_a(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Su)){if(!t.producerMustRecompute(t)&&!Zf(t)){t.dirty=!1,t.lastCleanEpoch=Su;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Su}}function _E(t){if(t.liveConsumerNode===void 0)return;let e=Cu;Cu=!0;try{for(let n of t.liveConsumerNode)n.dirty||LM(n)}finally{Cu=e}}function IE(){return Qe?.consumerAllowSignalWrites!==!1}function LM(t){t.dirty=!0,_E(t),t.consumerMarkedDirty?.(t)}function Ru(t){return t&&(t.nextProducerIndex=0),ge(t)}function Jf(t,e){if(ge(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(_a(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Nu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Zf(t){Mu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(vE(n),r!==n.version))return!0}return!1}function Xf(t){if(Mu(t),_a(t))for(let e=0;e<t.producerNode.length;e++)Nu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function wE(t,e,n){if(EE(t),t.liveConsumerNode.length===0&&TE(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=wE(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Nu(t,e){if(EE(t),t.liveConsumerNode.length===1&&TE(t))for(let r=0;r<t.producerNode.length;r++)Nu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Mu(i),i.producerIndexOfThis[r]=e}}function _a(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Mu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function EE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function TE(t){return t.producerNode!==void 0}function DE(t){let e=Object.create(FM);e.computation=t;let n=()=>{if(vE(e),Yf(e),e.value===Au)throw e.error;return e.value};return n[Bn]=e,n}var Kf=Symbol("UNSET"),Qf=Symbol("COMPUTING"),Au=Symbol("ERRORED"),FM=be(U({},Ia),{value:Kf,dirty:!0,error:null,equal:mE,producerMustRecompute(t){return t.value===Kf||t.value===Qf},producerRecomputeValue(t){if(t.value===Qf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Qf;let n=Ru(t),r;try{r=t.computation()}catch(i){r=Au,t.error=i}finally{Jf(t,n)}if(e!==Kf&&e!==Au&&r!==Au&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function VM(){throw new Error}var bE=VM;function CE(){bE()}function SE(t){bE=t}var UM=null;function AE(t){let e=Object.create(NE);e.value=t;let n=()=>(Yf(e),e.value);return n[Bn]=e,n}function ep(t,e){IE()||CE(),t.equal(t.value,e)||(t.value=e,jM(t))}function RE(t,e){IE()||CE(),ep(t,e(t.value))}var NE=be(U({},Ia),{equal:mE,value:void 0});function jM(t){t.version++,kM(),_E(t),UM?.()}function ee(t){return typeof t=="function"}function _s(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var xu=_s(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function wi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Fe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(s){e=s instanceof xu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{ME(s)}catch(o){e=e??[],o instanceof xu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new xu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ME(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&wi(n,e)}remove(e){let{_finalizers:n}=this;n&&wi(n,e),e instanceof t&&e._removeParent(this)}};Fe.EMPTY=(()=>{let t=new Fe;return t.closed=!0,t})();var tp=Fe.EMPTY;function Pu(t){return t instanceof Fe||t&&"closed"in t&&ee(t.remove)&&ee(t.add)&&ee(t.unsubscribe)}function ME(t){ee(t)?t():t.unsubscribe()}var sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Is={setTimeout(t,e,...n){let{delegate:r}=Is;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Is;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ou(t){Is.setTimeout(()=>{let{onUnhandledError:e}=sn;if(e)e(t);else throw t})}function wa(){}var xE=np("C",void 0,void 0);function PE(t){return np("E",void 0,t)}function OE(t){return np("N",t,void 0)}function np(t,e,n){return{kind:t,value:e,error:n}}var Ei=null;function ws(t){if(sn.useDeprecatedSynchronousErrorHandling){let e=!Ei;if(e&&(Ei={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ei;if(Ei=null,n)throw r}}else t()}function kE(t){sn.useDeprecatedSynchronousErrorHandling&&Ei&&(Ei.errorThrown=!0,Ei.error=t)}var Ti=class extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Pu(e)&&e.add(this)):this.destination=HM}static create(e,n,r){return new Es(e,n,r)}next(e){this.isStopped?ip(OE(e),this):this._next(e)}error(e){this.isStopped?ip(PE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ip(xE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},BM=Function.prototype.bind;function rp(t,e){return BM.call(t,e)}var sp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ku(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ku(r)}else ku(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ku(n)}}},Es=class extends Ti{constructor(e,n,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&sn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&rp(e.next,s),error:e.error&&rp(e.error,s),complete:e.complete&&rp(e.complete,s)}):i=e}this.destination=new sp(i)}};function ku(t){sn.useDeprecatedSynchronousErrorHandling?kE(t):Ou(t)}function $M(t){throw t}function ip(t,e){let{onStoppedNotification:n}=sn;n&&Is.setTimeout(()=>n(t,e))}var HM={closed:!0,next:wa,error:$M,complete:wa};var Ts=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lt(t){return t}function Lu(...t){return op(t)}function op(t){return t.length===0?Lt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=zM(n)?n:new Es(n,r,i);return ws(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=LE(r),new r((i,s)=>{let o=new Es({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ts](){return this}pipe(...n){return op(n)(this)}toPromise(n){return n=LE(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function LE(t){var e;return(e=t??sn.Promise)!==null&&e!==void 0?e:Promise}function qM(t){return t&&ee(t.next)&&ee(t.error)&&ee(t.complete)}function zM(t){return t&&t instanceof Ti||qM(t)&&Pu(t)}function ap(t){return ee(t?.lift)}function de(t){return e=>{if(ap(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new cp(t,e,n,r,i)}var cp=class extends Ti{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ds(){return de((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var bs=class extends se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ap(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fe;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fe.EMPTY)}return e}refCount(){return Ds()(this)}};var FE=_s(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ut=(()=>{class t extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Fu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new FE}next(n){ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?tp:(this.currentObservers=null,s.push(n),new Fe(()=>{this.currentObservers=null,wi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new se;return n.source=this,n}}return t.create=(e,n)=>new Fu(e,n),t})(),Fu=class extends ut{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:tp}};var nt=class extends ut{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var up={now(){return(up.delegate||Date).now()},delegate:void 0};var Vu=class extends Fe{constructor(e,n){super()}schedule(e,n=0){return this}};var Ea={setInterval(t,e,...n){let{delegate:r}=Ea;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ea;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Cs=class extends Vu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ea.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ea.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,wi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ss=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ss.now=up.now;var As=class extends Ss{constructor(e,n=Ss.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var lp=new As(Cs);var Uu=class extends Cs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ju=class extends As{};var dp=new ju(Uu);var Ft=new se(t=>t.complete());function VE(t){return t&&ee(t.schedule)}function UE(t){return t[t.length-1]}function Bu(t){return ee(UE(t))?t.pop():void 0}function Mr(t){return VE(UE(t))?t.pop():void 0}function hp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function BE(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function c(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function jE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Di(t){return this instanceof Di?(this.v=t,this):new Di(t)}function $E(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(D){return Promise.resolve(D).then(y,p)}}function a(y,D){r[y]&&(i[y]=function(R){return new Promise(function(S,P){s.push([y,R,S,P])>1||c(y,R)})},D&&(i[y]=D(i[y])))}function c(y,D){try{l(r[y](D))}catch(R){m(s[0][3],R)}}function l(y){y.value instanceof Di?Promise.resolve(y.value.v).then(h,p):m(s[0][2],y)}function h(y){c("next",y)}function p(y){c("throw",y)}function m(y,D){y(D),s.shift(),s.length&&c(s[0][0],s[0][1])}}function HE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jE=="function"?jE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var $u=t=>t&&typeof t.length=="number"&&typeof t!="function";function Hu(t){return ee(t?.then)}function qu(t){return ee(t[Ts])}function zu(t){return Symbol.asyncIterator&&ee(t?.[Symbol.asyncIterator])}function Gu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function GM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wu=GM();function Ku(t){return ee(t?.[Wu])}function Qu(t){return $E(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Di(n.read());if(i)return yield Di(void 0);yield yield Di(r)}}finally{n.releaseLock()}})}function Yu(t){return ee(t?.getReader)}function $e(t){if(t instanceof se)return t;if(t!=null){if(qu(t))return WM(t);if($u(t))return KM(t);if(Hu(t))return QM(t);if(zu(t))return qE(t);if(Ku(t))return YM(t);if(Yu(t))return JM(t)}throw Gu(t)}function WM(t){return new se(e=>{let n=t[Ts]();if(ee(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KM(t){return new se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function QM(t){return new se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ou)})}function YM(t){return new se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function qE(t){return new se(e=>{ZM(t,e).catch(n=>e.error(n))})}function JM(t){return qE(Qu(t))}function ZM(t,e){var n,r,i,s;return BE(this,void 0,void 0,function*(){try{for(n=HE(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function At(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function xr(t,e=0){return de((n,r)=>{n.subscribe(ue(r,i=>At(r,t,()=>r.next(i),e),()=>At(r,t,()=>r.complete(),e),i=>At(r,t,()=>r.error(i),e)))})}function Pr(t,e=0){return de((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function zE(t,e){return $e(t).pipe(Pr(e),xr(e))}function GE(t,e){return $e(t).pipe(Pr(e),xr(e))}function WE(t,e){return new se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function KE(t,e){return new se(n=>{let r;return At(n,e,()=>{r=t[Wu](),At(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function Ju(t,e){if(!t)throw new Error("Iterable cannot be null");return new se(n=>{At(n,e,()=>{let r=t[Symbol.asyncIterator]();At(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function QE(t,e){return Ju(Qu(t),e)}function YE(t,e){if(t!=null){if(qu(t))return zE(t,e);if($u(t))return WE(t,e);if(Hu(t))return GE(t,e);if(zu(t))return Ju(t,e);if(Ku(t))return KE(t,e);if(Yu(t))return QE(t,e)}throw Gu(t)}function Me(t,e){return e?YE(t,e):$e(t)}function Q(...t){let e=Mr(t);return Me(t,e)}function Rs(t,e){let n=ee(t)?t:()=>t,r=i=>i.error(n());return new se(e?i=>e.schedule(r,0,i):r)}function fp(t){return!!t&&(t instanceof se||ee(t.lift)&&ee(t.subscribe))}var $n=_s(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function J(t,e){return de((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:XM}=Array;function ex(t,e){return XM(e)?t(...e):t(e)}function Zu(t){return J(e=>ex(t,e))}var{isArray:tx}=Array,{getPrototypeOf:nx,prototype:rx,keys:ix}=Object;function Xu(t){if(t.length===1){let e=t[0];if(tx(e))return{args:e,keys:null};if(sx(e)){let n=ix(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function sx(t){return t&&typeof t=="object"&&nx(t)===rx}function el(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ta(...t){let e=Mr(t),n=Bu(t),{args:r,keys:i}=Xu(t);if(r.length===0)return Me([],e);let s=new se(ox(r,e,i?o=>el(i,o):Lt));return n?s.pipe(Zu(n)):s}function ox(t,e,n=Lt){return r=>{JE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)JE(e,()=>{let l=Me(t[c],e),h=!1;l.subscribe(ue(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function JE(t,e,n){t?At(n,t,e):e()}function ZE(t,e,n,r,i,s,o,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},y=R=>l<r?D(R):c.push(R),D=R=>{s&&e.next(R),l++;let S=!1;$e(n(R,h++)).subscribe(ue(e,P=>{i?.(P),s?y(P):e.next(P)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let P=c.shift();o?At(e,o,()=>D(P)):D(P)}m()}catch(P){e.error(P)}}))};return t.subscribe(ue(e,y,()=>{p=!0,m()})),()=>{a?.()}}function He(t,e,n=1/0){return ee(e)?He((r,i)=>J((s,o)=>e(r,s,i,o))($e(t(r,i))),n):(typeof e=="number"&&(n=e),de((r,i)=>ZE(r,i,t,n)))}function Ns(t=1/0){return He(Lt,t)}function XE(){return Ns(1)}function Ms(...t){return XE()(Me(t,Mr(t)))}function tl(t){return new se(e=>{$e(t()).subscribe(e)})}function ax(...t){let e=Bu(t),{args:n,keys:r}=Xu(t),i=new se(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;$e(n[h]).subscribe(ue(s,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?el(r,a):a),s.complete())}))}});return e?i.pipe(Zu(e)):i}function wt(t,e){return de((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Or(t){return de((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=$e(t(o,Or(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function eT(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(ue(o,h=>{let p=l++;c=a?t(c,h,p):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Hn(t,e){return ee(e)?He(t,e,1):He(t,1)}function kr(t){return de((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function qn(t){return t<=0?()=>Ft:de((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function pp(t){return J(()=>t)}function nl(t=cx){return de((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function cx(){return new $n}function bi(t){return de((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function _n(t,e){let n=arguments.length>=2;return r=>r.pipe(t?wt((i,s)=>t(i,s,r)):Lt,qn(1),n?kr(e):nl(()=>new $n))}function xs(t){return t<=0?()=>Ft:de((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function gp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?wt((i,s)=>t(i,s,r)):Lt,xs(1),n?kr(e):nl(()=>new $n))}function rl(t,e){return de(eT(t,e,arguments.length>=2,!0))}function il(...t){let e=Mr(t);return de((n,r)=>{(e?Ms(t,n,e):Ms(t,n)).subscribe(r)})}function Rt(t,e){return de((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,c=>{i?.unsubscribe();let l=0,h=s++;$e(t(c,h)).subscribe(i=ue(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function mp(t){return de((e,n)=>{$e(t).subscribe(ue(n,()=>n.complete(),wa)),!n.closed&&e.subscribe(n)})}function qe(t,e,n){let r=ee(t)||e||n?{next:t,error:e,complete:n}:t;return r?de((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Lt}var jT="https://g.co/ng/security#xss",G=class extends Error{constructor(e,n){super(jl(e,n)),this.code=e}};function jl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function xa(t){return{toString:t}.toString()}var sl="__parameters__";function ux(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function BT(t,e,n){return xa(()=>{let r=ux(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(sl)?c[sl]:Object.defineProperty(c,sl,{value:[]})[sl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Si=globalThis;function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function lx(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Tt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Tt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function tT(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var dx=Te({__forward_ref__:Te});function $T(t){return t.__forward_ref__=$T,t.toString=function(){return Tt(this())},t}function Et(t){return HT(t)?t():t}function HT(t){return typeof t=="function"&&t.hasOwnProperty(dx)&&t.__forward_ref__===$T}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ys(t){return{providers:t.providers||[],imports:t.imports||[]}}function Bl(t){return nT(t,zT)||nT(t,GT)}function qT(t){return Bl(t)!==null}function nT(t,e){return t.hasOwnProperty(e)?t[e]:null}function hx(t){let e=t&&(t[zT]||t[GT]);return e||null}function rT(t){return t&&(t.hasOwnProperty(iT)||t.hasOwnProperty(fx))?t[iT]:null}var zT=Te({\u0275prov:Te}),iT=Te({\u0275inj:Te}),GT=Te({ngInjectableDef:Te}),fx=Te({ngInjectorDef:Te}),$=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function WT(t){return t&&!!t.\u0275providers}var px=Te({\u0275cmp:Te}),gx=Te({\u0275dir:Te}),mx=Te({\u0275pipe:Te}),yx=Te({\u0275mod:Te}),ml=Te({\u0275fac:Te}),ba=Te({__NG_ELEMENT_ID__:Te}),sT=Te({__NG_ENV_ID__:Te});function Us(t){return typeof t=="string"?t:t==null?"":String(t)}function vx(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Us(t)}function _x(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new G(-200,t)}function Ag(t,e){throw new G(-201,!1)}var oe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(oe||{}),Mp;function KT(){return Mp}function Nt(t){let e=Mp;return Mp=t,e}function QT(t,e,n){let r=Bl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&oe.Optional)return null;if(e!==void 0)return e;Ag(t,"Injector")}var Ix={},Ca=Ix,xp="__NG_DI_FLAG__",yl="ngTempTokenPath",wx="ngTokenPath",Ex=/\n/gm,Tx="\u0275",oT="__source",Fs;function Dx(){return Fs}function Lr(t){let e=Fs;return Fs=t,e}function bx(t,e=oe.Default){if(Fs===void 0)throw new G(-203,!1);return Fs===null?QT(t,void 0,e):Fs.get(t,e&oe.Optional?null:void 0,e)}function z(t,e=oe.Default){return(KT()||bx)(Et(t),e)}function x(t,e=oe.Default){return z(t,$l(e))}function $l(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Pp(t){let e=[];for(let n=0;n<t.length;n++){let r=Et(t[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,s=oe.Default;for(let o=0;o<r.length;o++){let a=r[o],c=Cx(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(z(i,s))}else e.push(z(r))}return e}function YT(t,e){return t[xp]=e,t.prototype[xp]=e,t}function Cx(t){return t[xp]}function Sx(t,e,n,r){let i=t[yl];throw e[oT]&&i.unshift(e[oT]),t.message=Ax(`
`+t.message,i,n,r),t[wx]=i,t[yl]=null,t}function Ax(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Tx?t.slice(2):t;let i=Tt(e);if(Array.isArray(e))i=e.map(Tt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Tt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ex,`
  `)}`}var je=YT(BT("Optional"),8);var Rg=YT(BT("SkipSelf"),4);function Ri(t,e){let n=t.hasOwnProperty(ml);return n?t[ml]:null}function Rx(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function Nx(t){return t.flat(Number.POSITIVE_INFINITY)}function Ng(t,e){t.forEach(n=>Array.isArray(n)?Ng(n,e):e(n))}function JT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function vl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Mx(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function xx(t,e,n){let r=Pa(t,e);return r>=0?t[r|1]=n:(r=~r,Mx(t,r,e,n)),r}function yp(t,e){let n=Pa(t,e);if(n>=0)return t[n|1]}function Pa(t,e){return Px(t,e,1)}function Px(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var js={},zt=[],Bs=new $(""),ZT=new $("",-1),XT=new $(""),_l=class{get(e,n=Ca){if(n===Ca){let r=new Error(`NullInjectorError: No provider for ${Tt(e)}!`);throw r.name="NullInjectorError",r}return n}},eD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(eD||{}),En=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(En||{}),Ur=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ur||{});function Ox(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Op(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];kx(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function tD(t){return t===3||t===4||t===6}function kx(t){return t.charCodeAt(0)===64}function Sa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?aT(t,n,i,null,e[++r]):aT(t,n,i,null,null))}}return t}function aT(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var nD="ng-template";function Lx(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Ox(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Mg(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Mg(t){return t.type===4&&t.value!==nD}function Fx(t,e,n){let r=t.type===4&&!n?nD:t.value;return e===r}function Vx(t,e,n){let r=4,i=t.attrs,s=i!==null?Bx(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!on(r)&&!on(c))return!1;if(o&&on(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Fx(t,c,n)||c===""&&e.length===1){if(on(r))return!1;o=!0}}else if(r&8){if(i===null||!Lx(t,i,c,n)){if(on(r))return!1;o=!0}}else{let l=e[++a],h=Ux(c,i,Mg(t),n);if(h===-1){if(on(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(on(r))return!1;o=!0}}}}return on(r)||o}function on(t){return(t&1)===0}function Ux(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return $x(e,t)}function jx(t,e,n=!1){for(let r=0;r<e.length;r++)if(Vx(t,e[r],n))return!0;return!1}function Bx(t){for(let e=0;e<t.length;e++){let n=t[e];if(tD(n))return e}return t.length}function $x(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function cT(t,e){return t?":not("+e.trim()+")":e}function Hx(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!on(o)&&(e+=cT(s,i),i=""),r=o,s=s||!on(r);n++}return i!==""&&(e+=cT(s,i)),e}function qx(t){return t.map(Hx).join(",")}function zx(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!on(i))break;i=s}r++}return{attrs:e,classes:n}}function rD(t){return xa(()=>{let e=cD(t),n=be(U({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===eD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||En.Emulated,styles:t.styles||zt,_:null,schemas:t.schemas||null,tView:null,id:""});uD(n);let r=t.dependencies;return n.directiveDefs=lT(r,!1),n.pipeDefs=lT(r,!0),n.id=Kx(n),n})}function Gx(t){return jr(t)||iD(t)}function Wx(t){return t!==null}function Js(t){return xa(()=>({type:t.type,bootstrap:t.bootstrap||zt,declarations:t.declarations||zt,imports:t.imports||zt,exports:t.exports||zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function uT(t,e){if(t==null)return js;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Ur.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Ur.None?[r,a]:r,e[s]=o):n[s]=r}return n}function ji(t){return xa(()=>{let e=cD(t);return uD(e),e})}function xg(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function jr(t){return t[px]||null}function iD(t){return t[gx]||null}function sD(t){return t[mx]||null}function oD(t){let e=jr(t)||iD(t)||sD(t);return e!==null?e.standalone:!1}function aD(t,e){let n=t[yx]||null;if(!n&&e===!0)throw new Error(`Type ${Tt(t)} does not have '\u0275mod' property.`);return n}function cD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||js,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uT(t.inputs,e),outputs:uT(t.outputs),debugInfo:null}}function uD(t){t.features?.forEach(e=>e(t))}function lT(t,e){if(!t)return null;let n=e?sD:Gx;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Wx)}function Kx(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Mt(t){return{\u0275providers:t}}function Qx(...t){return{\u0275providers:lD(!0,t),\u0275fromNgModule:!0}}function lD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Ng(e,o=>{let a=o;kp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&dD(i,s),n}function dD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Pg(i,s=>{e(s,r)})}}function kp(t,e,n,r){if(t=Et(t),!t)return!1;let i=null,s=rT(t),o=!s&&jr(t);if(!s&&!o){let c=t.ngModule;if(s=rT(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)kp(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Ng(s.imports,h=>{kp(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&dD(l,e)}if(!a){let l=Ri(i)||(()=>new i);e({provide:i,useFactory:l,deps:zt},i),e({provide:XT,useValue:i,multi:!0},i),e({provide:Bs,useValue:()=>z(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;Pg(c,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Pg(t,e){for(let n of t)WT(n)&&(n=n.\u0275providers),Array.isArray(n)?Pg(n,e):e(n)}var Yx=Te({provide:String,useValue:Te});function hD(t){return t!==null&&typeof t=="object"&&Yx in t}function Jx(t){return!!(t&&t.useExisting)}function Zx(t){return!!(t&&t.useFactory)}function $s(t){return typeof t=="function"}function Xx(t){return!!t.useClass}var Hl=new $(""),ll={},eP={},vp;function Og(){return vp===void 0&&(vp=new _l),vp}var Dt=class{},Aa=class extends Dt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fp(e,o=>this.processProvider(o)),this.records.set(ZT,Ps(void 0,this)),i.has("environment")&&this.records.set(Dt,Ps(void 0,this));let s=this.records.get(Hl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(XT,zt,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Lr(this),r=Nt(void 0),i;try{return e()}finally{Lr(n),Nt(r)}}get(e,n=Ca,r=oe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(sT))return e[sT](this);r=$l(r);let i,s=Lr(this),o=Nt(void 0);try{if(!(r&oe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=sP(e)&&Bl(e);l&&this.injectableDefInScope(l)?c=Ps(Lp(e),ll):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&oe.Self?Og():this.parent;return n=r&oe.Optional&&n===Ca?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[yl]=a[yl]||[]).unshift(Tt(e)),s)throw a;return Sx(a,e,"R3InjectorError",this.source)}else throw a}finally{Nt(o),Lr(s)}}resolveInjectorInitializers(){let e=ge(null),n=Lr(this),r=Nt(void 0),i;try{let s=this.get(Bs,zt,oe.Self);for(let o of s)o()}finally{Lr(n),Nt(r),ge(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Tt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(e){e=Et(e);let n=$s(e)?e:Et(e&&e.provide),r=nP(e);if(!$s(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ps(void 0,ll,!0),i.factory=()=>Pp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ge(null);try{return n.value===ll&&(n.value=eP,n.value=n.factory()),typeof n.value=="object"&&n.value&&iP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ge(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Et(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Lp(t){let e=Bl(t),n=e!==null?e.factory:Ri(t);if(n!==null)return n;if(t instanceof $)throw new G(204,!1);if(t instanceof Function)return tP(t);throw new G(204,!1)}function tP(t){if(t.length>0)throw new G(204,!1);let n=hx(t);return n!==null?()=>n.factory(t):()=>new t}function nP(t){if(hD(t))return Ps(void 0,t.useValue);{let e=fD(t);return Ps(e,ll)}}function fD(t,e,n){let r;if($s(t)){let i=Et(t);return Ri(i)||Lp(i)}else if(hD(t))r=()=>Et(t.useValue);else if(Zx(t))r=()=>t.useFactory(...Pp(t.deps||[]));else if(Jx(t))r=()=>z(Et(t.useExisting));else{let i=Et(t&&(t.useClass||t.provide));if(rP(t))r=()=>new i(...Pp(t.deps));else return Ri(i)||Lp(i)}return r}function Ps(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function rP(t){return!!t.deps}function iP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function sP(t){return typeof t=="function"||typeof t=="object"&&t instanceof $}function Fp(t,e){for(let n of t)Array.isArray(n)?Fp(n,e):n&&WT(n)?Fp(n.\u0275providers,e):e(n)}function Wt(t,e){t instanceof Aa&&t.assertNotDestroyed();let n,r=Lr(t),i=Nt(void 0);try{return e()}finally{Lr(r),Nt(i)}}function pD(){return KT()!==void 0||Dx()!=null}function oP(t){if(!pD())throw new G(-203,!1)}function aP(t){return typeof t=="function"}var Qn=0,ne=1,Z=2,dt=3,an=4,un=5,Il=6,wl=7,cn=8,Hs=9,Tn=10,Ye=11,Ra=12,dT=13,Zs=14,Dn=15,Ni=16,Os=17,zn=18,ql=19,gD=20,Fr=21,_p=22,Gt=23,Ut=25,mD=1;var Mi=7,El=8,qs=9,Vt=10,Tl=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Tl||{});function Vr(t){return Array.isArray(t)&&typeof t[mD]=="object"}function Yn(t){return Array.isArray(t)&&t[mD]===!0}function yD(t){return(t.flags&4)!==0}function zl(t){return t.componentOffset>-1}function kg(t){return(t.flags&1)===1}function Br(t){return!!t.template}function Vp(t){return(t[Z]&512)!==0}var Up=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function vD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Oa(){return _D}function _D(t){return t.type.prototype.ngOnChanges&&(t.setInput=uP),cP}Oa.ngInherit=!0;function cP(){let t=wD(this),e=t?.current;if(e){let n=t.previous;if(n===js)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function uP(t,e,n,r,i){let s=this.declaredInputs[r],o=wD(t)||lP(t,{previous:js,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Up(l&&l.currentValue,n,c===js),vD(t,e,i,n)}var ID="__ngSimpleChanges__";function wD(t){return t[ID]||null}function lP(t,e){return t[ID]=e}var hT=null;var In=function(t,e,n){hT?.(t,e,n)},dP="svg",hP="math";function bn(t){for(;Array.isArray(t);)t=t[Qn];return t}function ED(t,e){return bn(e[t])}function Kt(t,e){return bn(e[t.index])}function TD(t,e){return t.data[e]}function Gl(t,e){return t[e]}function qr(t,e){let n=e[t];return Vr(n)?n:n[Qn]}function fP(t){return(t[Z]&4)===4}function Lg(t){return(t[Z]&128)===128}function pP(t){return Yn(t[dt])}function Dl(t,e){return e==null?null:t[e]}function DD(t){t[Os]=0}function bD(t){t[Z]&1024||(t[Z]|=1024,Lg(t)&&Kl(t))}function gP(t,e){for(;t>0;)e=e[Zs],t--;return e}function Wl(t){return!!(t[Z]&9216||t[Gt]?.dirty)}function jp(t){t[Tn].changeDetectionScheduler?.notify(8),t[Z]&64&&(t[Z]|=1024),Wl(t)&&Kl(t)}function Kl(t){t[Tn].changeDetectionScheduler?.notify(0);let e=xi(t);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!Lg(e)));)e=xi(e)}function CD(t,e){if((t[Z]&256)===256)throw new G(911,!1);t[Fr]===null&&(t[Fr]=[]),t[Fr].push(e)}function mP(t,e){if(t[Fr]===null)return;let n=t[Fr].indexOf(e);n!==-1&&t[Fr].splice(n,1)}function xi(t){let e=t[dt];return Yn(e)?e[dt]:e}var ie={lFrame:LD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var SD=!1;function yP(){return ie.lFrame.elementDepthCount}function vP(){ie.lFrame.elementDepthCount++}function _P(){ie.lFrame.elementDepthCount--}function AD(){return ie.bindingsEnabled}function IP(){return ie.skipHydrationRootTNode!==null}function wP(t){return ie.skipHydrationRootTNode===t}function EP(){ie.skipHydrationRootTNode=null}function fe(){return ie.lFrame.lView}function ht(){return ie.lFrame.tView}function j8(t){return ie.lFrame.contextLView=t,t[cn]}function B8(t){return ie.lFrame.contextLView=null,t}function bt(){let t=RD();for(;t!==null&&t.type===64;)t=t.parent;return t}function RD(){return ie.lFrame.currentTNode}function TP(){let t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ka(t,e){let n=ie.lFrame;n.currentTNode=t,n.isParent=e}function ND(){return ie.lFrame.isParent}function DP(){ie.lFrame.isParent=!1}function bP(){return ie.lFrame.contextLView}function MD(){return SD}function fT(t){SD=t}function Ql(){let t=ie.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function CP(){return ie.lFrame.bindingIndex}function SP(t){return ie.lFrame.bindingIndex=t}function Yl(){return ie.lFrame.bindingIndex++}function xD(t){let e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function AP(){return ie.lFrame.inI18n}function RP(t,e){let n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,Bp(e)}function NP(){return ie.lFrame.currentDirectiveIndex}function Bp(t){ie.lFrame.currentDirectiveIndex=t}function MP(t){let e=ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function PD(){return ie.lFrame.currentQueryIndex}function Fg(t){ie.lFrame.currentQueryIndex=t}function xP(t){let e=t[ne];return e.type===2?e.declTNode:e.type===1?t[un]:null}function OD(t,e,n){if(n&oe.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&oe.Host);)if(i=xP(s),i===null||(s=s[Zs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ie.lFrame=kD();return r.currentTNode=e,r.lView=t,!0}function Vg(t){let e=kD(),n=t[ne];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function kD(){let t=ie.lFrame,e=t===null?null:t.child;return e===null?LD(t):e}function LD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function FD(){let t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var VD=FD;function Ug(){let t=FD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function PP(t){return(ie.lFrame.contextLView=gP(t,ie.lFrame.contextLView))[cn]}function Bi(){return ie.lFrame.selectedIndex}function Pi(t){ie.lFrame.selectedIndex=t}function jg(){let t=ie.lFrame;return TD(t.tView,t.selectedIndex)}function OP(){return ie.lFrame.currentNamespace}var UD=!0;function Bg(){return UD}function $g(t){UD=t}function kP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=_D(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Hg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function dl(t,e,n){jD(t,e,3,n)}function hl(t,e,n,r){(t[Z]&3)===n&&jD(t,e,n,r)}function Ip(t,e){let n=t[Z];(n&3)===e&&(n&=16383,n+=1,t[Z]=n)}function jD(t,e,n,r){let i=r!==void 0?t[Os]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Os]+=65536),(a<s||s==-1)&&(LP(t,n,e,c),t[Os]=(t[Os]&4294901760)+c+2),c++}function pT(t,e){In(4,t,e);let n=ge(null);try{e.call(t)}finally{ge(n),In(5,t,e)}}function LP(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Z]>>14<t[Os]>>16&&(t[Z]&3)===e&&(t[Z]+=16384,pT(a,s)):pT(a,s)}var Vs=-1,Oi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function FP(t){return t instanceof Oi}function VP(t){return(t.flags&8)!==0}function UP(t){return(t.flags&16)!==0}var wp={},$p=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=$l(r);let i=this.injector.get(e,wp,r);return i!==wp||n===wp?i:this.parentInjector.get(e,n,r)}};function BD(t){return t!==Vs}function bl(t){return t&32767}function jP(t){return t>>16}function Cl(t,e){let n=jP(t),r=e;for(;n>0;)r=r[Zs],n--;return r}var Hp=!0;function Sl(t){let e=Hp;return Hp=t,e}var BP=256,$D=BP-1,HD=5,$P=0,wn={};function HP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ba)&&(r=n[ba]),r==null&&(r=n[ba]=$P++);let i=r&$D,s=1<<i;e.data[t+(i>>HD)]|=s}function Al(t,e){let n=qD(t,e);if(n!==-1)return n;let r=e[ne];r.firstCreatePass&&(t.injectorIndex=e.length,Ep(r.data,t),Ep(e,null),Ep(r.blueprint,null));let i=qg(t,e),s=t.injectorIndex;if(BD(i)){let o=bl(i),a=Cl(i,e),c=a[ne].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Ep(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function qg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=QD(i),r===null)return Vs;if(n++,i=i[Zs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Vs}function qp(t,e,n){HP(t,e,n)}function qP(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(tD(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function zD(t,e,n){if(n&oe.Optional||t!==void 0)return t;Ag(e,"NodeInjector")}function GD(t,e,n,r){if(n&oe.Optional&&r===void 0&&(r=null),!(n&(oe.Self|oe.Host))){let i=t[Hs],s=Nt(void 0);try{return i?i.get(e,r,n&oe.Optional):QT(e,r,n&oe.Optional)}finally{Nt(s)}}return zD(r,e,n)}function WD(t,e,n,r=oe.Default,i){if(t!==null){if(e[Z]&2048&&!(r&oe.Self)){let o=KP(t,e,n,r,wn);if(o!==wn)return o}let s=KD(t,e,n,r,wn);if(s!==wn)return s}return GD(e,n,r,i)}function KD(t,e,n,r,i){let s=GP(n);if(typeof s=="function"){if(!OD(e,t,r))return r&oe.Host?zD(i,n,r):GD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&oe.Optional))Ag(n);else return o}finally{VD()}}else if(typeof s=="number"){let o=null,a=qD(t,e),c=Vs,l=r&oe.Host?e[Dn][un]:null;for((a===-1||r&oe.SkipSelf)&&(c=a===-1?qg(t,e):e[a+8],c===Vs||!mT(r,!1)?a=-1:(o=e[ne],a=bl(c),e=Cl(c,e)));a!==-1;){let h=e[ne];if(gT(s,a,h.data)){let p=zP(a,e,n,o,r,l);if(p!==wn)return p}c=e[a+8],c!==Vs&&mT(r,e[ne].data[a+8]===l)&&gT(s,a,e)?(o=h,a=bl(c),e=Cl(c,e)):a=-1}}return i}function zP(t,e,n,r,i,s){let o=e[ne],a=o.data[t+8],c=r==null?zl(a)&&Hp:r!=o&&(a.type&3)!==0,l=i&oe.Host&&s===a,h=fl(a,o,n,c,l);return h!==null?ki(e,o,h,a):wn}function fl(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let D=o[y];if(y<c&&n===D||y>=c&&D.type===n)return y}if(i){let y=o[c];if(y&&Br(y)&&y.type===n)return c}return null}function ki(t,e,n,r){let i=t[n],s=e.data;if(FP(i)){let o=i;o.resolving&&_x(vx(s[n]));let a=Sl(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Nt(o.injectImpl):null,h=OD(t,r,oe.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&kP(n,s[n],e)}finally{l!==null&&Nt(l),Sl(a),o.resolving=!1,VD()}}return i}function GP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ba)?t[ba]:void 0;return typeof e=="number"?e>=0?e&$D:WP:e}function gT(t,e,n){let r=1<<t;return!!(n[e+(t>>HD)]&r)}function mT(t,e){return!(t&oe.Self)&&!(t&oe.Host&&e)}var Ai=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return WD(this._tNode,this._lView,e,$l(r),n)}};function WP(){return new Ai(bt(),fe())}function zg(t){return xa(()=>{let e=t.prototype.constructor,n=e[ml]||zp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[ml]||zp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function zp(t){return HT(t)?()=>{let e=zp(Et(t));return e&&e()}:Ri(t)}function KP(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Z]&2048&&!(o[Z]&512);){let a=KD(s,o,n,r|oe.Self,wn);if(a!==wn)return a;let c=s.parent;if(!c){let l=o[gD];if(l){let h=l.get(n,wn,r);if(h!==wn)return h}c=QD(o),o=o[Zs]}s=c}return i}function QD(t){let e=t[ne],n=e.type;return n===2?e.declTNode:n===1?t[un]:null}function Gg(t){return qP(bt(),t)}function yT(t,e=null,n=null,r){let i=YD(t,e,n,r);return i.resolveInjectorInitializers(),i}function YD(t,e=null,n=null,r,i=new Set){let s=[n||zt,Qx(t)];return r=r||(typeof t=="object"?void 0:Tt(t)),new Aa(s,e||Og(),r||null,i)}var Je=class t{static{this.THROW_IF_NOT_FOUND=Ca}static{this.NULL=new _l}static create(e,n){if(Array.isArray(e))return yT({name:""},n,e,"");{let r=e.name??"";return yT({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:t,providedIn:"any",factory:()=>z(ZT)})}static{this.__NG_ELEMENT_ID__=-1}};var QP=new $("");QP.__NG_ELEMENT_ID__=t=>{let e=bt();if(e===null)throw new G(204,!1);if(e.type&2)return e.value;if(t&oe.Optional)return null;throw new G(204,!1)};var YP="ngOriginalError";function Tp(t){return t[YP]}var JD=!0,Wg=(()=>{class t{static{this.__NG_ELEMENT_ID__=JP}static{this.__NG_ENV_ID__=n=>n}}return t})(),Gp=class extends Wg{constructor(e){super(),this._lView=e}onDestroy(e){return CD(this._lView,e),()=>mP(this._lView,e)}};function JP(){return new Gp(fe())}var zr=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})();var Wp=class extends ut{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,pD()&&(this.destroyRef=x(Wg,{optional:!0})??void 0,this.pendingTasks=x(zr,{optional:!0})??void 0)}emit(e){let n=ge(null);try{super.next(e)}finally{ge(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Fe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},lt=Wp;function Rl(...t){}function ZD(t){let e,n;function r(){t=Rl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function vT(t){return queueMicrotask(()=>t()),()=>{t=Rl}}var Kg="isAngularZone",Nl=Kg+"_ID",ZP=0,he=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lt(!1),this.onMicrotaskEmpty=new lt(!1),this.onStable=new lt(!1),this.onError=new lt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=JD}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,tO(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Kg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,XP,Rl,Rl);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},XP={};function Qg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function eO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){ZD(()=>{t.callbackScheduled=!1,Kp(t),t.isCheckStableRunning=!0,Qg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Kp(t)}function tO(t){let e=()=>{eO(t)},n=ZP++;t._inner=t._inner.fork({name:"angular",properties:{[Kg]:!0,[Nl]:n,[Nl+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(nO(c))return r.invokeTask(s,o,a,c);try{return _T(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),IT(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return _T(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!rO(c)&&e(),IT(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Kp(t),Qg(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Kp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function _T(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function IT(t){t._nesting--,Qg(t)}var Qp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lt,this.onMicrotaskEmpty=new lt,this.onStable=new lt,this.onError=new lt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function nO(t){return XD(t,"__ignore_ng_zone__")}function rO(t){return XD(t,"__scheduler_tick__")}function XD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Gn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Tp(e);for(;n&&Tp(n);)n=Tp(n);return n||null}},iO=new $("",{providedIn:"root",factory:()=>{let t=x(he),e=x(Gn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function sO(){return Xs(bt(),fe())}function Xs(t,e){return new Jn(Kt(t,e))}var Jn=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=sO}}return t})();function oO(t){return t instanceof Jn?t.nativeElement:t}function aO(){return this._results[Symbol.iterator]()}var Yp=class t{get changes(){return this._changes??=new lt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=aO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Nx(e);(this._changesDetected=!Rx(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function eb(t){return(t.flags&128)===128}var tb=new Map,cO=0;function uO(){return cO++}function lO(t){tb.set(t[ql],t)}function Jp(t){tb.delete(t[ql])}var wT="__ngContext__";function Li(t,e){Vr(e)?(t[wT]=e[ql],lO(e)):t[wT]=e}function nb(t){return ib(t[Ra])}function rb(t){return ib(t[an])}function ib(t){for(;t!==null&&!Yn(t);)t=t[an];return t}var Zp;function sb(t){Zp=t}function dO(){if(Zp!==void 0)return Zp;if(typeof document<"u")return document;throw new G(210,!1)}var Yg=new $("",{providedIn:"root",factory:()=>hO}),hO="ng",Jg=new $(""),Qt=new $("",{providedIn:"platform",factory:()=>"unknown"});var Zg=new $("",{providedIn:"root",factory:()=>dO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fO="h",pO="b";var gO=()=>null;function Xg(t,e,n=!1){return gO(t,e,n)}var ob=!1,mO=new $("",{providedIn:"root",factory:()=>ob});var ol;function yO(){if(ol===void 0&&(ol=null,Si.trustedTypes))try{ol=Si.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ol}function ET(t){return yO()?.createScriptURL(t)||t}var Ml=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jT})`}};function La(t){return t instanceof Ml?t.changingThisBreaksApplicationSecurity:t}function em(t,e){let n=vO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${jT})`)}return n===e}function vO(t){return t instanceof Ml&&t.getTypeName()||null}var _O=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ab(t){return t=String(t),t.match(_O)?t:"unsafe:"+t}var Jl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Jl||{});function IO(t){let e=ub();return e?e.sanitize(Jl.URL,t)||"":em(t,"URL")?La(t):ab(Us(t))}function wO(t){let e=ub();if(e)return ET(e.sanitize(Jl.RESOURCE_URL,t)||"");if(em(t,"ResourceURL"))return ET(La(t));throw new G(904,!1)}function EO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?wO:IO}function cb(t,e,n){return EO(e,n)(t)}function ub(){let t=fe();return t&&t[Tn].sanitizer}function $8(t){return t.ownerDocument}function lb(t){return t instanceof Function?t():t}function TO(t){return(t??x(Je)).get(Qt)==="browser"}var Wn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Wn||{}),DO;function tm(t,e){return DO(t,e)}function ks(t,e,n,r,i){if(r!=null){let s,o=!1;Yn(r)?s=r:Vr(r)&&(o=!0,r=r[Qn]);let a=bn(r);t===0&&n!==null?i==null?gb(e,n,a):xl(e,n,a,i||null,!0):t===1&&n!==null?xl(e,n,a,i||null,!0):t===2?UO(e,a,o):t===3&&e.destroyNode(a),s!=null&&BO(e,t,s,n,i)}}function bO(t,e){return t.createText(e)}function CO(t,e,n){t.setValue(e,n)}function db(t,e,n){return t.createElement(e,n)}function SO(t,e){hb(t,e),e[Qn]=null,e[un]=null}function AO(t,e,n,r,i,s){r[Qn]=i,r[un]=e,Zl(t,r,n,1,i,s)}function hb(t,e){e[Tn].changeDetectionScheduler?.notify(9),Zl(t,e,e[Ye],2,null,null)}function RO(t){let e=t[Ra];if(!e)return Dp(t[ne],t);for(;e;){let n=null;if(Vr(e))n=e[Ra];else{let r=e[Vt];r&&(n=r)}if(!n){for(;e&&!e[an]&&e!==t;)Vr(e)&&Dp(e[ne],e),e=e[dt];e===null&&(e=t),Vr(e)&&Dp(e[ne],e),n=e&&e[an]}e=n}}function NO(t,e,n,r){let i=Vt+r,s=n.length;r>0&&(n[i-1][an]=e),r<s-Vt?(e[an]=n[i],JT(n,Vt+r,e)):(n.push(e),e[an]=null),e[dt]=n;let o=e[Ni];o!==null&&n!==o&&fb(o,e);let a=e[zn];a!==null&&a.insertView(t),jp(e),e[Z]|=128}function fb(t,e){let n=t[qs],r=e[dt];if(Vr(r))t[Z]|=Tl.HasTransplantedViews;else{let i=r[dt][Dn];e[Dn]!==i&&(t[Z]|=Tl.HasTransplantedViews)}n===null?t[qs]=[e]:n.push(e)}function nm(t,e){let n=t[qs],r=n.indexOf(e);n.splice(r,1)}function Xp(t,e){if(t.length<=Vt)return;let n=Vt+e,r=t[n];if(r){let i=r[Ni];i!==null&&i!==t&&nm(i,r),e>0&&(t[n-1][an]=r[an]);let s=vl(t,Vt+e);SO(r[ne],r);let o=s[zn];o!==null&&o.detachView(s[ne]),r[dt]=null,r[an]=null,r[Z]&=-129}return r}function pb(t,e){if(!(e[Z]&256)){let n=e[Ye];n.destroyNode&&Zl(t,e,n,3,null,null),RO(e)}}function Dp(t,e){if(e[Z]&256)return;let n=ge(null);try{e[Z]&=-129,e[Z]|=256,e[Gt]&&Xf(e[Gt]),xO(t,e),MO(t,e),e[ne].type===1&&e[Ye].destroy();let r=e[Ni];if(r!==null&&Yn(e[dt])){r!==e[dt]&&nm(r,e);let i=e[zn];i!==null&&i.detachView(t)}Jp(e)}finally{ge(n)}}function MO(t,e){let n=t.cleanup,r=e[wl];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[wl]=null);let i=e[Fr];if(i!==null){e[Fr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function xO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Oi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];In(4,a,c);try{c.call(a)}finally{In(5,a,c)}}else{In(4,i,s);try{s.call(i)}finally{In(5,i,s)}}}}}function PO(t,e,n){return OO(t,e.parent,n)}function OO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Qn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===En.None||s===En.Emulated)return null}return Kt(r,n)}}function xl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function gb(t,e,n){t.appendChild(e,n)}function TT(t,e,n,r,i){r!==null?xl(t,e,n,r,i):gb(t,e,n)}function mb(t,e){return t.parentNode(e)}function kO(t,e){return t.nextSibling(e)}function LO(t,e,n){return VO(t,e,n)}function FO(t,e,n){return t.type&40?Kt(t,n):null}var VO=FO,DT;function rm(t,e,n,r){let i=PO(t,r,e),s=e[Ye],o=r.parent||e[un],a=LO(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)TT(s,i,n[c],a,!1);else TT(s,i,n,a,!1);DT!==void 0&&DT(s,r,e,n,i)}function Da(t,e){if(e!==null){let n=e.type;if(n&3)return Kt(e,t);if(n&4)return eg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Da(t,r);{let i=t[e.index];return Yn(i)?eg(-1,i):bn(i)}}else{if(n&128)return Da(t,e.next);if(n&32)return tm(e,t)()||bn(t[e.index]);{let r=yb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=xi(t[Dn]);return Da(i,r)}else return Da(t,e.next)}}}return null}function yb(t,e){if(e!==null){let r=t[Dn][un],i=e.projection;return r.projection[i]}return null}function eg(t,e){let n=Vt+t+1;if(n<e.length){let r=e[n],i=r[ne].firstChild;if(i!==null)return Da(r,i)}return e[Mi]}function UO(t,e,n){t.removeChild(null,e,n)}function im(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Li(bn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)im(t,e,n.child,r,i,s,!1),ks(e,t,i,a,s);else if(c&32){let l=tm(n,r),h;for(;h=l();)ks(e,t,i,h,s);ks(e,t,i,a,s)}else c&16?jO(t,e,r,n,i,s):ks(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Zl(t,e,n,r,i,s){im(n,r,t.firstChild,e,i,s,!1)}function jO(t,e,n,r,i,s){let o=n[Dn],c=o[un].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];ks(e,t,i,h,s)}else{let l=c,h=o[dt];eb(r)&&(l.flags|=128),im(t,e,l,h,i,s,!0)}}function BO(t,e,n,r,i){let s=n[Mi],o=bn(n);s!==o&&ks(e,t,r,s,i);for(let a=Vt;a<n.length;a++){let c=n[a];Zl(c[ne],c,t,e,r,s)}}function $O(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Wn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Wn.Important),t.setStyle(n,r,i,s))}}function HO(t,e,n){t.setAttribute(e,"style",n)}function vb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function _b(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Op(t,e,r),i!==null&&vb(t,e,i),s!==null&&HO(t,e,s)}var Zn={};function H8(t=1){Ib(ht(),fe(),Bi()+t,!1)}function Ib(t,e,n,r){if(!r)if((e[Z]&3)===3){let s=t.preOrderCheckHooks;s!==null&&dl(e,s,n)}else{let s=t.preOrderHooks;s!==null&&hl(e,s,0,n)}Pi(n)}function Ve(t,e=oe.Default){let n=fe();if(n===null)return z(t,e);let r=bt();return WD(r,n,Et(t),e)}function wb(){let t="invalid";throw new Error(t)}function Eb(t,e,n,r,i,s){let o=ge(null);try{let a=null;i&Ur.SignalBased&&(a=e[r][Bn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ur.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):vD(e,a,r,s)}finally{ge(o)}}function qO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Pi(~i);else{let s=i,o=n[++r],a=n[++r];RP(o,s);let c=e[s];a(2,c)}}}finally{Pi(-1)}}function Xl(t,e,n,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[Qn]=i,p[Z]=r|4|128|8|64,(l!==null||t&&t[Z]&2048)&&(p[Z]|=2048),DD(p),p[dt]=p[Zs]=t,p[cn]=n,p[Tn]=o||t&&t[Tn],p[Ye]=a||t&&t[Ye],p[Hs]=c||t&&t[Hs]||null,p[un]=s,p[ql]=uO(),p[Il]=h,p[gD]=l,p[Dn]=e.type==2?t[Dn]:p,p}function ed(t,e,n,r,i){let s=t.data[e];if(s===null)s=zO(t,e,n,r,i),AP()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=TP();s.injectorIndex=o===null?-1:o.injectorIndex}return ka(s,!0),s}function zO(t,e,n,r,i){let s=RD(),o=ND(),a=o?s:s&&s.parent,c=t.data[e]=JO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Tb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Db(t,e,n,r,i){let s=Bi(),o=r&2;try{Pi(-1),o&&e.length>Ut&&Ib(t,e,Ut,!1),In(o?2:0,i),n(r,i)}finally{Pi(s),In(o?3:1,i)}}function bb(t,e,n){if(yD(e)){let r=ge(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{ge(r)}}}function Cb(t,e,n){AD()&&(rk(t,e,n,Kt(n,e)),(n.flags&64)===64&&xb(t,e,n))}function Sb(t,e,n=Kt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Ab(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=sm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function sm(t,e,n,r,i,s,o,a,c,l,h){let p=Ut+r,m=p+i,y=GO(p,m),D=typeof l=="function"?l():l;return y[ne]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:h}}function GO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Zn);return n}function WO(t,e,n,r){let s=r.get(mO,ob)||n===En.ShadowDom,o=t.selectRootElement(e,s);return KO(o),o}function KO(t){QO(t)}var QO=()=>null;function YO(t,e,n,r){let i=kb(e);i.push(n),t.firstCreatePass&&Lb(t).push(r,i.length-1)}function JO(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return IP()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function bT(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Ur.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?CT(r,n,l,a,c):CT(r,n,l,a)}return r}function CT(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function ZO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,y=m?m.inputs:null,D=m?m.outputs:null;c=bT(0,p.inputs,h,c,y),l=bT(1,p.outputs,h,l,D);let R=c!==null&&o!==null&&!Mg(e)?pk(c,h,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function XO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Rb(t,e,n,r,i,s,o,a){let c=Kt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(om(t,n,h,r,i),zl(e)&&ek(n,e.index)):e.type&3?(r=XO(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function ek(t,e){let n=qr(e,t);n[Z]&16||(n[Z]|=64)}function Nb(t,e,n,r){if(AD()){let i=r===null?null:{"":-1},s=sk(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Mb(t,e,n,o,i,a),i&&ok(n,r,i)}n.mergedAttrs=Sa(n.mergedAttrs,n.attrs)}function Mb(t,e,n,r,i,s){for(let l=0;l<r.length;l++)qp(Al(n,e),t,r[l].type);ck(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=Tb(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Sa(n.mergedAttrs,h.hostAttrs),uk(t,n,e,c,h),ak(c,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}ZO(t,n,s)}function tk(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;nk(o)!=a&&o.push(a),o.push(n,r,s)}}function nk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function rk(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;zl(n)&&lk(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Al(n,e),Li(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=ki(e,t,a,n);if(Li(l,e),o!==null&&fk(e,a-i,l,c,n,o),Br(c)){let h=qr(n.index,e);h[cn]=ki(e,t,a,n)}}}function xb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=NP();try{Pi(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Bp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ik(c,l)}}finally{Pi(-1),Bp(o)}}function ik(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function sk(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(jx(e,o.selectors,!1))if(r||(r=[]),Br(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;tg(t,e,c)}else r.unshift(o),tg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function tg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ok(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new G(-301,!1);r.push(e[i],s)}}}function ak(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Br(e)&&(n[""]=t)}}function ck(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function uk(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Ri(i.type,!0)),o=new Oi(s,Br(i),Ve);t.blueprint[r]=o,n[r]=o,tk(t,e,r,Tb(t,n,i.hostVars,Zn),i)}function lk(t,e,n){let r=Kt(e,t),i=Ab(n),s=t[Tn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=td(t,Xl(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function dk(t,e,n,r,i,s){let o=Kt(t,e);hk(e[Ye],o,s,t.value,n,r,i)}function hk(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Us(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function fk(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],h=o[a++],p=o[a++];Eb(r,n,c,l,h,p)}}function pk(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Pb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Ob(t,e){let n=t.contentQueries;if(n!==null){let r=ge(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Fg(s),a.contentQueries(2,e[o],o)}}}finally{ge(r)}}}function td(t,e){return t[Ra]?t[dT][an]=e:t[Ra]=e,t[dT]=e,e}function ng(t,e,n){Fg(0);let r=ge(null);try{e(t,n)}finally{ge(r)}}function kb(t){return t[wl]??=[]}function Lb(t){return t.cleanup??=[]}function Fb(t,e){let n=t[Hs],r=n?n.get(Gn,null):null;r&&r.handleError(e)}function om(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],h=t.data[o];Eb(h,l,r,a,c,i)}}function Vb(t,e,n){let r=ED(e,t);CO(t[Ye],r,n)}function gk(t,e){let n=qr(e,t),r=n[ne];mk(r,n);let i=n[Qn];i!==null&&n[Il]===null&&(n[Il]=Xg(i,n[Hs])),am(r,n,n[cn])}function mk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function am(t,e,n){Vg(e);try{let r=t.viewQuery;r!==null&&ng(1,r,n);let i=t.template;i!==null&&Db(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[zn]?.finishViewCreation(t),t.staticContentQueries&&Ob(t,e),t.staticViewQueries&&ng(2,t.viewQuery,n);let s=t.components;s!==null&&yk(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Z]&=-5,Ug()}}function yk(t,e){for(let n=0;n<e.length;n++)gk(t,e[n])}function vk(t,e,n,r){let i=ge(null);try{let s=e.tView,a=t[Z]&4096?4096:16,c=Xl(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Ni]=l;let h=t[zn];return h!==null&&(c[zn]=h.createEmbeddedView(s)),am(s,c,n),c}finally{ge(i)}}function ST(t,e){return!e||e.firstChild===null||eb(t)}function _k(t,e,n,r=!0){let i=e[ne];if(NO(i,e,t,n),r){let o=eg(n,t),a=e[Ye],c=mb(a,t[Mi]);c!==null&&AO(i,t[un],a,e,c,o)}let s=e[Il];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Pl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(bn(s)),Yn(s)&&Ik(s,r);let o=n.type;if(o&8)Pl(t,e,n.child,r);else if(o&32){let a=tm(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=yb(e,n);if(Array.isArray(a))r.push(...a);else{let c=xi(e[Dn]);Pl(c[ne],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ik(t,e){for(let n=Vt;n<t.length;n++){let r=t[n],i=r[ne].firstChild;i!==null&&Pl(r[ne],r,i,e)}t[Mi]!==t[Qn]&&e.push(t[Mi])}var Ub=[];function wk(t){return t[Gt]??Ek(t)}function Ek(t){let e=Ub.pop()??Object.create(Dk);return e.lView=t,e}function Tk(t){t.lView[Gt]!==t&&(t.lView=null,Ub.push(t))}var Dk=be(U({},Ia),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Kl(t.lView)},consumerOnSignalRead(){this.lView[Gt]=this}});function bk(t){let e=t[Gt]??Object.create(Ck);return e.lView=t,e}var Ck=be(U({},Ia),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=xi(t.lView);for(;e&&!jb(e[ne]);)e=xi(e);e&&bD(e)},consumerOnSignalRead(){this.lView[Gt]=this}});function jb(t){return t.type!==2}var Sk=100;function Bb(t,e=!0,n=0){let r=t[Tn],i=r.rendererFactory,s=!1;s||i.begin?.();try{Ak(t,n)}catch(o){throw e&&Fb(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Ak(t,e){let n=MD();try{fT(!0),rg(t,e);let r=0;for(;Wl(t);){if(r===Sk)throw new G(103,!1);r++,rg(t,1)}}finally{fT(n)}}function Rk(t,e,n,r){let i=e[Z];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Tn].inlineEffectRunner?.flush(),Vg(e);let a=!0,c=null,l=null;s||(jb(t)?(l=wk(e),c=Ru(l)):yE()===null?(a=!1,l=bk(e),c=Ru(l)):e[Gt]&&(Xf(e[Gt]),e[Gt]=null));try{DD(e),SP(t.bindingStartIndex),n!==null&&Db(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let y=t.preOrderCheckHooks;y!==null&&dl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&hl(e,y,0,null),Ip(e,0)}if(o||Nk(e),$b(e,0),t.contentQueries!==null&&Ob(t,e),!s)if(h){let y=t.contentCheckHooks;y!==null&&dl(e,y)}else{let y=t.contentHooks;y!==null&&hl(e,y,1),Ip(e,1)}qO(t,e);let p=t.components;p!==null&&qb(e,p,0);let m=t.viewQuery;if(m!==null&&ng(2,m,r),!s)if(h){let y=t.viewCheckHooks;y!==null&&dl(e,y)}else{let y=t.viewHooks;y!==null&&hl(e,y,2),Ip(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[_p]){for(let y of e[_p])y();e[_p]=null}s||(e[Z]&=-73)}catch(h){throw s||Kl(e),h}finally{l!==null&&(Jf(l,c),a&&Tk(l)),Ug()}}function $b(t,e){for(let n=nb(t);n!==null;n=rb(n))for(let r=Vt;r<n.length;r++){let i=n[r];Hb(i,e)}}function Nk(t){for(let e=nb(t);e!==null;e=rb(e)){if(!(e[Z]&Tl.HasTransplantedViews))continue;let n=e[qs];for(let r=0;r<n.length;r++){let i=n[r];bD(i)}}}function Mk(t,e,n){let r=qr(e,t);Hb(r,n)}function Hb(t,e){Lg(t)&&rg(t,e)}function rg(t,e){let r=t[ne],i=t[Z],s=t[Gt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Zf(s)),o||=!1,s&&(s.dirty=!1),t[Z]&=-9217,o)Rk(r,t,r.template,t[cn]);else if(i&8192){$b(t,1);let a=r.components;a!==null&&qb(t,a,1)}}function qb(t,e,n){for(let r=0;r<e.length;r++)Mk(t,e[r],n)}function cm(t,e){let n=MD()?64:1088;for(t[Tn].changeDetectionScheduler?.notify(e);t;){t[Z]|=n;let r=xi(t);if(Vp(t)&&!r)return t;t=r}return null}var Fi=class{get rootNodes(){let e=this._lView,n=e[ne];return Pl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[cn]}set context(e){this._lView[cn]=e}get destroyed(){return(this._lView[Z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[dt];if(Yn(e)){let n=e[El],r=n?n.indexOf(this):-1;r>-1&&(Xp(e,r),vl(n,r))}this._attachedToViewContainer=!1}pb(this._lView[ne],this._lView)}onDestroy(e){CD(this._lView,e)}markForCheck(){cm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){jp(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,Bb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Vp(this._lView),n=this._lView[Ni];n!==null&&!e&&nm(n,this._lView),hb(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let n=Vp(this._lView),r=this._lView[Ni];r!==null&&!n&&fb(r,this._lView),jp(this._lView)}},Vi=(()=>{class t{static{this.__NG_ELEMENT_ID__=Ok}}return t})(),xk=Vi,Pk=class extends xk{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=vk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Fi(i)}};function Ok(){return um(bt(),fe())}function um(t,e){return t.type&4?new Pk(e,t,Xs(t,e)):null}var z8=new RegExp(`^(\\d+)*(${pO}|${fO})*(.*)`);var kk=()=>null;function AT(t,e){return kk(t,e)}var zs=class{},nd=new $("",{providedIn:"root",factory:()=>!1});var zb=new $(""),Gb=new $(""),ig=class{},Ol=class{};function Lk(t){let e=Error(`No component factory found for ${Tt(t)}.`);return e[Fk]=t,e}var Fk="ngComponent";var sg=class{resolveComponentFactory(e){throw Lk(e)}},Gs=class{static{this.NULL=new sg}},Ws=class{},Fa=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Vk()}}return t})();function Vk(){let t=fe(),e=bt(),n=qr(e.index,t);return(Vr(n)?n:t)[Ye]}var Uk=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>null})}}return t})();function og(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=tT(i,a);else if(s==2){let c=a,l=e[++o];r=tT(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var kl=class extends Gs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=jr(e);return new Ks(n,this.ngModule)}};function RT(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Ur.None;e?n.push({propName:o,templateName:r,isSignal:(a&Ur.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function jk(t){let e=t.toLowerCase();return e==="svg"?dP:e==="math"?hP:null}var Ks=class extends Ol{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=RT(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return RT(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=qx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=ge(null);try{i=i||this.ngModule;let o=i instanceof Dt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new $p(e,o):e,c=a.get(Ws,null);if(c===null)throw new G(407,!1);let l=a.get(Uk,null),h=a.get(zs,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?WO(m,r,this.componentDef.encapsulation,a):db(m,y,jk(y)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let S=null;D!==null&&(S=Xg(D,a,!0));let P=sm(0,null,null,1,0,null,null,null,null,null,null),V=Xl(null,P,null,R,null,null,p,m,a,null,S);Vg(V);let k,B,ae=null;try{let q=this.componentDef,E,v=null;q.findHostDirectiveDefs?(E=[],v=new Map,q.findHostDirectiveDefs(q,E,v),E.push(q)):E=[q];let I=Bk(V,D);ae=$k(I,D,q,E,V,p,m),B=TD(P,Ut),D&&zk(m,q,D,r),n!==void 0&&Gk(B,this.ngContentSelectors,n),k=qk(ae,q,E,v,V,[Wk]),am(P,V,null)}catch(q){throw ae!==null&&Jp(ae),Jp(V),q}finally{Ug()}return new ag(this.componentType,k,Xs(B,V),V,B)}finally{ge(s)}}},ag=class extends ig{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Fi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;om(s[ne],s,i,e,n),this.previousInputValues.set(e,n);let o=qr(this._tNode.index,s);cm(o,1)}}get injector(){return new Ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Bk(t,e){let n=t[ne],r=Ut;return t[r]=e,ed(n,r,2,"#host",null)}function $k(t,e,n,r,i,s,o){let a=i[ne];Hk(r,t,e,o);let c=null;e!==null&&(c=Xg(e,i[Hs]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Xl(i,Ab(n),null,h,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&tg(a,t,r.length-1),td(i,p),i[t.index]=p}function Hk(t,e,n,r){for(let i of t)e.mergedAttrs=Sa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(og(e,e.mergedAttrs,!0),n!==null&&_b(r,n,e))}function qk(t,e,n,r,i,s){let o=bt(),a=i[ne],c=Kt(o,i);Mb(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=ki(i,a,p,o);Li(m,i)}xb(a,i,o),c&&Li(c,i);let l=ki(i,a,o.directiveStart+o.componentOffset,o);if(t[cn]=i[cn]=l,s!==null)for(let h of s)h(l,e);return bb(a,o,i),l}function zk(t,e,n,r){if(r)Op(t,n,["ng-version","18.2.9"]);else{let{attrs:i,classes:s}=zx(e.selectors[0]);i&&Op(t,n,i),s&&s.length>0&&vb(t,n,s.join(" "))}}function Gk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Wk(){let t=bt();Hg(fe()[ne],t)}var Gr=(()=>{class t{static{this.__NG_ELEMENT_ID__=Kk}}return t})();function Kk(){let t=bt();return Kb(t,fe())}var Qk=Gr,Wb=class extends Qk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Xs(this._hostTNode,this._hostLView)}get injector(){return new Ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=qg(this._hostTNode,this._hostLView);if(BD(e)){let n=Cl(e,this._hostLView),r=bl(e),i=n[ne].data[r+8];return new Ai(i,n)}else return new Ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=NT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=AT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,ST(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!aP(e),a;if(o)a=n;else{let D=n||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}let c=o?e:new Ks(jr(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(Dt,null);R&&(s=R)}let h=jr(c.componentType??{}),p=AT(this._lContainer,h?.id??null),m=p?.firstChild??null,y=c.create(l,i,m,s);return this.insertImpl(y.hostView,a,ST(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(pP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[dt],l=new Wb(c,c[un],c[dt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return _k(o,i,s,r),e.attachToViewContainerRef(),JT(bp(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=NT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Xp(this._lContainer,n);r&&(vl(bp(this._lContainer),n),pb(r[ne],r))}detach(e){let n=this._adjustIndex(e,-1),r=Xp(this._lContainer,n);return r&&vl(bp(this._lContainer),n)!=null?new Fi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function NT(t){return t[El]}function bp(t){return t[El]||(t[El]=[])}function Kb(t,e){let n,r=e[t.index];return Yn(r)?n=r:(n=Pb(r,e,null,t),e[t.index]=n,td(e,n)),Jk(n,e,t,r),new Wb(n,t,e)}function Yk(t,e){let n=t[Ye],r=n.createComment(""),i=Kt(e,t),s=mb(n,i);return xl(n,s,r,kO(n,i),!1),r}var Jk=e1,Zk=()=>!1;function Xk(t,e,n){return Zk(t,e,n)}function e1(t,e,n,r){if(t[Mi])return;let i;n.type&8?i=bn(r):i=Yk(e,n),t[Mi]=i}var cg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},ug=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)lm(e,n).matches!==null&&this.queries[n].setDirty()}},lg=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=c1(e):this.predicate=e}},dg=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},hg=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,t1(n,s)),this.matchTNodeWithReadOption(e,n,fl(n,e,s,!1,!1))}else r===Vi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,fl(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Jn||i===Gr||i===Vi&&n.type&4)this.addMatch(n.index,-2);else{let s=fl(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function t1(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function n1(t,e){return t.type&11?Xs(t,e):t.type&4?um(t,e):null}function r1(t,e,n,r){return n===-1?n1(e,t):n===-2?i1(t,e,r):ki(t,t[ne],n,e)}function i1(t,e,n){if(n===Jn)return Xs(e,t);if(n===Vi)return um(e,t);if(n===Gr)return Kb(e,t)}function Qb(t,e,n,r){let i=e[zn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let h=s[l];a.push(r1(e,h,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function fg(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=Qb(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],h=e[-c];for(let p=Vt;p<h.length;p++){let m=h[p];m[Ni]===m[dt]&&fg(m[ne],m,l,r)}if(h[qs]!==null){let p=h[qs];for(let m=0;m<p.length;m++){let y=p[m];fg(y[ne],y,l,r)}}}}}return r}function s1(t,e){return t[zn].queries[e].queryList}function o1(t,e,n){let r=new Yp((n&4)===4);return YO(t,e,r,r.destroy),(e[zn]??=new ug).queries.push(new cg(r))-1}function a1(t,e,n){let r=ht();return r.firstCreatePass&&(u1(r,new lg(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),o1(r,fe(),e)}function c1(t){return t.split(",").map(e=>e.trim())}function u1(t,e,n){t.queries===null&&(t.queries=new dg),t.queries.track(new hg(e,n))}function lm(t,e){return t.queries.getByIndex(e)}function l1(t,e){let n=t[ne],r=lm(n,e);return r.crossesNgTemplate?fg(n,t,e,[]):Qb(n,t,r,e)}var MT=new Set;function $i(t){MT.has(t)||(MT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function d1(t){return typeof t=="function"&&t[Bn]!==void 0}function W8(t,e){$i("NgSignals");let n=AE(t),r=n[Bn];return e?.equal&&(r.equal=e.equal),n.set=i=>ep(r,i),n.update=i=>RE(r,i),n.asReadonly=h1.bind(n),n}function h1(){let t=this[Bn];if(t.readonlyFn===void 0){let e=()=>this();e[Bn]=t,t.readonlyFn=e}return t.readonlyFn}function Yb(t){return d1(t)&&typeof t.set=="function"}function f1(t){return Object.getPrototypeOf(t.prototype).constructor}function p1(t){let e=f1(t.type),n=!0,r=[t];for(;e;){let i;if(Br(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=al(t.inputs),o.inputTransforms=al(t.inputTransforms),o.declaredInputs=al(t.declaredInputs),o.outputs=al(t.outputs);let a=i.hostBindings;a&&_1(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&y1(t,c),l&&v1(t,l),g1(t,i),lx(t.outputs,i.outputs),Br(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===p1&&(n=!1)}}e=Object.getPrototypeOf(e)}m1(r)}function g1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function m1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Sa(i.hostAttrs,n=Sa(n,i.hostAttrs))}}function al(t){return t===js?{}:t===zt?[]:t}function y1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function v1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function _1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function dm(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var $r=class{},Na=class{};var pg=class extends $r{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kl(this);let s=aD(e);this._bootstrapComponents=lb(s.bootstrap),this._r3Injector=YD(e,n,[{provide:$r,useValue:this},{provide:Gs,useValue:this.componentFactoryResolver},...r],Tt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gg=class extends Na{constructor(e){super(),this.moduleType=e}create(e){return new pg(this.moduleType,e,[])}};var Ll=class extends $r{constructor(e){super(),this.componentFactoryResolver=new kl(this),this.instance=null;let n=new Aa([...e.providers,{provide:$r,useValue:this},{provide:Gs,useValue:this.componentFactoryResolver}],e.parent||Og(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function rd(t,e,n=null){return new Ll({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Jb(t){return w1(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function I1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function w1(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function hm(t,e,n){return t[e]=n}function Kn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function fm(t,e,n,r){let i=Kn(t,e,n);return Kn(t,e+1,r)||i}function E1(t,e,n,r,i){let s=fm(t,e,n,r);return Kn(t,e+2,i)||s}function T1(t){return(t.flags&32)===32}function D1(t,e,n,r,i,s,o,a,c){let l=e.consts,h=ed(e,t,4,o||null,a||null);Nb(e,n,h,Dl(l,c)),Hg(e,h);let p=h.tView=sm(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function b1(t,e,n,r,i,s,o,a,c,l){let h=n+Ut,p=e.firstCreatePass?D1(h,e,t,r,i,s,o,a,c):e.data[h];ka(p,!1);let m=S1(e,t,p,n);Bg()&&rm(e,t,m,p),Li(m,t);let y=Pb(m,t,m,p);return t[h]=y,td(t,y),Xk(y,p,t),kg(p)&&Cb(e,t,p),c!=null&&Sb(t,p,l),p}function C1(t,e,n,r,i,s,o,a){let c=fe(),l=ht(),h=Dl(l.consts,s);return b1(c,l,t,e,n,r,i,h,o,a),C1}var S1=A1;function A1(t,e,n,r){return $g(!0),e[Ye].createComment("")}var Ls=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ls||{}),Zb=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})(),mg=class t{constructor(){this.ngZone=x(he),this.scheduler=x(zs),this.errorHandler=x(Gn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ls.EarlyRead,Ls.Write,Ls.MixedReadWrite,Ls.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}},yg=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function pm(t,e){!e?.injector&&oP(pm);let n=e?.injector??x(Je);return TO(n)?($i("NgAfterNextRender"),N1(t,n,e,!0)):M1}function R1(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function N1(t,e,n,r){let i=e.get(Zb);i.impl??=e.get(mg);let s=n?.phase??Ls.MixedReadWrite,o=n?.manualCleanup!==!0?e.get(Wg):null,a=new yg(i.impl,R1(t,s),r,o);return i.impl.register(a),a}var M1={destroy(){}};function gm(t,e,n,r){let i=fe(),s=Yl();if(Kn(i,s,e)){let o=ht(),a=jg();dk(a,i,t,e,n,r)}return gm}function x1(t,e,n,r){return Kn(t,Yl(),n)?e+Us(n)+r:Zn}function P1(t,e,n,r,i,s){let o=CP(),a=fm(t,o,n,i);return xD(2),a?e+Us(n)+r+Us(i)+s:Zn}function cl(t,e){return t<<17|e<<2}function Ui(t){return t>>17&32767}function O1(t){return(t&2)==2}function k1(t,e){return t&131071|e<<17}function vg(t){return t|2}function Qs(t){return(t&131068)>>2}function Cp(t,e){return t&-131069|e<<2}function L1(t){return(t&1)===1}function _g(t){return t|1}function F1(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ui(o),c=Qs(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Pa(p,h)>0)&&(l=!0)}else h=n;if(i)if(c!==0){let m=Ui(t[a+1]);t[r+1]=cl(m,a),m!==0&&(t[m+1]=Cp(t[m+1],r)),t[a+1]=k1(t[a+1],r)}else t[r+1]=cl(a,0),a!==0&&(t[a+1]=Cp(t[a+1],r)),a=r;else t[r+1]=cl(c,0),a===0?a=r:t[c+1]=Cp(t[c+1],r),c=r;l&&(t[r+1]=vg(t[r+1])),xT(t,h,r,!0),xT(t,h,r,!1),V1(e,h,t,r,s),o=cl(a,c),s?e.classBindings=o:e.styleBindings=o}function V1(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Pa(s,e)>=0&&(n[r+1]=_g(n[r+1]))}function xT(t,e,n,r){let i=t[n+1],s=e===null,o=r?Ui(i):Qs(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];U1(c,e)&&(a=!0,t[o+1]=r?_g(l):vg(l)),o=r?Ui(l):Qs(l)}a&&(t[n+1]=r?vg(i):_g(i))}function U1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Pa(t,e)>=0:!1}function j1(t,e,n){let r=fe(),i=Yl();if(Kn(r,i,e)){let s=ht(),o=jg();Rb(s,o,r,t,e,r[Ye],n,!1)}return j1}function PT(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";om(t,n,s[o],o,r)}function B1(t,e){return $1(t,e,null,!0),B1}function $1(t,e,n,r){let i=fe(),s=ht(),o=xD(2);if(s.firstUpdatePass&&q1(s,t,o,r),e!==Zn&&Kn(i,o,e)){let a=s.data[Bi()];Q1(s,a,i,i[Ye],t,i[o+1]=Y1(e,n),r,o)}}function H1(t,e){return e>=t.expandoStartIndex}function q1(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Bi()],o=H1(t,n);J1(s,r)&&e===null&&!o&&(e=!1),e=z1(i,s,e,r),F1(i,s,e,n,o,r)}}function z1(t,e,n,r){let i=MP(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Sp(null,t,e,n,r),n=Ma(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Sp(i,t,e,n,r),s===null){let c=G1(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Sp(null,t,e,c[1],r),c=Ma(c,e.attrs,r),W1(t,e,r,c))}else s=K1(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function G1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Qs(r)!==0)return t[Ui(r)]}function W1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ui(i)]=r}function K1(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Ma(r,o,n)}return Ma(r,e.attrs,n)}function Sp(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ma(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ma(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),xx(t,o,n?!0:e[++s]))}return t===void 0?null:t}function Q1(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],h=L1(l)?OT(c,e,n,i,Qs(l),o):void 0;if(!Fl(h)){Fl(s)||O1(l)&&(s=OT(c,null,n,i,a,o));let p=ED(Bi(),n);$O(r,o,p,i,s)}}function OT(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=n[i+1];m===Zn&&(m=p?zt:void 0);let y=p?yp(m,r):h===r?m:void 0;if(l&&!Fl(y)&&(y=yp(c,r)),Fl(y)&&(a=y,o))return a;let D=t[i+1];i=o?Ui(D):Qs(D)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=yp(c,r))}return a}function Fl(t){return t!==void 0}function Y1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Tt(La(t)))),t}function J1(t,e){return(t.flags&(e?8:16))!==0}function Z1(t,e,n,r,i,s){let o=e.consts,a=Dl(o,i),c=ed(e,t,2,r,a);return Nb(e,n,c,Dl(o,s)),c.attrs!==null&&og(c,c.attrs,!1),c.mergedAttrs!==null&&og(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Xb(t,e,n,r){let i=fe(),s=ht(),o=Ut+t,a=i[Ye],c=s.firstCreatePass?Z1(o,s,i,e,n,r):s.data[o],l=X1(s,i,c,a,e,t);i[o]=l;let h=kg(c);return ka(c,!0),_b(a,l,c),!T1(c)&&Bg()&&rm(s,i,l,c),yP()===0&&Li(l,i),vP(),h&&(Cb(s,i,c),bb(s,c,i)),r!==null&&Sb(i,c),Xb}function eC(){let t=bt();ND()?DP():(t=t.parent,ka(t,!1));let e=t;wP(e)&&EP(),_P();let n=ht();return n.firstCreatePass&&(Hg(n,t),yD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&VP(e)&&PT(n,e,fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&UP(e)&&PT(n,e,fe(),e.stylesWithoutHost,!1),eC}function mm(t,e,n,r){return Xb(t,e,n,r),eC(),mm}var X1=(t,e,n,r,i,s)=>($g(!0),db(r,i,OP()));function K8(){return fe()}var Ci=void 0;function eL(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var tL=["en",[["a","p"],["AM","PM"],Ci],[["AM","PM"],Ci,Ci],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ci,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ci,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ci,"{1} 'at' {0}",Ci],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",eL],Ap={};function Yt(t){let e=nL(t),n=kT(e);if(n)return n;let r=e.split("-")[0];if(n=kT(r),n)return n;if(r==="en")return tL;throw new G(701,!1)}function kT(t){return t in Ap||(Ap[t]=Si.ng&&Si.ng.common&&Si.ng.common.locales&&Si.ng.common.locales[t]),Ap[t]}var Be=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Be||{});function nL(t){return t.toLowerCase().replace(/_/g,"-")}var Vl="en-US";var rL=Vl;function iL(t){typeof t=="string"&&(rL=t.toLowerCase().replace(/_/g,"-"))}var sL=(t,e,n)=>{};function ym(t,e,n,r){let i=fe(),s=ht(),o=bt();return tC(s,i,i[Ye],o,t,e,r),ym}function oL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[wl],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function tC(t,e,n,r,i,s,o){let a=kg(r),l=t.firstCreatePass&&Lb(t),h=e[cn],p=kb(e),m=!0;if(r.type&3||o){let R=Kt(r,e),S=o?o(R):R,P=p.length,V=o?B=>o(bn(B[r.index])):r.index,k=null;if(!o&&a&&(k=oL(t,e,i,r.index)),k!==null){let B=k.__ngLastListenerFn__||k;B.__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,m=!1}else{s=FT(r,e,h,s),sL(R,i,s);let B=n.listen(S,i,s);p.push(s,B),l&&l.push(i,V,P,P+1)}}else s=FT(r,e,h,s);let y=r.outputs,D;if(m&&y!==null&&(D=y[i])){let R=D.length;if(R)for(let S=0;S<R;S+=2){let P=D[S],V=D[S+1],ae=e[P][V].subscribe(s),q=p.length;p.push(s,ae),l&&l.push(i,r.index,q,-(q+1))}}}function LT(t,e,n,r){let i=ge(null);try{return In(6,e,n),n(r)!==!1}catch(s){return Fb(t,s),!1}finally{In(7,e,n),ge(i)}}function FT(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?qr(t.index,e):e;cm(o,5);let a=LT(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=LT(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Q8(t=1){return PP(t)}function Y8(t,e,n){a1(t,e,n)}function aL(t){let e=fe(),n=ht(),r=PD();Fg(r+1);let i=lm(n,r);if(t.dirty&&fP(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=l1(e,r);t.reset(s,oO),t.notifyOnChanges()}return!0}return!1}function cL(){return s1(fe(),PD())}function uL(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function J8(t){let e=bP();return Gl(e,Ut+t)}function Z8(t,e=""){let n=fe(),r=ht(),i=t+Ut,s=r.firstCreatePass?ed(r,i,1,e,null):r.data[i],o=lL(r,n,s,e,t);n[i]=o,Bg()&&rm(r,n,o,s),ka(s,!1)}var lL=(t,e,n,r,i)=>($g(!0),bO(e[Ye],r));function dL(t){return nC("",t,""),dL}function nC(t,e,n){let r=fe(),i=x1(r,t,e,n);return i!==Zn&&Vb(r,Bi(),i),nC}function hL(t,e,n,r,i){let s=fe(),o=P1(s,t,e,n,r,i);return o!==Zn&&Vb(s,Bi(),o),hL}function fL(t,e,n){Yb(e)&&(e=e());let r=fe(),i=Yl();if(Kn(r,i,e)){let s=ht(),o=jg();Rb(s,o,r,t,e,r[Ye],n,!1)}return fL}function X8(t,e){let n=Yb(t);return n&&t.set(e),n}function pL(t,e){let n=fe(),r=ht(),i=bt();return tC(r,n,n[Ye],i,t,e),pL}function gL(t,e,n){let r=ht();if(r.firstCreatePass){let i=Br(t);Ig(n,r.data,r.blueprint,i,!0),Ig(e,r.data,r.blueprint,i,!1)}}function Ig(t,e,n,r,i){if(t=Et(t),Array.isArray(t))for(let s=0;s<t.length;s++)Ig(t[s],e,n,r,i);else{let s=ht(),o=fe(),a=bt(),c=$s(t)?t:Et(t.provide),l=fD(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if($s(t)||!t.multi){let y=new Oi(l,i,Ve),D=Np(c,e,i?h:h+m,p);D===-1?(qp(Al(a,o),s,c),Rp(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[D]=y,o[D]=y)}else{let y=Np(c,e,h+m,p),D=Np(c,e,h,h+m),R=y>=0&&n[y],S=D>=0&&n[D];if(i&&!S||!i&&!R){qp(Al(a,o),s,c);let P=vL(i?yL:mL,n.length,i,r,l);!i&&S&&(n[D].providerFactory=P),Rp(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),o.push(P)}else{let P=rC(n[i?D:y],l,!i&&r);Rp(s,t,y>-1?y:D,P)}!i&&r&&S&&n[D].componentProviders++}}}function Rp(t,e,n,r){let i=$s(e),s=Xx(e);if(i||s){let c=(s?Et(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,c]):l[h+1].push(r,c)}else l.push(n,c)}}}function rC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Np(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function mL(t,e,n,r){return wg(this.multi,[])}function yL(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ki(n,n[ne],this.providerFactory.index,r);s=a.slice(0,o),wg(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],wg(i,s);return s}function wg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function vL(t,e,n,r,i){let s=new Oi(t,n,Ve);return s.multi=[],s.index=e,s.componentProviders=0,rC(s,i,r&&!n),s}function e5(t,e=[]){return n=>{n.providersResolver=(r,i)=>gL(r,i?i(t):t,e)}}var _L=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=lD(!1,n.type),i=r.length>0?rd([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(z(Dt))})}}return t})();function iC(t){$i("NgStandalone"),t.getStandaloneInjector=e=>e.get(_L).getOrCreateStandaloneInjector(t)}function t5(t,e,n,r){return sC(fe(),Ql(),t,e,n,r)}function vm(t,e){let n=t[e];return n===Zn?void 0:n}function sC(t,e,n,r,i,s){let o=e+n;return Kn(t,o,i)?hm(t,o+1,s?r.call(s,i):r(i)):vm(t,o+1)}function IL(t,e,n,r,i,s,o){let a=e+n;return fm(t,a,i,s)?hm(t,a+2,o?r.call(o,i,s):r(i,s)):vm(t,a+2)}function wL(t,e,n,r,i,s,o,a){let c=e+n;return E1(t,c,i,s,o)?hm(t,c+3,a?r.call(a,i,s,o):r(i,s,o)):vm(t,c+3)}function n5(t,e){let n=ht(),r,i=t+Ut;n.firstCreatePass?(r=EL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Ri(r.type,!0)),o,a=Nt(Ve);try{let c=Sl(!1),l=s();return Sl(c),uL(n,fe(),i,l),l}finally{Nt(a)}}function EL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function r5(t,e,n){let r=t+Ut,i=fe(),s=Gl(i,r);return _m(i,r)?sC(i,Ql(),e,s.transform,n,s):s.transform(n)}function i5(t,e,n,r){let i=t+Ut,s=fe(),o=Gl(s,i);return _m(s,i)?IL(s,Ql(),e,o.transform,n,r,o):o.transform(n,r)}function s5(t,e,n,r,i){let s=t+Ut,o=fe(),a=Gl(o,s);return _m(o,s)?wL(o,Ql(),e,a.transform,n,r,i,a):a.transform(n,r,i)}function _m(t,e){return t[ne].data[e].pure}var Hr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},oC=new Hr("18.2.9");var id=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var aC=new $("");function eo(t){return!!t&&typeof t.then=="function"}function Im(t){return!!t&&typeof t.subscribe=="function"}var sd=new $(""),cC=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=x(sd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(eo(s))n.push(s);else if(Im(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Va=new $("");function TL(){SE(()=>{throw new G(600,!1)})}function DL(t){return t.isBoundToModule}var bL=10;function CL(t,e,n){try{let r=n();return eo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Wr=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(iO),this.afterRenderManager=x(Zb),this.zonelessEnabled=x(nd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ut,this.afterTick=new ut,this.componentTypes=[],this.components=[],this.isStable=x(zr).hasPendingTasks.pipe(J(n=>!n)),this._injector=x(Dt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Ol;if(!this._injector.get(cC).done){let m=!i&&oD(n),y=!1;throw new G(405,y)}let o;i?o=n:o=this._injector.get(Gs).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=DL(o)?void 0:this._injector.get($r),c=r||o.selector,l=o.create(Je.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(aC,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),pl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new G(101,!1);let n=ge(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ge(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Ws,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<bL;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)SL(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Wl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;pl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Va,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>pl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new G(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function pl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function SL(t,e,n,r){if(!n&&!Wl(t))return;Bb(t,e,n&&!r?0:1)}var Eg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},od=(()=>{class t{compileModuleSync(n){return new gg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=aD(n),s=lb(i.declarations).reduce((o,a)=>{let c=jr(a);return c&&o.push(new Ks(c)),o},[]);return new Eg(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var AL=(()=>{class t{constructor(){this.zone=x(he),this.changeDetectionScheduler=x(zs),this.applicationRef=x(Wr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),RL=new $("",{factory:()=>!1});function uC({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new he(be(U({},lC()),{scheduleInRootZone:n})),[{provide:he,useFactory:t},{provide:Bs,multi:!0,useFactory:()=>{let r=x(AL,{optional:!0});return()=>r.initialize()}},{provide:Bs,multi:!0,useFactory:()=>{let r=x(NL);return()=>{r.initialize()}}},e===!0?{provide:zb,useValue:!0}:[],{provide:Gb,useValue:n??JD}]}function o5(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=uC({ngZoneFactory:()=>{let i=lC(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&$i("NgZone_CoalesceEvent"),new he(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Mt([{provide:RL,useValue:!0},{provide:nd,useValue:!1},r])}function lC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var NL=(()=>{class t{constructor(){this.subscription=new Fe,this.initialized=!1,this.zone=x(he),this.pendingTasks=x(zr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ML=(()=>{class t{constructor(){this.appRef=x(Wr),this.taskService=x(zr),this.ngZone=x(he),this.zonelessEnabled=x(nd),this.disableScheduling=x(zb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Fe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(Gb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Qp||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?vT:ZD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,vT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function xL(){return typeof $localize<"u"&&$localize.locale||Vl}var ad=new $("",{providedIn:"root",factory:()=>x(ad,oe.Optional|oe.SkipSelf)||xL()});var Tg=new $("");function ul(t){return!t.moduleRef}function PL(t){let e=ul(t)?t.r3Injector:t.moduleRef.injector,n=e.get(he);return n.run(()=>{ul(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Gn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),ul(t)){let s=()=>e.destroy(),o=t.platformInjector.get(Tg);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(Tg);o.add(s),t.moduleRef.onDestroy(()=>{pl(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return CL(r,n,()=>{let s=e.get(cC);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(ad,Vl);if(iL(o||Vl),ul(t)){let a=e.get(Wr);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return OL(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function OL(t,e){let n=t.injector.get(Wr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new G(-403,!1);e.push(t)}var gl=null;function kL(t=[],e){return Je.create({name:e,providers:[{provide:Hl,useValue:"platform"},{provide:Tg,useValue:new Set([()=>gl=null])},...t]})}function LL(t=[]){if(gl)return gl;let e=kL(t);return gl=e,TL(),FL(e),e}function FL(t){t.get(Jg,null)?.forEach(n=>n())}var to=(()=>{class t{static{this.__NG_ELEMENT_ID__=VL}}return t})();function VL(t){return UL(bt(),fe(),(t&16)===16)}function UL(t,e,n){if(zl(t)&&!n){let r=qr(t.index,e);return new Fi(r,r)}else if(t.type&175){let r=e[Dn];return new Fi(r,e)}return null}var Dg=class{constructor(){}supports(e){return Jb(e)}create(e){return new bg(e)}},jL=(t,e)=>e,bg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||jL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<VT(r,i,s)?n:r,a=VT(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,D=y+m;h<=D&&D<l&&(s[m]=y+1)}let p=o.previousIndex;s[p]=h-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Jb(e))throw new G(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,I1(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Cg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ul),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ul),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Cg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Sg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ul=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Sg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function VT(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function UT(){return new wm([new Dg])}var wm=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:UT})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||UT()),deps:[[t,new Rg,new je]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new G(901,!1)}}return t})();function dC(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=LL(r),s=[uC({}),{provide:zs,useExisting:ML},...n||[]],o=new Ll({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return PL({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Ua(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function a5(t,e){$i("NgSignals");let n=DE(t);return e?.equal&&(n[Bn].equal=e.equal),n}function Em(t){let e=ge(null);try{return t()}finally{ge(e)}}function hC(t){let e=jr(t);if(!e)return null;let n=new Ks(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var _C=null;function ro(){return _C}function IC(t){_C??=t}var md=class{};var ft=new $(""),Pm=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x($L),providedIn:"platform"})}}return t})(),wC=new $(""),$L=(()=>{class t extends Pm{constructor(){super(),this._doc=x(ft),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ro().getBaseHref(this._doc)}onPopState(n){let r=ro().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ro().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Om(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function fC(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function er(t){return t&&t[0]!=="?"?"?"+t:t}var nr=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(km),providedIn:"root"})}}return t})(),EC=new $(""),km=(()=>{class t extends nr{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Om(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+er(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+er(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+er(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(z(Pm),z(EC,8))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),TC=(()=>{class t extends nr{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Om(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+er(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+er(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(z(Pm),z(EC,8))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),so=(()=>{class t{constructor(n){this._subject=new lt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=zL(fC(pC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+er(r))}normalize(n){return t.stripTrailingSlash(qL(this._basePath,pC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+er(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+er(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=er}static{this.joinWithSlash=Om}static{this.stripTrailingSlash=fC}static{this.\u0275fac=function(r){return new(r||t)(z(nr))}}static{this.\u0275prov=H({token:t,factory:()=>HL(),providedIn:"root"})}}return t})();function HL(){return new so(z(nr))}function qL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function pC(t){return t.replace(/\/index.html$/,"")}function zL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Ct=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Ct||{}),De=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(De||{}),jt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(jt||{}),Kr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function GL(t){return Yt(t)[Be.LocaleId]}function WL(t,e,n){let r=Yt(t),i=[r[Be.DayPeriodsFormat],r[Be.DayPeriodsStandalone]],s=Jt(i,e);return Jt(s,n)}function KL(t,e,n){let r=Yt(t),i=[r[Be.DaysFormat],r[Be.DaysStandalone]],s=Jt(i,e);return Jt(s,n)}function QL(t,e,n){let r=Yt(t),i=[r[Be.MonthsFormat],r[Be.MonthsStandalone]],s=Jt(i,e);return Jt(s,n)}function YL(t,e){let r=Yt(t)[Be.Eras];return Jt(r,e)}function cd(t,e){let n=Yt(t);return Jt(n[Be.DateFormat],e)}function ud(t,e){let n=Yt(t);return Jt(n[Be.TimeFormat],e)}function ld(t,e){let r=Yt(t)[Be.DateTimeFormat];return Jt(r,e)}function vd(t,e){let n=Yt(t),r=n[Be.NumberSymbols][e];if(typeof r>"u"){if(e===Kr.CurrencyDecimal)return n[Be.NumberSymbols][Kr.Decimal];if(e===Kr.CurrencyGroup)return n[Be.NumberSymbols][Kr.Group]}return r}function DC(t){if(!t[Be.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Be.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function JL(t){let e=Yt(t);return DC(e),(e[Be.ExtraData][2]||[]).map(r=>typeof r=="string"?Tm(r):[Tm(r[0]),Tm(r[1])])}function ZL(t,e,n){let r=Yt(t);DC(r);let i=[r[Be.ExtraData][0],r[Be.ExtraData][1]],s=Jt(i,e)||[];return Jt(s,n)||[]}function Jt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Tm(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var XL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,dd={},eF=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,tr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(tr||{}),_e=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(_e||{}),ve=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(ve||{});function tF(t,e,n,r){let i=lF(t);e=Xn(n,e)||e;let o=[],a;for(;e;)if(a=eF.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=CC(r,c),i=uF(i,r,!0));let l="";return o.forEach(h=>{let p=aF(h);l+=p?p(i,n,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function yd(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Xn(t,e){let n=GL(t);if(dd[n]??={},dd[n][e])return dd[n][e];let r="";switch(e){case"shortDate":r=cd(t,jt.Short);break;case"mediumDate":r=cd(t,jt.Medium);break;case"longDate":r=cd(t,jt.Long);break;case"fullDate":r=cd(t,jt.Full);break;case"shortTime":r=ud(t,jt.Short);break;case"mediumTime":r=ud(t,jt.Medium);break;case"longTime":r=ud(t,jt.Long);break;case"fullTime":r=ud(t,jt.Full);break;case"short":let i=Xn(t,"shortTime"),s=Xn(t,"shortDate");r=hd(ld(t,jt.Short),[i,s]);break;case"medium":let o=Xn(t,"mediumTime"),a=Xn(t,"mediumDate");r=hd(ld(t,jt.Medium),[o,a]);break;case"long":let c=Xn(t,"longTime"),l=Xn(t,"longDate");r=hd(ld(t,jt.Long),[c,l]);break;case"full":let h=Xn(t,"fullTime"),p=Xn(t,"fullDate");r=hd(ld(t,jt.Full),[h,p]);break}return r&&(dd[n][e]=r),r}function hd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function ln(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function nF(t,e){return ln(t,3).substring(0,e)}function ze(t,e,n=0,r=!1,i=!1){return function(s,o){let a=rF(t,s);if((n>0||a>-n)&&(a+=n),t===_e.Hours)a===0&&n===-12&&(a=12);else if(t===_e.FractionalSeconds)return nF(a,e);let c=vd(o,Kr.MinusSign);return ln(a,e,c,r,i)}}function rF(t,e){switch(t){case _e.FullYear:return e.getFullYear();case _e.Month:return e.getMonth();case _e.Date:return e.getDate();case _e.Hours:return e.getHours();case _e.Minutes:return e.getMinutes();case _e.Seconds:return e.getSeconds();case _e.FractionalSeconds:return e.getMilliseconds();case _e.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ce(t,e,n=Ct.Format,r=!1){return function(i,s){return iF(i,s,t,e,n,r)}}function iF(t,e,n,r,i,s){switch(n){case ve.Months:return QL(e,i,r)[t.getMonth()];case ve.Days:return KL(e,i,r)[t.getDay()];case ve.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=JL(e),h=ZL(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,D]=m,R=o>=y.hours&&a>=y.minutes,S=o<D.hours||o===D.hours&&a<D.minutes;if(y.hours<D.hours){if(R&&S)return!0}else if(R||S)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return WL(e,i,r)[o<12?0:1];case ve.Eras:return YL(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function fd(t){return function(e,n,r){let i=-1*r,s=vd(n,Kr.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case tr.Short:return(i>=0?"+":"")+ln(o,2,s)+ln(Math.abs(i%60),2,s);case tr.ShortGMT:return"GMT"+(i>=0?"+":"")+ln(o,1,s);case tr.Long:return"GMT"+(i>=0?"+":"")+ln(o,2,s)+":"+ln(Math.abs(i%60),2,s);case tr.Extended:return r===0?"Z":(i>=0?"+":"")+ln(o,2,s)+":"+ln(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var sF=0,gd=4;function oF(t){let e=yd(t,sF,1).getDay();return yd(t,0,1+(e<=gd?gd:gd+7)-e)}function bC(t){let e=t.getDay(),n=e===0?-3:gd-e;return yd(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Dm(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=bC(n),o=oF(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return ln(i,t,vd(r,Kr.MinusSign))}}function pd(t,e=!1){return function(n,r){let s=bC(n).getFullYear();return ln(s,t,vd(r,Kr.MinusSign),e)}}var bm={};function aF(t){if(bm[t])return bm[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ce(ve.Eras,De.Abbreviated);break;case"GGGG":e=Ce(ve.Eras,De.Wide);break;case"GGGGG":e=Ce(ve.Eras,De.Narrow);break;case"y":e=ze(_e.FullYear,1,0,!1,!0);break;case"yy":e=ze(_e.FullYear,2,0,!0,!0);break;case"yyy":e=ze(_e.FullYear,3,0,!1,!0);break;case"yyyy":e=ze(_e.FullYear,4,0,!1,!0);break;case"Y":e=pd(1);break;case"YY":e=pd(2,!0);break;case"YYY":e=pd(3);break;case"YYYY":e=pd(4);break;case"M":case"L":e=ze(_e.Month,1,1);break;case"MM":case"LL":e=ze(_e.Month,2,1);break;case"MMM":e=Ce(ve.Months,De.Abbreviated);break;case"MMMM":e=Ce(ve.Months,De.Wide);break;case"MMMMM":e=Ce(ve.Months,De.Narrow);break;case"LLL":e=Ce(ve.Months,De.Abbreviated,Ct.Standalone);break;case"LLLL":e=Ce(ve.Months,De.Wide,Ct.Standalone);break;case"LLLLL":e=Ce(ve.Months,De.Narrow,Ct.Standalone);break;case"w":e=Dm(1);break;case"ww":e=Dm(2);break;case"W":e=Dm(1,!0);break;case"d":e=ze(_e.Date,1);break;case"dd":e=ze(_e.Date,2);break;case"c":case"cc":e=ze(_e.Day,1);break;case"ccc":e=Ce(ve.Days,De.Abbreviated,Ct.Standalone);break;case"cccc":e=Ce(ve.Days,De.Wide,Ct.Standalone);break;case"ccccc":e=Ce(ve.Days,De.Narrow,Ct.Standalone);break;case"cccccc":e=Ce(ve.Days,De.Short,Ct.Standalone);break;case"E":case"EE":case"EEE":e=Ce(ve.Days,De.Abbreviated);break;case"EEEE":e=Ce(ve.Days,De.Wide);break;case"EEEEE":e=Ce(ve.Days,De.Narrow);break;case"EEEEEE":e=Ce(ve.Days,De.Short);break;case"a":case"aa":case"aaa":e=Ce(ve.DayPeriods,De.Abbreviated);break;case"aaaa":e=Ce(ve.DayPeriods,De.Wide);break;case"aaaaa":e=Ce(ve.DayPeriods,De.Narrow);break;case"b":case"bb":case"bbb":e=Ce(ve.DayPeriods,De.Abbreviated,Ct.Standalone,!0);break;case"bbbb":e=Ce(ve.DayPeriods,De.Wide,Ct.Standalone,!0);break;case"bbbbb":e=Ce(ve.DayPeriods,De.Narrow,Ct.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ce(ve.DayPeriods,De.Abbreviated,Ct.Format,!0);break;case"BBBB":e=Ce(ve.DayPeriods,De.Wide,Ct.Format,!0);break;case"BBBBB":e=Ce(ve.DayPeriods,De.Narrow,Ct.Format,!0);break;case"h":e=ze(_e.Hours,1,-12);break;case"hh":e=ze(_e.Hours,2,-12);break;case"H":e=ze(_e.Hours,1);break;case"HH":e=ze(_e.Hours,2);break;case"m":e=ze(_e.Minutes,1);break;case"mm":e=ze(_e.Minutes,2);break;case"s":e=ze(_e.Seconds,1);break;case"ss":e=ze(_e.Seconds,2);break;case"S":e=ze(_e.FractionalSeconds,1);break;case"SS":e=ze(_e.FractionalSeconds,2);break;case"SSS":e=ze(_e.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=fd(tr.Short);break;case"ZZZZZ":e=fd(tr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=fd(tr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=fd(tr.Long);break;default:return null}return bm[t]=e,e}function CC(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function cF(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function uF(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=CC(e,i);return cF(t,r*(s-i))}function lF(t){if(gC(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return yd(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(XL))return dF(r)}let e=new Date(t);if(!gC(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function dF(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function gC(t){return t instanceof Date&&!isNaN(t.valueOf())}function _d(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Cm=/\s+/,mC=[],N5=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=mC,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(Cm):mC}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Cm):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Cm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Ve(Jn),Ve(Fa))}}static{this.\u0275dir=ji({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var Sm=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},M5=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Sm(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),yC(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);yC(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Ve(Gr),Ve(Vi),Ve(wm))}}static{this.\u0275dir=ji({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function yC(t,e){t.context.$implicit=e.item}var x5=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Am,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){vC("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){vC("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Ve(Gr),Ve(Vi))}}static{this.\u0275dir=ji({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Am=class{constructor(){this.$implicit=null,this.ngIf=null}};function vC(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Tt(e)}'.`)}function SC(t,e){return new G(2100,!1)}var Rm=class{createSubscription(e,n){return Em(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Em(()=>e.unsubscribe())}},Nm=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},hF=new Nm,fF=new Rm,P5=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(eo(n))return hF;if(Im(n))return fF;throw SC(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)(Ve(to,16))}}static{this.\u0275pipe=xg({name:"async",type:t,pure:!1,standalone:!0})}}return t})();var pF="mediumDate",gF=new $(""),mF=new $(""),O5=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??pF,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return tF(n,o,s||this.locale,a)}catch(o){throw SC(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(Ve(ad,16),Ve(gF,24),Ve(mF,24))}}static{this.\u0275pipe=xg({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var yF=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Js({type:t})}static{this.\u0275inj=Ys({})}}return t})(),Lm="browser",vF="server";function _F(t){return t===Lm}function Id(t){return t===vF}var AC=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>_F(x(Qt))?new Mm(x(ft),window):new xm})}}return t})(),Mm=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=IF(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function IF(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var xm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},io=class{};var Ba=class{},Ed=class{},rr=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Vm=class{encodeKey(e){return NC(e)}encodeValue(e){return NC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function wF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var EF=/%(\d[a-f0-9])/gi,TF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function NC(t){return encodeURIComponent(t).replace(EF,(e,n)=>TF[n]??e)}function wd(t){return`${t}`}var Yr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Vm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=wF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(wd):[wd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(wd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(wd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Um=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function DF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function MC(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function xC(t){return typeof Blob<"u"&&t instanceof Blob}function PC(t){return typeof FormData<"u"&&t instanceof FormData}function bF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ja=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(DF(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new rr,this.context??=new Um,!this.params)this.params=new Yr,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||MC(this.body)||xC(this.body)||PC(this.body)||bF(this.body)?this.body:this.body instanceof Yr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||PC(this.body)?null:xC(this.body)?this.body.type||null:MC(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Yr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),h)),new t(n,r,o,{params:h,headers:l,context:p,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},Jr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Jr||{}),$a=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new rr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Td=class t extends $a{constructor(e={}){super(e),this.type=Jr.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ha=class t extends $a{constructor(e={}){super(e),this.type=Jr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Qr=class extends $a{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},FC=200,CF=204;function Fm(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var SF=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let s;if(n instanceof ja)s=n;else{let c;i.headers instanceof rr?c=i.headers:c=new rr(i.headers);let l;i.params&&(i.params instanceof Yr?l=i.params:l=new Yr({fromObject:i.params})),s=new ja(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=Q(s).pipe(Hn(c=>this.handler.handle(c)));if(n instanceof ja||i.observe==="events")return o;let a=o.pipe(wt(c=>c instanceof Ha));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(J(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(J(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(J(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(J(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Yr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Fm(i,r))}post(n,r,i={}){return this.request("POST",n,Fm(i,r))}put(n,r,i={}){return this.request("PUT",n,Fm(i,r))}static{this.\u0275fac=function(r){return new(r||t)(z(Ba))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),AF=/^\)\]\}',?\n/,RF="X-Request-URL";function OC(t){if(t.url)return t.url;let e=RF.toLocaleLowerCase();return t.headers.get(e)}var NF=(()=>{class t{constructor(){this.fetchImpl=x(jm,{optional:!0})?.fetch??((...n)=>globalThis.fetch(...n)),this.ngZone=x(he)}handle(n){return new se(r=>{let i=new AbortController;return this.doRequest(n,i.signal,r).then(Bm,s=>r.error(new Qr({error:s}))),()=>i.abort()})}doRequest(n,r,i){return _(this,null,function*(){let s=this.createRequestInit(n),o;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(n.urlWithParams,U({signal:r},s)));MF(y),i.next({type:Jr.Sent}),o=yield y}catch(y){i.error(new Qr({error:y,status:y.status??0,statusText:y.statusText,url:n.urlWithParams,headers:y.headers}));return}let a=new rr(o.headers),c=o.statusText,l=OC(o)??n.urlWithParams,h=o.status,p=null;if(n.reportProgress&&i.next(new Td({headers:a,status:h,statusText:c,url:l})),o.body){let y=o.headers.get("content-length"),D=[],R=o.body.getReader(),S=0,P,V,k=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>_(this,null,function*(){for(;;){let{done:ae,value:q}=yield R.read();if(ae)break;if(D.push(q),S+=q.length,n.reportProgress){V=n.responseType==="text"?(V??"")+(P??=new TextDecoder).decode(q,{stream:!0}):void 0;let E=()=>i.next({type:Jr.DownloadProgress,total:y?+y:void 0,loaded:S,partialText:V});k?k.run(E):E()}}}));let B=this.concatChunks(D,S);try{let ae=o.headers.get("Content-Type")??"";p=this.parseBody(n,B,ae)}catch(ae){i.error(new Qr({error:ae,headers:new rr(o.headers),status:o.status,statusText:o.statusText,url:OC(o)??n.urlWithParams}));return}}h===0&&(h=p?FC:0),h>=200&&h<300?(i.next(new Ha({body:p,headers:a,status:h,statusText:c,url:l})),i.complete()):i.error(new Qr({error:p,headers:a,status:h,statusText:c,url:l}))})}parseBody(n,r,i){switch(n.responseType){case"json":let s=new TextDecoder().decode(r).replace(AF,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(n){let r={},i=n.withCredentials?"include":void 0;if(n.headers.forEach((s,o)=>r[s]=o.join(",")),n.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!n.headers.has("Content-Type")){let s=n.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:i}}concatChunks(n,r){let i=new Uint8Array(r),s=0;for(let o of n)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),jm=class{};function Bm(){}function MF(t){t.then(Bm,Bm)}function xF(t,e){return e(t)}function PF(t,e,n){return(r,i)=>Wt(n,()=>e(r,s=>t(s,i)))}var VC=new $(""),OF=new $(""),kF=new $("",{providedIn:"root",factory:()=>!0});var kC=(()=>{class t extends Ba{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=x(zr),this.contributeToStability=x(kF)}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(VC),...this.injector.get(OF,[])]));this.chain=r.reduceRight((i,s)=>PF(i,s,this.injector),xF)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(bi(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||t)(z(Ed),z(Dt))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();var LF=/^\)\]\}',?\n/;function FF(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var LC=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new G(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Me(r.\u0275loadImpl()):Q(null)).pipe(Rt(()=>new se(s=>{let o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((R,S)=>o.setRequestHeader(R,S.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let R=n.detectContentTypeHeader();R!==null&&o.setRequestHeader("Content-Type",R)}if(n.responseType){let R=n.responseType.toLowerCase();o.responseType=R!=="json"?R:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let R=o.statusText||"OK",S=new rr(o.getAllResponseHeaders()),P=FF(o)||n.url;return c=new Td({headers:S,status:o.status,statusText:R,url:P}),c},h=()=>{let{headers:R,status:S,statusText:P,url:V}=l(),k=null;S!==CF&&(k=typeof o.response>"u"?o.responseText:o.response),S===0&&(S=k?FC:0);let B=S>=200&&S<300;if(n.responseType==="json"&&typeof k=="string"){let ae=k;k=k.replace(LF,"");try{k=k!==""?JSON.parse(k):null}catch(q){k=ae,B&&(B=!1,k={error:q,text:k})}}B?(s.next(new Ha({body:k,headers:R,status:S,statusText:P,url:V||void 0})),s.complete()):s.error(new Qr({error:k,headers:R,status:S,statusText:P,url:V||void 0}))},p=R=>{let{url:S}=l(),P=new Qr({error:R,status:o.status||0,statusText:o.statusText||"Unknown Error",url:S||void 0});s.error(P)},m=!1,y=R=>{m||(s.next(l()),m=!0);let S={type:Jr.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(S.total=R.total),n.responseType==="text"&&o.responseText&&(S.partialText=o.responseText),s.next(S)},D=R=>{let S={type:Jr.UploadProgress,loaded:R.loaded};R.lengthComputable&&(S.total=R.total),s.next(S)};return o.addEventListener("load",h),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),n.reportProgress&&(o.addEventListener("progress",y),a!==null&&o.upload&&o.upload.addEventListener("progress",D)),o.send(a),s.next({type:Jr.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",h),o.removeEventListener("timeout",p),n.reportProgress&&(o.removeEventListener("progress",y),a!==null&&o.upload&&o.upload.removeEventListener("progress",D)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||t)(z(io))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),UC=new $(""),VF="XSRF-TOKEN",UF=new $("",{providedIn:"root",factory:()=>VF}),jF="X-XSRF-TOKEN",BF=new $("",{providedIn:"root",factory:()=>jF}),Dd=class{},$F=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=_d(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||t)(z(ft),z(Qt),z(UF))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function HF(t,e){let n=t.url.toLowerCase();if(!x(UC)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=x(Dd).getToken(),i=x(BF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function K5(...t){let e=[SF,LC,kC,{provide:Ba,useExisting:kC},{provide:Ed,useFactory:()=>x(NF,{optional:!0})??x(LC)},{provide:VC,useValue:HF,multi:!0},{provide:UC,useValue:!0},{provide:Dd,useClass:$F}];for(let n of t)e.push(...n.\u0275providers);return Mt(e)}var qm=class extends md{constructor(){super(...arguments),this.supportsDOMEvents=!0}},zm=class t extends qm{static makeCurrent(){IC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=qF();return n==null?null:zF(n)}resetBaseElement(){qa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _d(document.cookie,e)}},qa=null;function qF(){return qa=qa||document.querySelector("base"),qa?qa.getAttribute("href"):null}function zF(t){return new URL(t,document.baseURI).pathname}var GF=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Gm=new $(""),HC=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(z(Gm),z(he))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),bd=class{constructor(e){this._doc=e}},$m="ng-app-id",qC=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Id(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${$m}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute($m),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute($m,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(z(ft),z(Yg),z(Zg,8),z(Qt))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Hm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Km=/%COMP%/g,zC="%COMP%",WF=`_nghost-${zC}`,KF=`_ngcontent-${zC}`,QF=!0,YF=new $("",{providedIn:"root",factory:()=>QF});function JF(t){return KF.replace(Km,t)}function ZF(t){return WF.replace(Km,t)}function GC(t,e){return e.map(n=>n.replace(Km,t))}var jC=(()=>{class t{constructor(n,r,i,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Id(a),this.defaultRenderer=new za(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===En.ShadowDom&&(r=be(U({},r),{encapsulation:En.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Cd?i.applyToHost(n):i instanceof Ga&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case En.Emulated:s=new Cd(c,l,r,this.appId,h,o,a,p);break;case En.ShadowDom:return new Wm(c,l,n,r,o,a,this.nonce,p);default:s=new Ga(c,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(z(HC),z(qC),z(Yg),z(YF),z(ft),z(Qt),z(he),z(Zg))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),za=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Hm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(BC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(BC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Hm[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Hm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Wn.DashCase|Wn.Important)?e.style.setProperty(n,r,i&Wn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Wn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ro().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function BC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Wm=class extends za{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=GC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ga=class extends za{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?GC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Cd=class extends Ga{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=JF(l),this.hostAttr=ZF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},XF=(()=>{class t extends bd{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(z(ft))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),$C=["alt","control","meta","shift"],eV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},nV=(()=>{class t extends bd{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ro().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),$C.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=eV[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),$C.forEach(o=>{if(o!==i){let a=tV[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(z(ft))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function IK(t,e){return dC(U({rootComponent:t},rV(e)))}function rV(t){return{appProviders:[...cV,...t?.providers??[]],platformProviders:aV}}function iV(){zm.makeCurrent()}function sV(){return new Gn}function oV(){return sb(document),document}var aV=[{provide:Qt,useValue:Lm},{provide:Jg,useValue:iV,multi:!0},{provide:ft,useFactory:oV,deps:[]}];var cV=[{provide:Hl,useValue:"root"},{provide:Gn,useFactory:sV,deps:[]},{provide:Gm,useClass:XF,multi:!0,deps:[ft,he,Qt]},{provide:Gm,useClass:nV,multi:!0,deps:[ft]},jC,qC,HC,{provide:Ws,useExisting:jC},{provide:io,useClass:GF,deps:[]},[]];var WC=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(z(ft))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var re="primary",ac=Symbol("RouteTitle"),Xm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ho(t){return new Xm(t)}function lV(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function dV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Cn(t[n],e[n]))return!1;return!0}function Cn(t,e){let n=t?ey(t):void 0,r=e?ey(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!iS(t[i],e[i]))return!1;return!0}function ey(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function iS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function sS(t){return t.length>0?t[t.length-1]:null}function ei(t){return fp(t)?t:eo(t)?Me(Promise.resolve(t)):Q(t)}var hV={exact:aS,subset:cS},oS={exact:fV,subset:pV,ignored:()=>!0};function KC(t,e,n){return hV[n.paths](t.root,e.root,n.matrixParams)&&oS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function fV(t,e){return Cn(t,e)}function aS(t,e,n){if(!qi(t.segments,e.segments)||!Rd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!aS(t.children[r],e.children[r],n))return!1;return!0}function pV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>iS(t[n],e[n]))}function cS(t,e,n){return uS(t,e,e.segments,n)}function uS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!qi(i,n)||e.hasChildren()||!Rd(i,n,r))}else if(t.segments.length===n.length){if(!qi(t.segments,n)||!Rd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!cS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!qi(t.segments,i)||!Rd(t.segments,i,r)||!t.children[re]?!1:uS(t.children[re],e,s,r)}}function Rd(t,e,n){return e.every((r,i)=>oS[n](t[i].parameters,r.parameters))}var sr=class{constructor(e=new Ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ho(this.queryParams),this._queryParamMap}toString(){return yV.serialize(this)}},Ie=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nd(this)}},Hi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ho(this.parameters),this._parameterMap}toString(){return dS(this)}};function gV(t,e){return qi(t,e)&&t.every((n,r)=>Cn(n.parameters,e[r].parameters))}function qi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function mV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(n=n.concat(e(i,r)))}),n}var cc=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new fo,providedIn:"root"})}}return t})(),fo=class{parse(e){let n=new ny(e);return new sr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Wa(e.root,!0)}`,r=IV(e.queryParams),i=typeof e.fragment=="string"?`#${vV(e.fragment)}`:"";return`${n}${r}${i}`}},yV=new fo;function Nd(t){return t.segments.map(e=>dS(e)).join("/")}function Wa(t,e){if(!t.hasChildren())return Nd(t);if(e){let n=t.children[re]?Wa(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==re&&r.push(`${i}:${Wa(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=mV(t,(r,i)=>i===re?[Wa(t.children[re],!1)]:[`${i}:${Wa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Nd(t)}/${n[0]}`:`${Nd(t)}/(${n.join("//")})`}}function lS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sd(t){return lS(t).replace(/%3B/gi,";")}function vV(t){return encodeURI(t)}function ty(t){return lS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Md(t){return decodeURIComponent(t)}function QC(t){return Md(t.replace(/\+/g,"%20"))}function dS(t){return`${ty(t.path)}${_V(t.parameters)}`}function _V(t){return Object.entries(t).map(([e,n])=>`;${ty(e)}=${ty(n)}`).join("")}function IV(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Sd(n)}=${Sd(i)}`).join("&"):`${Sd(n)}=${Sd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var wV=/^[^\/()?;#]+/;function Qm(t){let e=t.match(wV);return e?e[0]:""}var EV=/^[^\/()?;=#]+/;function TV(t){let e=t.match(EV);return e?e[0]:""}var DV=/^[^=?&#]+/;function bV(t){let e=t.match(DV);return e?e[0]:""}var CV=/^[^&#]+/;function SV(t){let e=t.match(CV);return e?e[0]:""}var ny=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[re]=new Ie(e,n)),r}parseSegment(){let e=Qm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new Hi(Md(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=TV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Qm(this.remaining);i&&(r=i,this.capture(r))}e[Md(n)]=Md(r)}parseQueryParam(e){let n=bV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=SV(this.remaining);o&&(r=o,this.capture(r))}let i=QC(n),s=QC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=re);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[re]:new Ie([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function hS(t){return t.segments.length>0?new Ie([],{[re]:t}):t}function fS(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=fS(i);if(r===re&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ie(t.segments,e);return AV(n)}function AV(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new Ie(t.segments.concat(e.segments),e.children)}return t}function zi(t){return t instanceof sr}function RV(t,e,n=null,r=null){let i=pS(t);return gS(i,e,n,r)}function pS(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Ie(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=hS(r);return e??i}function gS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ym(i,i,i,n,r);let s=NV(e);if(s.toRoot())return Ym(i,i,new Ie([],{}),n,r);let o=MV(s,i,t),a=o.processChildren?Ya(o.segmentGroup,o.index,s.commands):yS(o.segmentGroup,o.index,s.commands);return Ym(i,o.segmentGroup,a,n,r)}function xd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Xa(t){return typeof t=="object"&&t!=null&&t.outlets}function Ym(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=mS(t,e,n);let a=hS(fS(o));return new sr(a,s,i)}function mS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=mS(s,e,n)}),new Ie(t.segments,r)}var Pd=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&xd(r[0]))throw new G(4003,!1);let i=r.find(Xa);if(i&&i!==sS(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Pd(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Pd(n,e,r)}var co=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function MV(t,e,n){if(t.isAbsolute)return new co(e,!0,0);if(!n)return new co(e,!1,NaN);if(n.parent===null)return new co(n,!0,0);let r=xd(t.commands[0])?0:1,i=n.segments.length-1+r;return xV(n,i,t.numberOfDoubleDots)}function xV(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new co(r,!1,i-s)}function PV(t){return Xa(t[0])?t[0].outlets:{[re]:t}}function yS(t,e,n){if(t??=new Ie([],{}),t.segments.length===0&&t.hasChildren())return Ya(t,e,n);let r=OV(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ie(t.segments.slice(0,r.pathIndex),{});return s.children[re]=new Ie(t.segments.slice(r.pathIndex),t.children),Ya(s,0,i)}else return r.match&&i.length===0?new Ie(t.segments,{}):r.match&&!t.hasChildren()?ry(t,e,n):r.match?Ya(t,0,i):ry(t,e,n)}function Ya(t,e,n){if(n.length===0)return new Ie(t.segments,{});{let r=PV(n),i={};if(Object.keys(r).some(s=>s!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let s=Ya(t.children[re],e,n);return new Ie(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=yS(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ie(t.segments,i)}}function OV(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Xa(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!JC(c,l,o))return s;r+=2}else{if(!JC(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ry(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Xa(s)){let c=kV(s.outlets);return new Ie(r,c)}if(i===0&&xd(n[0])){let c=t.segments[e];r.push(new Hi(c.path,YC(n[0]))),i++;continue}let o=Xa(s)?s.outlets[re]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&xd(a)?(r.push(new Hi(o,YC(a))),i+=2):(r.push(new Hi(o,{})),i++)}return new Ie(r,{})}function kV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ry(new Ie([],{}),0,r))}),e}function YC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function JC(t,e,n){return t==n.path&&Cn(e,n.parameters)}var Ja="imperative",Ze=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ze||{}),Zt=class{constructor(e,n){this.id=e,this.url=n}},po=class extends Zt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ze.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Sn=class extends Zt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ze.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$t=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}($t||{}),Od=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Od||{}),ir=class extends Zt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ze.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zr=class extends Zt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ze.NavigationSkipped}},ec=class extends Zt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ze.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},kd=class extends Zt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ze.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iy=class extends Zt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ze.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sy=class extends Zt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ze.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},oy=class extends Zt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ze.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ay=class extends Zt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ze.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cy=class{constructor(e){this.route=e,this.type=Ze.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},uy=class{constructor(e){this.route=e,this.type=Ze.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ly=class{constructor(e){this.snapshot=e,this.type=Ze.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dy=class{constructor(e){this.snapshot=e,this.type=Ze.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hy=class{constructor(e){this.snapshot=e,this.type=Ze.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fy=class{constructor(e){this.snapshot=e,this.type=Ze.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ld=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Ze.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},tc=class{},go=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function LV(t,e){return t.providers&&!t._injector&&(t._injector=rd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function dn(t){return t.outlet||re}function FV(t,e){let n=t.filter(r=>dn(r)===e);return n.push(...t.filter(r=>dn(r)!==e)),n}function uc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var py=class{get injector(){return uc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new lc(this.rootInjector),this.attachRef=null}},lc=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new py(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(z(Dt))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Fd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=gy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=gy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=my(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return my(e,this._root).map(n=>n.value)}};function gy(t,e){if(t===e.value)return e;for(let n of e.children){let r=gy(t,n);if(r)return r}return null}function my(t,e){if(t===e.value)return[e];for(let n of e.children){let r=my(t,n);if(r.length)return r.unshift(e),r}return[]}var Bt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ao(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Vd=class extends Fd{constructor(e,n){super(e),this.snapshot=n,by(this,e)}toString(){return this.snapshot.toString()}};function vS(t){let e=VV(t),n=new nt([new Hi("",{})]),r=new nt({}),i=new nt({}),s=new nt({}),o=new nt(""),a=new Xr(n,r,s,o,i,re,t,e.root);return a.snapshot=e.root,new Vd(new Bt(a,[]),e)}function VV(t){let e={},n={},r={},i="",s=new uo([],e,r,i,n,re,t,null,{});return new jd("",new Bt(s,[]))}var Xr=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(J(l=>l[ac]))??Q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>ho(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>ho(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ud(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),t.params),data:U(U({},e.data),t.data),resolve:U(U(U(U({},t.data),e.data),i?.data),t._resolvedData)}:r={params:U({},t.params),data:U({},t.data),resolve:U(U({},t.data),t._resolvedData??{})},i&&IS(i)&&(r.resolve[ac]=i.title),r}var uo=class{get title(){return this.data?.[ac]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ho(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ho(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},jd=class extends Fd{constructor(e,n){super(n),this.url=e,by(this,n)}toString(){return _S(this._root)}};function by(t,e){e.value._routerState=t,e.children.forEach(n=>by(t,n))}function _S(t){let e=t.children.length>0?` { ${t.children.map(_S).join(", ")} } `:"";return`${t.value}${e}`}function Jm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Cn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Cn(e.params,n.params)||t.paramsSubject.next(n.params),dV(e.url,n.url)||t.urlSubject.next(n.url),Cn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function yy(t,e){let n=Cn(t.params,e.params)&&gV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||yy(t.parent,e.parent))}function IS(t){return typeof t.title=="string"||t.title===null}var UV=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new lt,this.deactivateEvents=new lt,this.attachEvents=new lt,this.detachEvents=new lt,this.parentContexts=x(lc),this.location=x(Gr),this.changeDetector=x(to),this.inputBinder=x(qd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new vy(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=ji({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Oa]})}}return t})(),vy=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Xr?this.route:e===lc?this.childContexts:this.parent.get(e,n)}},qd=new $(""),ZC=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Ta([r.queryParams,r.params,r.data]).pipe(Rt(([s,o,a],c)=>(a=U(U(U({},s),o),a),c===0?Q(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=hC(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function jV(t,e,n){let r=nc(t,e._root,n?n._root:void 0);return new Vd(r,e)}function nc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=BV(t,e,n);return new Bt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>nc(t,a)),o}}let r=$V(e.value),i=e.children.map(s=>nc(t,s));return new Bt(r,i)}}function BV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return nc(t,r,i);return nc(t,r)})}function $V(t){return new Xr(new nt(t.url),new nt(t.params),new nt(t.queryParams),new nt(t.fragment),new nt(t.data),t.outlet,t.component,t)}var rc=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},wS="ngNavigationCancelingError";function Bd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=zi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ES(!1,$t.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function ES(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[wS]=!0,n.cancellationCode=e,n}function HV(t){return TS(t)&&zi(t.url)}function TS(t){return!!t&&t[wS]}var qV=(t,e,n,r)=>J(i=>(new _y(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),_y=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Jm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ao(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ao(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ao(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ao(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new fy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new dy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Jm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Jm(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},$d=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},lo=class{constructor(e,n){this.component=e,this.route=n}};function zV(t,e,n){let r=t._root,i=e?e._root:null;return Ka(r,i,n,[r.value])}function GV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function yo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!qT(t)?t:e.get(t):r}function Ka(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ao(e);return t.children.forEach(o=>{WV(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Za(a,n.getContext(o),i)),i}function WV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=KV(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new $d(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ka(t,e,a?a.children:null,r,i):Ka(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new lo(a.outlet.component,o))}else o&&Za(e,a,i),i.canActivateChecks.push(new $d(r)),s.component?Ka(t,null,a?a.children:null,r,i):Ka(t,null,n,r,i);return i}function KV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!qi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!qi(t.url,e.url)||!Cn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yy(t,e)||!Cn(t.queryParams,e.queryParams);case"paramsChange":default:return!yy(t,e)}}function Za(t,e,n){let r=ao(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Za(o,e.children.getContext(s),n):Za(o,null,n):Za(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new lo(e.outlet.component,i)):n.canDeactivateChecks.push(new lo(null,i)):n.canDeactivateChecks.push(new lo(null,i))}function dc(t){return typeof t=="function"}function QV(t){return typeof t=="boolean"}function YV(t){return t&&dc(t.canLoad)}function JV(t){return t&&dc(t.canActivate)}function ZV(t){return t&&dc(t.canActivateChild)}function XV(t){return t&&dc(t.canDeactivate)}function eU(t){return t&&dc(t.canMatch)}function DS(t){return t instanceof $n||t?.name==="EmptyError"}var Ad=Symbol("INITIAL_VALUE");function mo(){return Rt(t=>Ta(t.map(e=>e.pipe(qn(1),il(Ad)))).pipe(J(e=>{for(let n of e)if(n!==!0){if(n===Ad)return Ad;if(n===!1||tU(n))return n}return!0}),wt(e=>e!==Ad),qn(1)))}function tU(t){return zi(t)||t instanceof rc}function nU(t,e){return He(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Q(be(U({},n),{guardsResult:!0})):rU(o,r,i,t).pipe(He(a=>a&&QV(a)?iU(r,s,t,e):Q(a)),J(a=>be(U({},n),{guardsResult:a})))})}function rU(t,e,n,r){return Me(t).pipe(He(i=>uU(i.component,i.route,n,e,r)),_n(i=>i!==!0,!0))}function iU(t,e,n,r){return Me(e).pipe(Hn(i=>Ms(oU(i.route.parent,r),sU(i.route,r),cU(t,i.path,n),aU(t,i.route,n))),_n(i=>i!==!0,!0))}function sU(t,e){return t!==null&&e&&e(new hy(t)),Q(!0)}function oU(t,e){return t!==null&&e&&e(new ly(t)),Q(!0)}function aU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(s=>tl(()=>{let o=uc(e)??n,a=yo(s,o),c=JV(a)?a.canActivate(e,t):Wt(o,()=>a(e,t));return ei(c).pipe(_n())}));return Q(i).pipe(mo())}function cU(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>GV(o)).filter(o=>o!==null).map(o=>tl(()=>{let a=o.guards.map(c=>{let l=uc(o.node)??n,h=yo(c,l),p=ZV(h)?h.canActivateChild(r,t):Wt(l,()=>h(r,t));return ei(p).pipe(_n())});return Q(a).pipe(mo())}));return Q(s).pipe(mo())}function uU(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Q(!0);let o=s.map(a=>{let c=uc(e)??i,l=yo(a,c),h=XV(l)?l.canDeactivate(t,e,n,r):Wt(c,()=>l(t,e,n,r));return ei(h).pipe(_n())});return Q(o).pipe(mo())}function lU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let s=i.map(o=>{let a=yo(o,t),c=YV(a)?a.canLoad(e,n):Wt(t,()=>a(e,n));return ei(c)});return Q(s).pipe(mo(),bS(r))}function bS(t){return Lu(qe(e=>{if(typeof e!="boolean")throw Bd(t,e)}),J(e=>e===!0))}function dU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let s=i.map(o=>{let a=yo(o,t),c=eU(a)?a.canMatch(e,n):Wt(t,()=>a(e,n));return ei(c)});return Q(s).pipe(mo(),bS(r))}var ic=class{constructor(e){this.segmentGroup=e||null}},sc=class extends Error{constructor(e){super(),this.urlTree=e}};function oo(t){return Rs(new ic(t))}function hU(t){return Rs(new G(4e3,!1))}function fU(t){return Rs(ES(!1,$t.GuardRejected))}var Iy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[re])return hU(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:D,title:R}=i,S=Wt(s,()=>a({params:y,data:D,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:R}));if(S instanceof sr)throw new sc(S);n=S}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new sc(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new sr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ie(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},wy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pU(t,e,n,r,i){let s=CS(t,e,n);return s.matched?(r=LV(e,r),dU(r,e,n,i).pipe(J(o=>o===!0?s:U({},wy)))):Q(s)}function CS(t,e,n){if(e.path==="**")return gU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?U({},wy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||lV)(n,t,e);if(!i)return U({},wy);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?U(U({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function gU(t){return{matched:!0,parameters:t.length>0?sS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function XC(t,e,n,r){return n.length>0&&vU(t,n,r)?{segmentGroup:new Ie(e,yU(r,new Ie(n,t.children))),slicedSegments:[]}:n.length===0&&_U(t,n,r)?{segmentGroup:new Ie(t.segments,mU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ie(t.segments,t.children),slicedSegments:n}}function mU(t,e,n,r){let i={};for(let s of n)if(zd(t,e,s)&&!r[dn(s)]){let o=new Ie([],{});i[dn(s)]=o}return U(U({},r),i)}function yU(t,e){let n={};n[re]=e;for(let r of t)if(r.path===""&&dn(r)!==re){let i=new Ie([],{});n[dn(r)]=i}return n}function vU(t,e,n){return n.some(r=>zd(t,e,r)&&dn(r)!==re)}function _U(t,e,n){return n.some(r=>zd(t,e,r))}function zd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function IU(t,e,n){return e.length===0&&!t.children[n]}var Ey=class{};function wU(t,e,n,r,i,s,o="emptyOnly"){return new Ty(t,e,n,r,i,o,s).recognize()}var EU=31,Ty=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Iy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=XC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:n,rootSnapshot:r})=>{let i=new Bt(r,n),s=new jd("",i),o=RV(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new uo([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,n).pipe(J(r=>({children:r,rootSnapshot:n})),Or(r=>{if(r instanceof sc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ic?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(J(o=>o instanceof Bt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Me(s).pipe(Hn(o=>{let a=r.children[o],c=FV(n,o);return this.processSegmentGroup(e,c,a,o,i)}),rl((o,a)=>(o.push(...a),o)),kr(null),gp(),He(o=>{if(o===null)return oo(r);let a=SS(o);return TU(a),Q(a)}))}processSegment(e,n,r,i,s,o,a){return Me(n).pipe(Hn(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(Or(l=>{if(l instanceof ic)return Q(null);throw l}))),_n(c=>!!c),Or(c=>{if(DS(c))return IU(r,i,s)?Q(new Ey):oo(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return dn(r)!==o&&(o===re||!zd(i,s,r))?oo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):oo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=CS(n,i,s);if(!c)return oo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>EU&&(this.allowRedirects=!1));let y=new uo(s,l,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,eS(i),dn(i),i.component??i._loadedComponent??null,i,tS(i)),D=Ud(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(He(S=>this.processSegment(e,r,n,S.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=pU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Rt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Rt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=c,D=new uo(m,p,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,eS(r),dn(r),r.component??r._loadedComponent??null,r,tS(r)),R=Ud(D,o,this.paramsInheritanceStrategy);D.params=Object.freeze(R.params),D.data=Object.freeze(R.data);let{segmentGroup:S,slicedSegments:P}=XC(n,m,y,l);if(P.length===0&&S.hasChildren())return this.processChildren(h,l,S,D).pipe(J(k=>new Bt(D,k)));if(l.length===0&&P.length===0)return Q(new Bt(D,[]));let V=dn(r)===s;return this.processSegment(h,l,S,P,V?re:s,!0,D).pipe(J(k=>new Bt(D,k instanceof Bt?[k]:[])))}))):oo(n)))}getChildConfig(e,n,r){return n.children?Q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Q({routes:n._loadedRoutes,injector:n._loadedInjector}):lU(e,n,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,n).pipe(qe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):fU(n))):Q({routes:[],injector:e})}};function TU(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function DU(t){let e=t.value.routeConfig;return e&&e.path===""}function SS(t){let e=[],n=new Set;for(let r of t){if(!DU(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=SS(r.children);e.push(new Bt(r.value,i))}return e.filter(r=>!n.has(r))}function eS(t){return t.data||{}}function tS(t){return t.resolve||{}}function bU(t,e,n,r,i,s){return He(o=>wU(t,e,n,r,o.extractedUrl,i,s).pipe(J(({state:a,tree:c})=>be(U({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function CU(t,e){return He(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Q(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of AS(c))o.add(l);let a=0;return Me(o).pipe(Hn(c=>s.has(c)?SU(c,r,t,e):(c.data=Ud(c,c.parent,t).resolve,Q(void 0))),qe(()=>a++),xs(1),He(c=>a===o.size?Q(n):Ft))})}function AS(t){let e=t.children.map(n=>AS(n)).flat();return[t,...e]}function SU(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!IS(i)&&(s[ac]=i.title),AU(s,t,e,r).pipe(J(o=>(t._resolvedData=o,t.data=Ud(t,t.parent,n).resolve,null)))}function AU(t,e,n,r){let i=ey(t);if(i.length===0)return Q({});let s={};return Me(i).pipe(He(o=>RU(t[o],e,n,r).pipe(_n(),qe(a=>{if(a instanceof rc)throw Bd(new fo,a);s[o]=a}))),xs(1),pp(s),Or(o=>DS(o)?Ft:Rs(o)))}function RU(t,e,n,r){let i=uc(e)??r,s=yo(t,i),o=s.resolve?s.resolve(e,n):Wt(i,()=>s(e,n));return ei(o)}function Zm(t){return Rt(e=>{let n=t(e);return n?Me(n).pipe(J(()=>e)):Q(e)})}var RS=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===re);return r}getResolvedTitleForRoute(n){return n.data[ac]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(NU),providedIn:"root"})}}return t})(),NU=(()=>{class t extends RS{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(z(WC))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),hc=new $("",{providedIn:"root",factory:()=>({})}),MU=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=rD({type:t,selectors:[["ng-component"]],standalone:!0,features:[iC],decls:1,vars:0,template:function(r,i){r&1&&mm(0,"router-outlet")},dependencies:[UV],encapsulation:2})}}return t})();function Cy(t){let e=t.children&&t.children.map(Cy),n=e?be(U({},t),{children:e}):U({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=MU),n}var oc=new $(""),Sy=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(od)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Q(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=ei(n.loadComponent()).pipe(J(NS),qe(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),bi(()=>{this.componentLoaders.delete(n)})),i=new bs(r,()=>new ut).pipe(Ds());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=xU(r,this.compiler,n,this.onLoadEndListener).pipe(bi(()=>{this.childrenLoaders.delete(r)})),o=new bs(s,()=>new ut).pipe(Ds());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function xU(t,e,n,r){return ei(t.loadChildren()).pipe(J(NS),He(i=>i instanceof Na||Array.isArray(i)?Q(i):Me(e.compileModuleAsync(i))),J(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(oc,[],{optional:!0,self:!0}).flat()),{routes:o.map(Cy),injector:s}}))}function PU(t){return t&&typeof t=="object"&&"default"in t}function NS(t){return PU(t)?t.default:t}var Ay=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(OU),providedIn:"root"})}}return t})(),OU=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),MS=new $(""),xS=new $("");function kU(t,e,n){let r=t.get(xS),i=t.get(ft);return t.get(he).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),LU(t))),{onViewTransitionCreated:c}=r;return c&&Wt(t,()=>c({transition:a,from:e,to:n})),o})}function LU(t){return new Promise(e=>{pm({read:()=>setTimeout(e)},{injector:t})})}var FU=new $(""),Ry=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ut,this.transitionAbortSubject=new ut,this.configLoader=x(Sy),this.environmentInjector=x(Dt),this.urlSerializer=x(cc),this.rootContexts=x(lc),this.location=x(so),this.inputBindingEnabled=x(qd,{optional:!0})!==null,this.titleStrategy=x(RS),this.options=x(hc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(Ay),this.createViewTransition=x(MS,{optional:!0}),this.navigationErrorHandler=x(FU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null;let n=i=>this.events.next(new cy(i)),r=i=>this.events.next(new uy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(be(U(U({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new nt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ja,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wt(s=>s.id!==0),J(s=>be(U({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Rt(s=>{let o=!1,a=!1;return Q(s).pipe(Rt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",$t.SupersededByNewNavigation),Ft;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?be(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Zr(c.id,this.urlSerializer.serialize(c.rawUrl),p,Od.IgnoredSameUrlNavigation)),c.resolve(!1),Ft}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Q(c).pipe(Rt(p=>{let m=this.transitions?.getValue();return this.events.next(new po(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Ft:Promise.resolve(p)}),bU(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),qe(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=be(U({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new kd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:D,extras:R}=c,S=new po(p,this.urlSerializer.serialize(m),y,D);this.events.next(S);let P=vS(this.rootComponentType).snapshot;return this.currentTransition=s=be(U({},c),{targetSnapshot:P,urlAfterRedirects:m,extras:be(U({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Q(s)}else{let p="";return this.events.next(new Zr(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Od.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ft}}),qe(c=>{let l=new iy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),J(c=>(this.currentTransition=s=be(U({},c),{guards:zV(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),nU(this.environmentInjector,c=>this.events.next(c)),qe(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Bd(this.urlSerializer,c.guardsResult);let l=new sy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),wt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",$t.GuardRejected),!1)),Zm(c=>{if(c.guards.canActivateChecks.length)return Q(c).pipe(qe(l=>{let h=new oy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Rt(l=>{let h=!1;return Q(l).pipe(CU(this.paramsInheritanceStrategy,this.environmentInjector),qe({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",$t.NoDataFromResolver)}}))}),qe(l=>{let h=new ay(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Zm(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(qe(m=>{h.component=m}),J(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Ta(l(c.targetSnapshot.root)).pipe(kr(null),qn(1))}),Zm(()=>this.afterPreactivation()),Rt(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Me(h).pipe(J(()=>s)):Q(s)}),J(c=>{let l=jV(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=be(U({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),qe(()=>{this.events.next(new tc)}),qV(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),qn(1),qe({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),mp(this.transitionAbortSubject.pipe(qe(c=>{throw c}))),bi(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",$t.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Or(c=>{if(a=!0,TS(c))this.events.next(new ir(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),HV(c)?this.events.next(new go(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new ec(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let h=Wt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof rc){let{message:p,cancellationCode:m}=Bd(this.urlSerializer,h);this.events.next(new ir(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new go(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(c);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Ft}))}))}cancelNavigationTransition(n,r,i){let s=new ir(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function VU(t){return t!==Ja}var UU=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(jU),providedIn:"root"})}}return t})(),Dy=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},jU=(()=>{class t extends Dy{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=zg(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),PS=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(BU),providedIn:"root"})}}return t})(),BU=(()=>{class t extends PS{constructor(){super(...arguments),this.location=x(so),this.urlSerializer=x(cc),this.options=x(hc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(Ay),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new sr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=vS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof po)this.stateMemento=this.createStateMemento();else if(n instanceof Zr)this.rawUrlTree=r.initialUrl;else if(n instanceof kd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof tc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof ir&&(n.code===$t.GuardRejected||n.code===$t.NoDataFromResolver)?this.restoreHistory(r):n instanceof ec?this.restoreHistory(r,!0):n instanceof Sn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof sr?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=U(U({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=U(U({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=zg(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Qa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Qa||{});function OS(t,e){t.events.pipe(wt(n=>n instanceof Sn||n instanceof ir||n instanceof ec||n instanceof Zr),J(n=>n instanceof Sn||n instanceof Zr?Qa.COMPLETE:(n instanceof ir?n.code===$t.Redirect||n.code===$t.SupersededByNewNavigation:!1)?Qa.REDIRECTING:Qa.FAILED),wt(n=>n!==Qa.REDIRECTING),qn(1)).subscribe(()=>{e()})}function $U(t){throw t}var HU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},or=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=x(id),this.stateManager=x(PS),this.options=x(hc,{optional:!0})||{},this.pendingTasks=x(zr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(Ry),this.urlSerializer=x(cc),this.location=x(so),this.urlHandlingStrategy=x(Ay),this._events=new ut,this.errorHandler=this.options.errorHandler||$U,this.navigated=!1,this.routeReuseStrategy=x(UU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(oc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(qd,{optional:!0}),this.eventsSubscription=new Fe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ir&&r.code!==$t.Redirect&&r.code!==$t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Sn)this.navigated=!0;else if(r instanceof go){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||VU(i.source)},o);this.scheduleNavigation(a,Ja,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}GU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ja,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=U({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Cy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=U(U({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=pS(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return gS(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=zi(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ja,null,r)}navigate(n,r={skipLocationChange:!1}){return zU(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=U({},HU):r===!1?i=U({},qU):i=r,zi(n))return KC(this.currentUrlTree,n,i);let s=this.parseUrl(n);return KC(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return OS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function zU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new G(4008,!1)}function GU(t){return!(t instanceof tc)&&!(t instanceof go)}var UK=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new ut,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof Sn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(zi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:cb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return this.routerLinkInput===null?null:zi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(Ve(or),Ve(Xr),Gg("tabindex"),Ve(Fa),Ve(Jn),Ve(nr))}}static{this.\u0275dir=ji({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ym("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&gm("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ua],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ua],replaceUrl:[2,"replaceUrl","replaceUrl",Ua],routerLink:"routerLink"},standalone:!0,features:[dm,Oa]})}}return t})();var Hd=class{};var WU=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(wt(n=>n instanceof Sn),Hn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=rd(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Me(i).pipe(Ns())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=Q(null);let s=i.pipe(He(o=>o===null?Q(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Me([s,o]).pipe(Ns())}else return s})}static{this.\u0275fac=function(r){return new(r||t)(z(or),z(od),z(Dt),z(Hd),z(Sy))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),kS=new $(""),KU=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof po?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Sn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Zr&&n.code===Od.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ld&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ld(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){wb()}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function jK(t,...e){return Mt([{provide:oc,multi:!0,useValue:t},[],{provide:Xr,useFactory:LS,deps:[or]},{provide:Va,multi:!0,useFactory:FS},e.map(n=>n.\u0275providers)])}function LS(t){return t.routerState.root}function fc(t,e){return{\u0275kind:t,\u0275providers:e}}function FS(){let t=x(Je);return e=>{let n=t.get(Wr);if(e!==n.components[0])return;let r=t.get(or),i=t.get(VS);t.get(Ny)===1&&r.initialNavigation(),t.get(US,null,oe.Optional)?.setUpPreloading(),t.get(kS,null,oe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var VS=new $("",{factory:()=>new ut}),Ny=new $("",{providedIn:"root",factory:()=>1});function QU(){return fc(2,[{provide:Ny,useValue:0},{provide:sd,multi:!0,deps:[Je],useFactory:e=>{let n=e.get(wC,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(or),s=e.get(VS);OS(i,()=>{r(!0)}),e.get(Ry).afterPreactivation=()=>(r(!0),s.closed?Q(void 0):s),i.initialNavigation()}))}}])}function YU(){return fc(3,[{provide:sd,multi:!0,useFactory:()=>{let e=x(or);return()=>{e.setUpLocationChangeListener()}}},{provide:Ny,useValue:2}])}var US=new $("");function JU(t){return fc(0,[{provide:US,useExisting:WU},{provide:Hd,useExisting:t}])}function ZU(){return fc(8,[ZC,{provide:qd,useExisting:ZC}])}function XU(t){let e=[{provide:MS,useValue:kU},{provide:xS,useValue:U({skipNextTransition:!!t?.skipInitialTransition},t)}];return fc(9,e)}var nS=new $("ROUTER_FORROOT_GUARD"),ej=[so,{provide:cc,useClass:fo},or,lc,{provide:Xr,useFactory:LS,deps:[or]},Sy,[]],BK=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[ej,[],{provide:oc,multi:!0,useValue:n},{provide:nS,useFactory:ij,deps:[[or,new je,new Rg]]},{provide:hc,useValue:r||{}},r?.useHash?nj():rj(),tj(),r?.preloadingStrategy?JU(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?sj(r):[],r?.bindToComponentInputs?ZU().\u0275providers:[],r?.enableViewTransitions?XU().\u0275providers:[],oj()]}}static forChild(n){return{ngModule:t,providers:[{provide:oc,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(z(nS,8))}}static{this.\u0275mod=Js({type:t})}static{this.\u0275inj=Ys({})}}return t})();function tj(){return{provide:kS,useFactory:()=>{let t=x(AC),e=x(he),n=x(hc),r=x(Ry),i=x(cc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new KU(i,r,t,e,n)}}}function nj(){return{provide:nr,useClass:TC}}function rj(){return{provide:nr,useClass:km}}function ij(t){return"guarded"}function sj(t){return[t.initialNavigation==="disabled"?YU().\u0275providers:[],t.initialNavigation==="enabledBlocking"?QU().\u0275providers:[]]}var rS=new $("");function oj(){return[{provide:rS,useFactory:FS},{provide:Va,multi:!0,useExisting:rS}]}var _2={};OM(_2,{FirebaseError:()=>pt,SDK_VERSION:()=>fn,_DEFAULT_ENTRY_NAME:()=>yc,_addComponent:()=>Yy,_addOrOverwriteComponent:()=>u2,_apps:()=>ni,_clearComponents:()=>l2,_components:()=>wo,_getProvider:()=>ur,_isFirebaseApp:()=>f0,_isFirebaseServerApp:()=>en,_registerComponent:()=>hn,_removeServiceInstance:()=>h0,_serverApps:()=>Io,deleteApp:()=>ev,getApp:()=>lr,getApps:()=>_c,initializeApp:()=>Xd,initializeServerApp:()=>p0,onLog:()=>g0,registerVersion:()=>Se,setLogLevel:()=>m0});var BS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},aj=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;c||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new xy;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},xy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},cj=function(t){let e=BS(t);return $S.encodeByteArray(e,!0)},pc=function(t){return cj(t).replace(/\./g,"")},Oy=function(t){try{return $S.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uj(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!lj(n)||(t[n]=uj(t[n],e[n]));return t}function lj(t){return t!=="__proto__"}function dj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hj=()=>dj().__FIREBASE_DEFAULTS__,fj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Oy(t[1]);return e&&JSON.parse(e)},Wd=()=>{try{return hj()||fj()||pj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ky=t=>{var e,n;return(n=(e=Wd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Kd=t=>{let e=ky(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ly=()=>{var t;return(t=Wd())===null||t===void 0?void 0:t.config},Fy=t=>{var e;return(e=Wd())===null||e===void 0?void 0:e[`_${t}`]};var Gd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Qd(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pc(JSON.stringify(n)),pc(JSON.stringify(o)),""].join(".")}function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function gj(){var t;let e=(t=Wd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qS(){return typeof window<"u"||Vy()}function Vy(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function zS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function WS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KS(){let t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QS(){return!gj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uy(){try{return typeof indexedDB=="object"}catch{return!1}}function YS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var mj="FirebaseError",pt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mj,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ar.prototype.create)}},ar=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yj(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new pt(i,a,r)}};function yj(t,e){return t.replace(vj,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var vj=/\{\$([^}]+)}/g;function qK(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function JS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(jS(s)&&jS(o)){if(!Gi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function jS(t){return t!==null&&typeof t=="object"}function gc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function _o(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ZS(t,e){let n=new Py(t,e);return n.subscribe.bind(n)}var Py=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_j(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=My),i.error===void 0&&(i.error=My),i.complete===void 0&&(i.complete=My);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function _j(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function My(){}var zK=4*60*60*1e3;function Re(t){return t&&t._delegate?t._delegate:t}var xt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Wi="[DEFAULT]";var jy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Gd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wj(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ij(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ij(t){return t===Wi?void 0:t}function wj(t){return t.instantiationMode==="EAGER"}var mc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new jy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var By=[],ce=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ce||{}),XS={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},Ej=ce.INFO,Tj={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},Dj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Tj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ti=class{constructor(e){this.name=e,this._logLevel=Ej,this._logHandler=Dj,this._userLogHandler=null,By.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};function e0(t){By.forEach(e=>{e.setLogLevel(t)})}function t0(t,e){for(let n of By){let r=null;e&&e.level&&(r=XS[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{let a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(r??i.logLevel)&&t({level:ce[s].toLowerCase(),message:a,args:o,type:i.name})}}}var bj=(t,e)=>e.some(n=>t instanceof n),n0,r0;function Cj(){return n0||(n0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Sj(){return r0||(r0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var i0=new WeakMap,Hy=new WeakMap,s0=new WeakMap,$y=new WeakMap,zy=new WeakMap;function Aj(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(An(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&i0.set(n,t)}).catch(()=>{}),zy.set(e,t),e}function Rj(t){if(Hy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Hy.set(t,e)}var qy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||s0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return An(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function o0(t){qy=t(qy)}function Nj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Yd(this),e,...n);return s0.set(r,e.sort?e.sort():[e]),An(r)}:Sj().includes(t)?function(...e){return t.apply(Yd(this),e),An(i0.get(this))}:function(...e){return An(t.apply(Yd(this),e))}}function Mj(t){return typeof t=="function"?Nj(t):(t instanceof IDBTransaction&&Rj(t),bj(t,Cj())?new Proxy(t,qy):t)}function An(t){if(t instanceof IDBRequest)return Aj(t);if($y.has(t))return $y.get(t);let e=Mj(t);return e!==t&&($y.set(t,e),zy.set(e,t)),e}var Yd=t=>zy.get(t);function c0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=An(o);return r&&o.addEventListener("upgradeneeded",c=>{r(An(o.result),c.oldVersion,c.newVersion,An(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var xj=["get","getKey","getAll","getAllKeys","count"],Pj=["put","add","delete","clear"],Gy=new Map;function a0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gy.get(e))return Gy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Pj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xj.includes(n)))return;let s=function(o,...a){return _(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Gy.set(e,s),s}o0(t=>be(U({},t),{get:(e,n,r)=>a0(e,n)||t.get(e,n,r),has:(e,n)=>!!a0(e,n)||t.has(e,n)}));var Ky=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Oj(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Oj(t){let e=t.getComponent();return e?.type==="VERSION"}var Jd="@firebase/app",Qy="0.10.13";var cr=new ti("@firebase/app"),kj="@firebase/app-compat",Lj="@firebase/analytics-compat",Fj="@firebase/analytics",Vj="@firebase/app-check-compat",Uj="@firebase/app-check",jj="@firebase/auth",Bj="@firebase/auth-compat",$j="@firebase/database",Hj="@firebase/data-connect",qj="@firebase/database-compat",zj="@firebase/functions",Gj="@firebase/functions-compat",Wj="@firebase/installations",Kj="@firebase/installations-compat",Qj="@firebase/messaging",Yj="@firebase/messaging-compat",Jj="@firebase/performance",Zj="@firebase/performance-compat",Xj="@firebase/remote-config",e2="@firebase/remote-config-compat",t2="@firebase/storage",n2="@firebase/storage-compat",r2="@firebase/firestore",i2="@firebase/vertexai-preview",s2="@firebase/firestore-compat",o2="firebase",a2="10.14.1";var yc="[DEFAULT]",c2={[Jd]:"fire-core",[kj]:"fire-core-compat",[Fj]:"fire-analytics",[Lj]:"fire-analytics-compat",[Uj]:"fire-app-check",[Vj]:"fire-app-check-compat",[jj]:"fire-auth",[Bj]:"fire-auth-compat",[$j]:"fire-rtdb",[Hj]:"fire-data-connect",[qj]:"fire-rtdb-compat",[zj]:"fire-fn",[Gj]:"fire-fn-compat",[Wj]:"fire-iid",[Kj]:"fire-iid-compat",[Qj]:"fire-fcm",[Yj]:"fire-fcm-compat",[Jj]:"fire-perf",[Zj]:"fire-perf-compat",[Xj]:"fire-rc",[e2]:"fire-rc-compat",[t2]:"fire-gcs",[n2]:"fire-gcs-compat",[r2]:"fire-fst",[s2]:"fire-fst-compat",[i2]:"fire-vertex","fire-js":"fire-js",[o2]:"fire-js-all"};var ni=new Map,Io=new Map,wo=new Map;function Yy(t,e){try{t.container.addComponent(e)}catch(n){cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function u2(t,e){t.container.addOrOverwriteComponent(e)}function hn(t){let e=t.name;if(wo.has(e))return cr.debug(`There were multiple attempts to register component ${e}.`),!1;wo.set(e,t);for(let n of ni.values())Yy(n,t);for(let n of Io.values())Yy(n,t);return!0}function ur(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function h0(t,e,n=yc){ur(t,e).clearInstance(n)}function f0(t){return t.options!==void 0}function en(t){return t.settings!==void 0}function l2(){wo.clear()}var d2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xt=new ar("app","Firebase",d2);var Zd=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}};var Jy=class extends Zd{constructor(e,n,r,i){let s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{let a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Se(Jd,Qy,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ev(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Xt.create("server-app-deleted")}};var fn=a2;function Xd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:yc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xt.create("bad-app-name",{appName:String(i)});if(n||(n=Ly()),!n)throw Xt.create("no-options");let s=ni.get(i);if(s){if(Gi(n,s.options)&&Gi(r,s.config))return s;throw Xt.create("duplicate-app",{appName:i})}let o=new mc(i);for(let c of wo.values())o.addComponent(c);let a=new Zd(n,r,o);return ni.set(i,a),a}function p0(t,e){if(qS()&&!Vy())throw Xt.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;f0(t)?n=t.options:n=t;let r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;let i=l=>[...l].reduce((h,p)=>Math.imul(31,h)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Xt.create("finalization-registry-not-supported",{});let s=""+i(JSON.stringify(r)),o=Io.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;let a=new mc(s);for(let l of wo.values())a.addComponent(l);let c=new Jy(n,e,s,a);return Io.set(s,c),c}function lr(t=yc){let e=ni.get(t);if(!e&&t===yc&&Ly())return Xd();if(!e)throw Xt.create("no-app",{appName:t});return e}function _c(){return Array.from(ni.values())}function ev(t){return _(this,null,function*(){let e=!1,n=t.name;ni.has(n)?(e=!0,ni.delete(n)):Io.has(n)&&t.decRefCount()<=0&&(Io.delete(n),e=!0),e&&(yield Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)})}function Se(t,e,n){var r;let i=(r=c2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cr.warn(a.join(" "));return}hn(new xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function g0(t,e){if(t!==null&&typeof t!="function")throw Xt.create("invalid-log-argument");t0(t,e)}function m0(t){e0(t)}var h2="firebase-heartbeat-database",f2=1,vc="firebase-heartbeat-store",Wy=null;function y0(){return Wy||(Wy=c0(h2,f2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xt.create("idb-open",{originalErrorMessage:t.message})})),Wy}function p2(t){return _(this,null,function*(){try{let n=(yield y0()).transaction(vc),r=yield n.objectStore(vc).get(v0(t));return yield n.done,r}catch(e){if(e instanceof pt)cr.warn(e.message);else{let n=Xt.create("idb-get",{originalErrorMessage:e?.message});cr.warn(n.message)}}})}function u0(t,e){return _(this,null,function*(){try{let r=(yield y0()).transaction(vc,"readwrite");yield r.objectStore(vc).put(e,v0(t)),yield r.done}catch(n){if(n instanceof pt)cr.warn(n.message);else{let r=Xt.create("idb-set",{originalErrorMessage:n?.message});cr.warn(r.message)}}})}function v0(t){return`${t.name}!${t.options.appId}`}var g2=1024,m2=30*24*60*60*1e3,Zy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Xy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=l0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=m2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){cr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=l0(),{heartbeatsToSend:r,unsentEntries:i}=y2(this._heartbeatsCache.heartbeats),s=pc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return cr.warn(n),""}})}};function l0(){return new Date().toISOString().substring(0,10)}function y2(t,e=g2){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),d0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),d0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Xy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Uy()?YS().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield p2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return u0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return u0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function d0(t){return pc(JSON.stringify({version:2,heartbeats:t})).length}function v2(t){hn(new xt("platform-logger",e=>new Ky(e),"PRIVATE")),hn(new xt("heartbeat",e=>new Zy(e),"PRIVATE")),Se(Jd,Qy,t),Se(Jd,Qy,"esm2017"),Se("fire-js","")}v2("");var I2="firebase",w2="10.14.1";Se(I2,w2,"app");var dr=new Hr("ANGULARFIRE2_VERSION");function To(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Qi=(t,e)=>{let n=e?[e]:_c(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ri=class{constructor(){return Qi(E2)}},E2="app-check";function Eo(){}var eh=class{zone;delegate;constructor(e,n=dp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},tv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Eo,{},Eo,Eo)),n.pipe(qe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ii=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new eh(Zone.current)),this.insideAngular=n.run(()=>new eh(Zone.current,lp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(z(he))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function th(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function T2(t){return th().ngZone.runOutsideAngular(()=>t())}function Ki(t){return th().ngZone.run(()=>t())}function D2(t){return b2(th())(t)}function b2(t){return function(n){return n=n.lift(new tv(t.ngZone)),n.pipe(Pr(t.outsideAngular),xr(t.insideAngular))}}var C2=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ki(()=>t.apply(void 0,r))},Ne=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Ki(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Eo,{},Eo,Eo))),r[s]=C2(r[s],n));let i=T2(()=>t.apply(this,r));if(!e)if(i instanceof se){let s=th();return i.pipe(Pr(s.outsideAngular),xr(s.insideAngular))}else return Ki(()=>i);return i instanceof se?i.pipe(D2):i instanceof Promise?Ki(()=>new Promise((s,o)=>i.then(a=>Ki(()=>s(a)),a=>Ki(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Ki(()=>i)};var pn=class{constructor(e){return e}},hr=class{constructor(){return _c()}};function S2(t){return t&&t.length===1?t[0]:new pn(lr())}var nv=new $("angularfire2._apps"),A2={provide:pn,useFactory:S2,deps:[[new je,nv]]},R2={provide:hr,deps:[[new je,nv]]};function N2(t){return(e,n)=>{let r=n.get(Qt);Se("angularfire",dr.full,"core"),Se("angularfire",dr.full,"app"),Se("angular",oC.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new pn(i)}}function E7(t,...e){return Mt([A2,R2,{provide:nv,useFactory:N2(t),multi:!0,deps:[he,Je,ii,...e]}])}var T7=Ne(Xd,!0);function k0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var L0=k0,F0=new ar("auth","Firebase",k0());var ah=new ti("@firebase/auth");function M2(t,...e){ah.logLevel<=ce.WARN&&ah.warn(`Auth (${fn}): ${t}`,...e)}function rh(t,...e){ah.logLevel<=ce.ERROR&&ah.error(`Auth (${fn}): ${t}`,...e)}function Nn(t,...e){throw bv(t,...e)}function Yi(t,...e){return bv(t,...e)}function V0(t,e,n){let r=Object.assign(Object.assign({},L0()),{[e]:n});return new ar("auth","Firebase",r).create(e,{appName:t.name})}function gr(t){return V0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return F0.create(t,...e)}function K(t,e,...n){if(!t)throw bv(e,...n)}function fr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw rh(e),new Error(e)}function oi(t,e){t||fr(e)}function ov(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function x2(){return _0()==="http:"||_0()==="https:"}function _0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function P2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x2()||GS()||"connection"in navigator)?navigator.onLine:!0}function O2(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ji=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,oi(n>e,"Short delay should be less than long delay!"),this.isMobile=HS()||WS()}get(){return P2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Cv(t,e){oi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var ch=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var k2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var L2=new Ji(3e4,6e4);function mr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function yr(s,o,a,c){return _(this,arguments,function*(t,e,n,r,i={}){return U0(t,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=gc(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return zS()||(y.referrerPolicy="no-referrer"),ch.fetch()(j0(t,t.config.apiHost,n,p),y)}))})}function U0(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},k2),e);try{let i=new av(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw nh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw nh(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw nh(t,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw V0(t,h,l);Nn(t,h)}}catch(i){if(i instanceof pt)throw i;Nn(t,"network-request-failed",{message:String(i)})}})}function Sc(s,o,a,c){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield yr(t,e,n,r,i);return"mfaPendingCredential"in l&&Nn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function j0(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Cv(t.config,i):`${t.config.apiScheme}://${i}`}function F2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var av=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yi(this.auth,"network-request-failed")),L2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function nh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Yi(t,e,r);return i.customData._tokenResponse=n,i}function I0(t){return t!==void 0&&t.enterprise!==void 0}var cv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return F2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function V2(t,e){return _(this,null,function*(){return yr(t,"GET","/v2/recaptchaConfig",mr(t,e))})}function U2(t,e){return _(this,null,function*(){return yr(t,"POST","/v1/accounts:delete",e)})}function B0(t,e){return _(this,null,function*(){return yr(t,"POST","/v1/accounts:lookup",e)})}function Ic(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Sv(t,e=!1){return _(this,null,function*(){let n=Re(t),r=yield n.getIdToken(e),i=Av(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ic(rv(i.auth_time)),issuedAtTime:Ic(rv(i.iat)),expirationTime:Ic(rv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function rv(t){return Number(t)*1e3}function Av(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Oy(n);return i?JSON.parse(i):(rh("Failed to decode base64 JWT payload"),null)}catch(i){return rh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function w0(t){let e=Av(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ec(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof pt&&j2(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function j2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var uv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Tc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function uh(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ec(t,B0(n,{idToken:r}));K(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$0(s.providerUserInfo):[],a=B2(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Rv(t){return _(this,null,function*(){let e=Re(t);yield uh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function B2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $0(t){return t.map(e=>{var{providerId:n}=e,r=hp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function $2(t,e){return _(this,null,function*(){let n=yield U0(t,{},()=>_(this,null,function*(){let r=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=j0(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ch.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function H2(t,e){return _(this,null,function*(){return yr(t,"POST","/v2/accounts:revokeToken",mr(t,e))})}var wc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");let n=w0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield $2(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return fr("not implemented")}};function si(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Do=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=hp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Ec(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Sv(this,e)}reload(){return Rv(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield uh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(en(this.auth.app))return Promise.reject(gr(this.auth));let e=yield this.getIdToken();return yield Ec(this,U2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,D=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=n.createdAt)!==null&&l!==void 0?l:void 0,V=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:k,emailVerified:B,isAnonymous:ae,providerData:q,stsTokenManager:E}=n;K(k&&E,e,"internal-error");let v=wc.fromJSON(this.name,E);K(typeof k=="string",e,"internal-error"),si(p,e.name),si(m,e.name),K(typeof B=="boolean",e,"internal-error"),K(typeof ae=="boolean",e,"internal-error"),si(y,e.name),si(D,e.name),si(R,e.name),si(S,e.name),si(P,e.name),si(V,e.name);let I=new t({uid:k,auth:e,email:m,emailVerified:B,displayName:p,isAnonymous:ae,photoURL:D,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:P,lastLoginAt:V});return q&&Array.isArray(q)&&(I.providerData=q.map(T=>Object.assign({},T))),S&&(I._redirectEventId=S),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new wc;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield uh(s),s})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];K(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?$0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new wc;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Tc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var E0=new Map;function pr(t){oi(t instanceof Function,"Expected a class definition");let e=E0.get(t);return e?(oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,E0.set(t,e),e)}var q2=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),lv=q2;function ih(t,e,n){return`firebase:${t}:${e}:${n}`}var lh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ih(this.userKey,i.apiKey,s),this.fullPersistenceKey=ih("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Do._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(pr(lv),e,r);let i=(yield Promise.all(n.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||pr(lv),o=ih(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=Do._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function T0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(G0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K0(e))return"Blackberry";if(Q0(e))return"Webos";if(q0(e))return"Safari";if((e.includes("chrome/")||z0(e))&&!e.includes("edge/"))return"Chrome";if(W0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function H0(t=Xe()){return/firefox\//i.test(t)}function q0(t=Xe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function z0(t=Xe()){return/crios\//i.test(t)}function G0(t=Xe()){return/iemobile/i.test(t)}function W0(t=Xe()){return/android/i.test(t)}function K0(t=Xe()){return/blackberry/i.test(t)}function Q0(t=Xe()){return/webos/i.test(t)}function Nv(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function z2(t=Xe()){var e;return Nv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function G2(){return KS()&&document.documentMode===10}function Y0(t=Xe()){return Nv(t)||W0(t)||Q0(t)||K0(t)||/windows phone/i.test(t)||G0(t)}function J0(t,e=[]){let n;switch(t){case"Browser":n=T0(Xe());break;case"Worker":n=`${T0(Xe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fn}/${r}`}var dv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function W2(n){return _(this,arguments,function*(t,e={}){return yr(t,"GET","/v2/passwordPolicy",mr(t,e))})}var K2=6,hv=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:K2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var fv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dh(this),this.idTokenSubscription=new dh(this),this.beforeStateQueue=new dv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pr(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield lh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield B0(this,{idToken:e}),r=yield Do._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(en(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield uh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=O2()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(en(this.app))return Promise.reject(gr(this));let n=e?Re(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return en(this.app)?Promise.reject(gr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return en(this.app)?Promise.reject(gr(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(pr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield W2(this),n=new hv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ar("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield H2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&pr(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=yield lh.create(this,[pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&M2(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Xi(t){return Re(t)}var dh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZS(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var vh={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q2(t){vh=t}function Z0(t){return vh.loadJS(t)}function Y2(){return vh.recaptchaEnterpriseScript}function J2(){return vh.gapiScript}function X0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Z2="recaptcha-enterprise",X2="NO_RECAPTCHA",pv=class{constructor(e){this.type=Z2,this.auth=Xi(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>_(this,null,function*(){V2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new cv(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;I0(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(X2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&I0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Y2();c.length!==0&&(c+=a),Z0(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function D0(t,e,n,r=!1){return _(this,null,function*(){let i=new pv(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function gv(t,e,n,r){return _(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield D0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield D0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Mv(t,e){let n=ur(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Gi(s,e??{}))return i;Nn(i,"already-initialized")}return n.initialize({options:e})}function eB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(pr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function xv(t,e,n){let r=Xi(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=eA(e),{host:o,port:a}=tB(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||nB()}function eA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tB(t){let e=eA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:b0(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:b0(o)}}}function b0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function nB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Dc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fr("not implemented")}_getIdTokenResponse(e){return fr("not implemented")}_linkToIdToken(e,n){return fr("not implemented")}_getReauthenticationResolver(e){return fr("not implemented")}};function rB(t,e){return _(this,null,function*(){return yr(t,"POST","/v1/accounts:signUp",e)})}function iB(t,e){return _(this,null,function*(){return Sc(t,"POST","/v1/accounts:signInWithPassword",mr(t,e))})}function sB(t,e){return _(this,null,function*(){return yr(t,"POST","/v1/accounts:sendOobCode",mr(t,e))})}function oB(t,e){return _(this,null,function*(){return sB(t,e)})}function aB(t,e){return _(this,null,function*(){return Sc(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,e))})}function cB(t,e){return _(this,null,function*(){return Sc(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,e))})}var bc=class t extends Dc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gv(e,n,"signInWithPassword",iB);case"emailLink":return aB(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gv(e,r,"signUpPassword",rB);case"emailLink":return cB(e,{idToken:n,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function iv(t,e){return _(this,null,function*(){return Sc(t,"POST","/v1/accounts:signInWithIdp",mr(t,e))})}function uB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lB(t){let e=vo(_o(t)).link,n=e?vo(_o(e)).deep_link_id:null,r=vo(_o(t)).deep_link_id;return(r?vo(_o(r)).link:null)||r||n||e||t}var hh=class t{constructor(e){var n,r,i,s,o,a;let c=vo(_o(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=uB((i=c.mode)!==null&&i!==void 0?i:null);K(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=lB(e);try{return new t(n)}catch{return null}}};var tA=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return bc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=hh.parseLink(r);return K(i,"argument-error"),bc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),fh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var mv=class extends fh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function dB(t,e){return _(this,null,function*(){return Sc(t,"POST","/v1/accounts:signUp",mr(t,e))})}var bo=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let s=yield Do._fromIdTokenResponse(e,r,i),o=C0(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=C0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function C0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var yv=class t extends pt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function nA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?yv._fromErrorAndOperation(t,s,e,r):s})}function hB(t,e,n=!1){return _(this,null,function*(){let r=yield Ec(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return bo._forOperation(t,"link",r)})}function fB(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(en(r.app))return Promise.reject(gr(r));let i="reauthenticate";try{let s=yield Ec(t,nA(r,i,e,t),n);K(s.idToken,r,"internal-error");let o=Av(s.idToken);K(o,r,"internal-error");let{sub:a}=o;return K(t.uid===a,r,"user-mismatch"),bo._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Nn(r,"user-mismatch"),s}})}function rA(t,e,n=!1){return _(this,null,function*(){if(en(t.app))return Promise.reject(gr(t));let r="signIn",i=yield nA(t,r,e),s=yield bo._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Pv(t,e){return _(this,null,function*(){return rA(Xi(t),e)})}function pB(t,e,n){var r;K(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),K(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(K(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(K(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function iA(t){return _(this,null,function*(){let e=Xi(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Ov(t,e,n){return _(this,null,function*(){if(en(t.app))return Promise.reject(gr(t));let r=Xi(t),o=yield gv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dB).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&iA(t),c}),a=yield bo._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function kv(t,e,n){return en(t.app)?Promise.reject(gr(t)):Pv(Re(t),tA.credential(e,n)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&iA(t),r}))}function Lv(t,e){return _(this,null,function*(){let n=Re(t),i={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&pB(n.auth,i,e);let{email:s}=yield oB(n.auth,i);s!==t.email&&(yield t.reload())})}function Fv(t,e,n,r){return Re(t).onIdTokenChanged(e,n,r)}function Vv(t,e,n){return Re(t).beforeAuthStateChanged(e,n)}var ph="__sak";var gh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ph,"1"),this.storage.removeItem(ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var gB=1e3,mB=10,yB=(()=>{class t extends gh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);G2()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,mB):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},gB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Nr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Nr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Nr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),sA=yB;var vB=(()=>{class t extends gh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Uv=vB;function _B(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var IB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,o)})),l=yield _B(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function oA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var vv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=oA("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Rn(){return window}function wB(t){Rn().location.href=t}function aA(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}function EB(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function TB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function DB(){return aA()?self:null}var cA="firebaseLocalStorageDb",bB=1,mh="firebaseLocalStorage",uA="fbase_key",Zi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function _h(t,e){return t.transaction([mh],e?"readwrite":"readonly").objectStore(mh)}function CB(){let t=indexedDB.deleteDatabase(cA);return new Zi(t).toPromise()}function _v(){let t=indexedDB.open(cA,bB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(mh,{keyPath:uA})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(mh)?e(r):(r.close(),yield CB(),e(yield _v()))}))})}function S0(t,e,n){return _(this,null,function*(){let r=_h(t,!0).put({[uA]:e,value:n});return new Zi(r).toPromise()})}function SB(t,e){return _(this,null,function*(){let n=_h(t,!1).get(e),r=yield new Zi(n).toPromise();return r===void 0?null:r.value})}function A0(t,e){let n=_h(t,!0).delete(e);return new Zi(n).toPromise()}var AB=800,RB=3,NB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield _v(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>RB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return aA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=IB._getInstance(DB()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield EB(),!this.activeServiceWorker)return;this.sender=new vv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||TB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield _v();return yield S0(n,ph,"1"),yield A0(n,ph),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>S0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>SB(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>A0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=_h(s,!1).getAll();return new Zi(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),AB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),lA=NB;var M7=X0("rcb"),x7=new Ji(3e4,6e4);function MB(t,e){return e?pr(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Cc=class extends Dc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return iv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return iv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function xB(t){return rA(t.auth,new Cc(t),t.bypassAuthState)}function PB(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),fB(n,new Cc(t),t.bypassAuthState)}function OB(t){return _(this,null,function*(){let{auth:e,user:n}=t;return K(n,e,"internal-error"),hB(n,new Cc(t),t.bypassAuthState)})}var Iv=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xB;case"linkViaPopup":case"linkViaRedirect":return OB;case"reauthViaPopup":case"reauthViaRedirect":return PB;default:Nn(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var P7=new Ji(2e3,1e4);var kB="pendingRedirect",sh=new Map,wv=class t extends Iv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=sh.get(this.auth._key());if(!e){try{let r=(yield LB(this.resolver,this.auth))?yield Nr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Nr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Nr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function LB(t,e){return _(this,null,function*(){let n=UB(e),r=VB(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function FB(t,e){sh.set(t._key(),e)}function VB(t){return pr(t._redirectPersistence)}function UB(t){return ih(kB,t.config.apiKey,t.name)}function jB(t,e,n=!1){return _(this,null,function*(){if(en(t.app))return Promise.reject(gr(t));let r=Xi(t),i=MB(r,e),o=yield new wv(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var BB=10*60*1e3,Ev=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$B(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BB&&this.cachedEventUids.clear(),this.cachedEventUids.has(R0(e))}saveEventToCache(e){this.cachedEventUids.add(R0(e)),this.lastProcessedEventTime=Date.now()}};function R0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function $B(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dA(t);default:return!1}}function HB(n){return _(this,arguments,function*(t,e={}){return yr(t,"GET","/v1/projects",e)})}var qB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zB=/^https?/;function GB(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield HB(t);for(let n of e)try{if(WB(n))return}catch{}Nn(t,"unauthorized-domain")})}function WB(t){let e=ov(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!zB.test(n))return!1;if(qB.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var KB=new Ji(3e4,6e4);function N0(){let t=Rn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QB(t){return new Promise((e,n)=>{var r,i,s;function o(){N0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N0(),n(Yi(t,"network-request-failed"))},timeout:KB.get()})}if(!((i=(r=Rn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Rn().gapi)===null||s===void 0)&&s.load)o();else{let a=X0("iframefcb");return Rn()[a]=()=>{gapi.load?o():n(Yi(t,"network-request-failed"))},Z0(`${J2()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw oh=null,e})}var oh=null;function YB(t){return oh=oh||QB(t),oh}var JB=new Ji(5e3,15e3),ZB="__/auth/iframe",XB="emulator/auth/iframe",e$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function n$(t){let e=t.config;K(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Cv(e,XB):`https://${t.config.authDomain}/${ZB}`,r={apiKey:e.apiKey,appName:t.name,v:fn},i=t$.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${gc(r).slice(1)}`}function r$(t){return _(this,null,function*(){let e=yield YB(t),n=Rn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:n$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e$,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Yi(t,"network-request-failed"),a=Rn().setTimeout(()=>{s(o)},JB.get());function c(){Rn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var i$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s$=500,o$=600,a$="_blank",c$="http://localhost",yh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function u$(t,e,n,r=s$,i=o$){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},i$),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Xe().toLowerCase();n&&(a=z0(l)?a$:n),H0(l)&&(e=e||c$,c.scrollbars="yes");let h=Object.entries(c).reduce((m,[y,D])=>`${m}${y}=${D},`,"");if(z2(l)&&a!=="_self")return l$(e||"",a),new yh(null);let p=window.open(e||"",a,h);K(p,t,"popup-blocked");try{p.focus()}catch{}return new yh(p)}function l$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var d$="__/auth/handler",h$="emulator/auth/handler",f$=encodeURIComponent("fac");function M0(t,e,n,r,i,s){return _(this,null,function*(){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fn,eventId:i};if(e instanceof fh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",JS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof mv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield t._getAppCheckToken(),l=c?`#${f$}=${encodeURIComponent(c)}`:"";return`${p$(t)}?${gc(a).slice(1)}${l}`})}function p$({config:t}){return t.emulator?Cv(t,h$):`https://${t.authDomain}/${d$}`}var sv="webStorageSupport",Tv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uv,this._completeRedirectFn=jB,this._overrideRedirectResult=FB}_openPopup(e,n,r,i){return _(this,null,function*(){var s;oi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield M0(e,n,r,ov(),i);return u$(e,o,oA())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield M0(e,n,r,ov(),i);return wB(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(oi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield r$(e),r=new Ev(e);return n.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sv,{type:sv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[sv];o!==void 0&&n(!!o),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y0()||q0()||Nv()}},hA=Tv;var x0="@firebase/auth",P0="1.7.9";var Dv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function g$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m$(t){hn(new xt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J0(t)},l=new fv(r,i,s,c);return eB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hn(new xt("auth-internal",e=>{let n=Xi(e.getProvider("auth").getImmediate());return(r=>new Dv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(x0,P0,g$(t)),Se(x0,P0,"esm2017")}var y$=5*60,v$=Fy("authIdTokenMaxAge")||y$,O0=null,_$=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>v$)return;let i=n?.token;O0!==i&&(O0=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function jv(t=lr()){let e=ur(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Mv(t,{popupRedirectResolver:hA,persistence:[lA,sA,Uv]}),r=Fy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=_$(s.toString());Vv(n,o,()=>o(n.currentUser)),Fv(n,a=>o(a))}}let i=ky("auth");return i&&xv(n,`http://${i}`),n}function I$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Q2({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Yi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",I$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m$("Browser");var fA="auth",Ac=class{constructor(e){return e}},es=class{constructor(){return Qi(fA)}};var Bv=new $("angularfire2.auth-instances");function lH(t,e){let n=To(fA,t,e);return n&&new Ac(n)}function dH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ac(r)}}var hH={provide:es,deps:[[new je,Bv]]},fH={provide:Ac,useFactory:lH,deps:[[new je,Bv],pn]};function mQ(t,...e){return Se("angularfire",dr.full,"auth"),Mt([fH,hH,{provide:Bv,useFactory:dH(t),multi:!0,deps:[he,Je,ii,hr,[new je,ri],...e]}])}var yQ=Ne(Ov,!0);var vQ=Ne(jv,!0);var _Q=Ne(Lv,!0);var IQ=Ne(kv,!0);var pA=(a=>(a[a.pendiente=0]="pendiente",a[a.aceptado=1]="aceptado",a[a.canceladoPaciente=2]="canceladoPaciente",a[a.canceladoEspecialista=3]="canceladoEspecialista",a[a.canceladoAdmin=4]="canceladoAdmin",a[a.rechazado=5]="rechazado",a[a.realizado=6]="realizado",a))(pA||{});var gA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mA={};var ai,$v;(function(){var t;function e(E,v){function I(){}I.prototype=v.prototype,E.D=v.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(T,b,A){for(var w=Array(arguments.length-2),Vn=2;Vn<arguments.length;Vn++)w[Vn-2]=arguments[Vn];return v.prototype[b].apply(T,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=E.g[0],I=E.g[1],b=E.g[2];var A=E.g[3],w=v+(A^I&(b^A))+T[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=A+(b^v&(I^b))+T[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(I^A&(v^I))+T[2]+606105819&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(v^b&(A^v))+T[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(A^I&(b^A))+T[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(b^v&(I^b))+T[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(I^A&(v^I))+T[6]+2821735955&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(v^b&(A^v))+T[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(A^I&(b^A))+T[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(b^v&(I^b))+T[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(I^A&(v^I))+T[10]+4294925233&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(v^b&(A^v))+T[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(A^I&(b^A))+T[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(b^v&(I^b))+T[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(I^A&(v^I))+T[14]+2792965006&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(v^b&(A^v))+T[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(b^A&(I^b))+T[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(v^I))+T[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(A^v))+T[11]+643717713&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(b^A))+T[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^A&(I^b))+T[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(v^I))+T[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(A^v))+T[15]+3634488961&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(b^A))+T[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^A&(I^b))+T[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(v^I))+T[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(A^v))+T[3]+4107603335&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(b^A))+T[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^A&(I^b))+T[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(v^I))+T[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(A^v))+T[7]+1735328473&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(b^A))+T[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(I^b^A)+T[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^b)+T[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^I)+T[11]+1839030562&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^v)+T[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^A)+T[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^b)+T[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^I)+T[7]+4139469664&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^v)+T[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^A)+T[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^b)+T[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^I)+T[3]+3572445317&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^v)+T[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^A)+T[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^b)+T[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^I)+T[15]+530742520&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^v)+T[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(b^(I|~A))+T[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~b))+T[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~I))+T[14]+2878612391&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~v))+T[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~A))+T[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~b))+T[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~I))+T[10]+4293915773&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~v))+T[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~A))+T[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~b))+T[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~I))+T[6]+2734768916&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~v))+T[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~A))+T[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~b))+T[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~I))+T[2]+718787259&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~v))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+A&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var I=v-this.blockSize,T=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=I;)i(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<v;)if(T[b++]=E.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=E[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var I=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=I&255,I/=256;for(this.u(E),E=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)E[I++]=this.g[v]>>>T&255;return E};function s(E,v){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=v(E)}function o(E,v){this.h=v;for(var I=[],T=!0,b=E.length-1;0<=b;b--){var A=E[b]|0;T&&A==v||(I[b]=A,T=!1)}this.g=I}var a={};function c(E){return-128<=E&&128>E?s(E,function(v){return new o([v|0],0>v?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return S(l(-E));for(var v=[],I=1,T=0;E>=I;T++)v[T]=E/I|0,I*=4294967296;return new o(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return S(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=p,b=0;b<E.length;b+=8){var A=Math.min(8,E.length-b),w=parseInt(E.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(w))):(T=T.j(I),T=T.add(l(w)))}return T}var p=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-S(this).m();for(var E=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);E+=(0<=T?T:4294967296+T)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(R(this))return"-"+S(this).toString(E);for(var v=l(Math.pow(E,6)),I=this,T="";;){var b=B(I,v).g;I=P(I,b.j(v));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=b,D(I))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function R(E){return E.h==-1}t.l=function(E){return E=P(this,E),R(E)?-1:D(E)?0:1};function S(E){for(var v=E.g.length,I=[],T=0;T<v;T++)I[T]=~E.g[T];return new o(I,~E.h).add(m)}t.abs=function(){return R(this)?S(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],T=0,b=0;b<=v;b++){var A=T+(this.i(b)&65535)+(E.i(b)&65535),w=(A>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);T=w>>>16,A&=65535,w&=65535,I[b]=w<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function P(E,v){return E.add(S(v))}t.j=function(E){if(D(this)||D(E))return p;if(R(this))return R(E)?S(this).j(S(E)):S(S(this).j(E));if(R(E))return S(this.j(S(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<E.g.length;b++){var A=this.i(T)>>>16,w=this.i(T)&65535,Vn=E.i(b)>>>16,ea=E.i(b)&65535;I[2*T+2*b]+=w*ea,V(I,2*T+2*b),I[2*T+2*b+1]+=A*ea,V(I,2*T+2*b+1),I[2*T+2*b+1]+=w*Vn,V(I,2*T+2*b+1),I[2*T+2*b+2]+=A*Vn,V(I,2*T+2*b+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new o(I,0)};function V(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function k(E,v){this.g=E,this.h=v}function B(E,v){if(D(v))throw Error("division by zero");if(D(E))return new k(p,p);if(R(E))return v=B(S(E),v),new k(S(v.g),S(v.h));if(R(v))return v=B(E,S(v)),new k(S(v.g),v.h);if(30<E.g.length){if(R(E)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,T=v;0>=T.l(E);)I=ae(I),T=ae(T);var b=q(I,1),A=q(T,1);for(T=q(T,2),I=q(I,2);!D(T);){var w=A.add(T);0>=w.l(E)&&(b=b.add(I),A=w),T=q(T,1),I=q(I,1)}return v=P(E,b.j(v)),new k(b,v)}for(b=p;0<=E.l(v);){for(I=Math.max(1,Math.floor(E.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(I),w=A.j(v);R(w)||0<w.l(E);)I-=T,A=l(I),w=A.j(v);D(A)&&(A=m),b=b.add(A),E=P(E,w)}return new k(b,E)}t.A=function(E){return B(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&E.i(T);return new o(I,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|E.i(T);return new o(I,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^E.i(T);return new o(I,this.h^E.h)};function ae(E){for(var v=E.g.length+1,I=[],T=0;T<v;T++)I[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(I,E.h)}function q(E,v){var I=v>>5;v%=32;for(var T=E.g.length-I,b=[],A=0;A<T;A++)b[A]=0<v?E.i(A+I)>>>v|E.i(A+I+1)<<32-v:E.i(A+I);return new o(b,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$v=mA.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,ai=mA.Integer=o}).apply(typeof gA<"u"?gA:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vr={};var Hv,pH,Co,qv,Rc,wh,zv,Gv,Wv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var N=f++;return{value:d(N,u[N]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function D(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,N){for(var L=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)L[Ee-2]=arguments[Ee];return d.prototype[C].apply(g,L)}}function R(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function S(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,N=g.length||0;u.length=C+N;for(let L=0;L<N;L++)u[C+L]=g[L]}else u.push(g)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(u){return/^[\s\xa0]*$/.test(u)}function k(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function B(u){return B[" "](u),u}B[" "]=function(){};var ae=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function q(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function E(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let N=0;N<I.length;N++)f=I[N],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function b(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function A(u){a.setTimeout(()=>{throw u},0)}function w(){var u=Tf;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Vn{constructor(){this.h=this.g=null}add(d,f){let g=ea.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ea=new P(()=>new eM,u=>u.reset());class eM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ta,na=!1,Tf=new Vn,gw=()=>{let u=a.Promise.resolve(void 0);ta=()=>{u.then(tM)}};var tM=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){A(f)}var d=ea;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}na=!1};function Cr(){this.s=this.s,this.C=this.C}Cr.prototype.s=!1,Cr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Cr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var nM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function ra(u,d){if(st.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ae){e:{try{B(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:rM[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ra.aa.h.call(this)}}D(ra,st);var rM={2:"touch",3:"pen",4:"mouse"};ra.prototype.h=function(){ra.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ia="closure_listenable_"+(1e6*Math.random()|0),iM=0;function sM(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++iM,this.da=this.fa=!1}function uu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function lu(u){this.src=u,this.g={},this.h=0}lu.prototype.add=function(u,d,f,g,C){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var L=bf(u,d,g,C);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new sM(d,this.src,N,!!g,C),d.fa=f,u.push(d)),d};function Df(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),N;(N=0<=C)&&Array.prototype.splice.call(g,C,1),N&&(uu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function bf(u,d,f,g){for(var C=0;C<u.length;++C){var N=u[C];if(!N.da&&N.listener==d&&N.capture==!!f&&N.ha==g)return C}return-1}var Cf="closure_lm_"+(1e6*Math.random()|0),Sf={};function mw(u,d,f,g,C){if(g&&g.once)return vw(u,d,f,g,C);if(Array.isArray(d)){for(var N=0;N<d.length;N++)mw(u,d[N],f,g,C);return null}return f=Mf(f),u&&u[ia]?u.K(d,f,l(g)?!!g.capture:!!g,C):yw(u,d,f,!1,g,C)}function yw(u,d,f,g,C,N){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Ee=Rf(u);if(Ee||(u[Cf]=Ee=new lu(u)),f=Ee.add(d,f,g,L,N),f.proxy)return f;if(g=oM(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)nM||(C=L),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(Iw(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function oM(){function u(f){return d.call(u.src,u.listener,f)}let d=aM;return u}function vw(u,d,f,g,C){if(Array.isArray(d)){for(var N=0;N<d.length;N++)vw(u,d[N],f,g,C);return null}return f=Mf(f),u&&u[ia]?u.L(d,f,l(g)?!!g.capture:!!g,C):yw(u,d,f,!0,g,C)}function _w(u,d,f,g,C){if(Array.isArray(d))for(var N=0;N<d.length;N++)_w(u,d[N],f,g,C);else g=l(g)?!!g.capture:!!g,f=Mf(f),u&&u[ia]?(u=u.i,d=String(d).toString(),d in u.g&&(N=u.g[d],f=bf(N,f,g,C),-1<f&&(uu(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete u.g[d],u.h--)))):u&&(u=Rf(u))&&(d=u.g[d.toString()],u=-1,d&&(u=bf(d,f,g,C)),(f=-1<u?d[u]:null)&&Af(f))}function Af(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[ia])Df(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(Iw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Rf(d))?(Df(f,u),f.h==0&&(f.src=null,d[Cf]=null)):uu(u)}}}function Iw(u){return u in Sf?Sf[u]:Sf[u]="on"+u}function aM(u,d){if(u.da)u=!0;else{d=new ra(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Af(u),u=f.call(g,d)}return u}function Rf(u){return u=u[Cf],u instanceof lu?u:null}var Nf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mf(u){return typeof u=="function"?u:(u[Nf]||(u[Nf]=function(d){return u.handleEvent(d)}),u[Nf])}function ot(){Cr.call(this),this.i=new lu(this),this.M=this,this.F=null}D(ot,Cr),ot.prototype[ia]=!0,ot.prototype.removeEventListener=function(u,d,f,g){_w(this,u,d,f,g)};function _t(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new st(d,u);else if(d instanceof st)d.target=d.target||u;else{var C=d;d=new st(g,u),T(d,C)}if(C=!0,f)for(var N=f.length-1;0<=N;N--){var L=d.g=f[N];C=du(L,g,!0,d)&&C}if(L=d.g=u,C=du(L,g,!0,d)&&C,C=du(L,g,!1,d)&&C,f)for(N=0;N<f.length;N++)L=d.g=f[N],C=du(L,g,!1,d)&&C}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)uu(f[g]);delete u.g[d],u.h--}}this.F=null},ot.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},ot.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function du(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,N=0;N<d.length;++N){var L=d[N];if(L&&!L.da&&L.capture==f){var Ee=L.listener,tt=L.ha||L.src;L.fa&&Df(u.i,L),C=Ee.call(tt,g)!==!1&&C}}return C&&!g.defaultPrevented}function ww(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Ew(u){u.g=ww(()=>{u.g=null,u.i&&(u.i=!1,Ew(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class cM extends Cr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ew(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sa(u){Cr.call(this),this.h=u,this.g={}}D(sa,Cr);var Tw=[];function Dw(u){q(u.g,function(d,f){this.g.hasOwnProperty(f)&&Af(d)},u),u.g={}}sa.prototype.N=function(){sa.aa.N.call(this),Dw(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xf=a.JSON.stringify,uM=a.JSON.parse,lM=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Pf(){}Pf.prototype.h=null;function bw(u){return u.h||(u.h=u.i())}function Cw(){}var oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Of(){st.call(this,"d")}D(Of,st);function kf(){st.call(this,"c")}D(kf,st);var yi={},Sw=null;function hu(){return Sw=Sw||new ot}yi.La="serverreachability";function Aw(u){st.call(this,yi.La,u)}D(Aw,st);function aa(u){let d=hu();_t(d,new Aw(d))}yi.STAT_EVENT="statevent";function Rw(u,d){st.call(this,yi.STAT_EVENT,u),this.stat=d}D(Rw,st);function It(u){let d=hu();_t(d,new Rw(d,u))}yi.Ma="timingevent";function Nw(u,d){st.call(this,yi.Ma,u),this.size=d}D(Nw,st);function ca(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function ua(){this.g=!0}ua.prototype.xa=function(){this.g=!1};function dM(u,d,f,g,C,N){u.info(function(){if(u.g)if(N)for(var L="",Ee=N.split("&"),tt=0;tt<Ee.length;tt++){var me=Ee[tt].split("=");if(1<me.length){var at=me[0];me=me[1];var ct=at.split("_");L=2<=ct.length&&ct[1]=="type"?L+(at+"="+me+"&"):L+(at+"=redacted&")}}else L=null;else L=N;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function hM(u,d,f,g,C,N,L){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+N+" "+L})}function gs(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+pM(u,f)+(g?" "+g:"")})}function fM(u,d){u.info(function(){return"TIMEOUT: "+d})}ua.prototype.info=function(){};function pM(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var N=C[0];if(N!="noop"&&N!="stop"&&N!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return xf(f)}catch{return d}}var fu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lf;function pu(){}D(pu,Pf),pu.prototype.g=function(){return new XMLHttpRequest},pu.prototype.i=function(){return{}},Lf=new pu;function Sr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xw}function xw(){this.i=null,this.g="",this.h=!1}var Pw={},Ff={};function Vf(u,d,f){u.L=1,u.v=vu(Un(d)),u.m=f,u.P=!0,Ow(u,null)}function Ow(u,d){u.F=Date.now(),gu(u),u.A=Un(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),Kw(f.i,"t",g),u.C=0,f=u.j.J,u.h=new xw,u.g=hE(u.j,f?d:null,!u.m),0<u.O&&(u.M=new cM(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(Tw[0]=C.toString()),C=Tw);for(var N=0;N<C.length;N++){var L=mw(f,C[N],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),aa(),dM(u.i,u.u,u.A,u.l,u.R,u.m)}Sr.prototype.ca=function(u){u=u.target;let d=this.M;d&&jn(u)==3?d.j():this.Y(u)},Sr.prototype.Y=function(u){try{if(u==this.g)e:{let ct=jn(this.g);var d=this.g.Ba();let vs=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||tE(this.g)))){this.J||ct!=4||d==7||(d==8||0>=vs?aa(3):aa(2)),Uf(this);var f=this.g.Z();this.X=f;t:if(kw(this)){var g=tE(this.g);u="";var C=g.length,N=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),la(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(N&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,hM(this.i,this.u,this.A,this.l,this.R,ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,tt=this.g;if((Ee=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Ee)){var me=Ee;break t}}me=null}if(f=me)gs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jf(this,f);else{this.o=!1,this.s=3,It(12),vi(this),la(this);break e}}if(this.P){f=!0;let rn;for(;!this.J&&this.C<L.length;)if(rn=gM(this,L),rn==Ff){ct==4&&(this.s=4,It(14),f=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Pw){this.s=4,It(15),gs(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else gs(this.i,this.l,rn,null),jf(this,rn);if(kw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||L.length!=0||this.h.h||(this.s=1,It(16),f=!1),this.o=this.o&&f,!f)gs(this.i,this.l,L,"[Invalid Chunked Response]"),vi(this),la(this);else if(0<L.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Gf(at),at.M=!0,It(11))}}else gs(this.i,this.l,L,null),jf(this,L);ct==4&&vi(this),this.o&&!this.J&&(ct==4?cE(this.j,this):(this.o=!1,gu(this)))}else xM(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),vi(this),la(this)}}}catch{}finally{}};function kw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function gM(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Ff:(f=Number(d.substring(f,g)),isNaN(f)?Pw:(g+=1,g+f>d.length?Ff:(d=d.slice(g,g+f),u.C=g+f,d)))}Sr.prototype.cancel=function(){this.J=!0,vi(this)};function gu(u){u.S=Date.now()+u.I,Lw(u,u.I)}function Lw(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ca(m(u.ba,u),d)}function Uf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Sr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(fM(this.i,this.A),this.L!=2&&(aa(),It(17)),vi(this),this.s=2,la(this)):Lw(this,this.S-u)};function la(u){u.j.G==0||u.J||cE(u.j,u)}function vi(u){Uf(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Dw(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function jf(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Bf(f.h,u))){if(!u.K&&Bf(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Tu(f),wu(f);else break e;zf(f),It(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ca(m(f.Za,f),6e3));if(1>=Uw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ii(f,11)}else if((u.K||f.g==u)&&Tu(f),!V(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let me=C[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let at=me[3];at!=null&&(f.la=at,f.j.info("VER="+f.la));let ct=me[4];ct!=null&&(f.Aa=ct,f.j.info("SVER="+f.Aa));let vs=me[5];vs!=null&&typeof vs=="number"&&0<vs&&(g=1.5*vs,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let rn=u.g;if(rn){let bu=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bu){var N=g.h;N.g||bu.indexOf("spdy")==-1&&bu.indexOf("quic")==-1&&bu.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&($f(N,N.h),N.h=null))}if(g.D){let Wf=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wf&&(g.ya=Wf,Ae(g.I,g.D,Wf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=u;if(g.qa=dE(g,g.J?g.ia:null,g.W),L.K){jw(g.h,L);var Ee=L,tt=g.L;tt&&(Ee.I=tt),Ee.B&&(Uf(Ee),gu(Ee)),g.g=L}else oE(g);0<f.i.length&&Eu(f)}else me[0]!="stop"&&me[0]!="close"||Ii(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Ii(f,7):qf(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}aa(4)}catch{}}var mM=class{constructor(u,d){this.g=u,this.map=d}};function Fw(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Uw(u){return u.h?1:u.g?u.g.size:0}function Bf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function $f(u,d){u.g?u.g.add(d):u.h=d}function jw(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}Fw.prototype.cancel=function(){if(this.i=Bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Bw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return R(u.i)}function yM(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function vM(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function $w(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=vM(u),g=yM(u),C=g.length,N=0;N<C;N++)d.call(void 0,g[N],f&&f[N],u)}var Hw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _M(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var N=u[f].substring(0,g);C=u[f].substring(g+1)}else N=u[f];d(N,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function _i(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _i){this.h=u.h,mu(this,u.j),this.o=u.o,this.g=u.g,yu(this,u.s),this.l=u.l;var d=u.i,f=new fa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),qw(this,f),this.m=u.m}else u&&(d=String(u).match(Hw))?(this.h=!1,mu(this,d[1]||"",!0),this.o=da(d[2]||""),this.g=da(d[3]||"",!0),yu(this,d[4]),this.l=da(d[5]||"",!0),qw(this,d[6]||"",!0),this.m=da(d[7]||"")):(this.h=!1,this.i=new fa(null,this.h))}_i.prototype.toString=function(){var u=[],d=this.j;d&&u.push(ha(d,zw,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(ha(d,zw,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(ha(f,f.charAt(0)=="/"?EM:wM,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",ha(f,DM)),u.join("")};function Un(u){return new _i(u)}function mu(u,d,f){u.j=f?da(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function yu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function qw(u,d,f){d instanceof fa?(u.i=d,bM(u.i,u.h)):(f||(d=ha(d,TM)),u.i=new fa(d,u.h))}function Ae(u,d,f){u.i.set(d,f)}function vu(u){return Ae(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function da(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ha(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,IM),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function IM(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var zw=/[#\/\?@]/g,wM=/[#\?:]/g,EM=/[#\?]/g,TM=/[#\?@]/g,DM=/#/g;function fa(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Ar(u){u.g||(u.g=new Map,u.h=0,u.i&&_M(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=fa.prototype,t.add=function(u,d){Ar(this),this.i=null,u=ms(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function Gw(u,d){Ar(u),d=ms(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Ww(u,d){return Ar(u),d=ms(u,d),u.g.has(d)}t.forEach=function(u,d){Ar(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},t.na=function(){Ar(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let N=0;N<C.length;N++)f.push(d[g])}return f},t.V=function(u){Ar(this);let d=[];if(typeof u=="string")Ww(this,u)&&(d=d.concat(this.g.get(ms(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},t.set=function(u,d){return Ar(this),this.i=null,u=ms(this,u),Ww(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function Kw(u,d,f){Gw(u,d),0<f.length&&(u.i=null,u.g.set(ms(u,d),R(f)),u.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let N=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=N;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),u.push(C)}}return this.i=u.join("&")};function ms(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function bM(u,d){d&&!u.j&&(Ar(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Gw(this,g),Kw(this,C,f))},u)),u.j=d}function CM(u,d){let f=new ua;if(a.Image){let g=new Image;g.onload=y(Rr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Rr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Rr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Rr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function SM(u,d){let f=new ua,g=new AbortController,C=setTimeout(()=>{g.abort(),Rr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(N=>{clearTimeout(C),N.ok?Rr(f,"TestPingServer: ok",!0,d):Rr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Rr(f,"TestPingServer: error",!1,d)})}function Rr(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function AM(){this.g=new lM}function RM(u,d,f){let g=f||"";try{$w(u,function(C,N){let L=C;l(C)&&(L=xf(C)),d.push(g+N+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function pa(u){this.l=u.Ub||null,this.j=u.eb||!1}D(pa,Pf),pa.prototype.g=function(){return new _u(this.l,this.j)},pa.prototype.i=function(u){return function(){return u}}({});function _u(u,d){ot.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(_u,ot),t=_u.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ma(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ga(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ma(this)),this.g&&(this.readyState=3,ma(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?ga(this):ma(this),this.readyState==3&&Qw(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ga(this))},t.Qa=function(u){this.g&&(this.response=u,ga(this))},t.ga=function(){this.g&&ga(this)};function ga(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ma(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function ma(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_u.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Yw(u){let d="";return q(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Hf(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Yw(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Ae(u,d,f))}function Le(u){ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Le,ot);var NM=/^https?$/i,MM=["POST","PUT"];t=Le.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lf.g(),this.v=this.o?bw(this.o):bw(Lf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(N){Jw(this,N);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let N of g.keys())f.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(MM,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,L]of f)this.g.setRequestHeader(N,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eE(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){Jw(this,N)}};function Jw(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,Zw(u),Iu(u)}function Zw(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,_t(this,"complete"),_t(this,"abort"),Iu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Iu(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xw(this):this.bb())},t.bb=function(){Xw(this)};function Xw(u){if(u.h&&typeof o<"u"&&(!u.v[1]||jn(u)!=4||u.Z()!=2)){if(u.u&&jn(u)==4)ww(u.Ea,0,u);else if(_t(u,"readystatechange"),jn(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(u.D).match(Hw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!NM.test(C?C.toLowerCase():"")}f=g}if(f)_t(u,"complete"),_t(u,"success");else{u.m=6;try{var N=2<jn(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",Zw(u)}}finally{Iu(u)}}}}function Iu(u,d){if(u.g){eE(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||_t(u,"ready");try{f.onreadystatechange=g}catch{}}}function eE(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function jn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),uM(d)}};function tE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function xM(u){let d={};u=(u.g&&2<=jn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(V(u[g]))continue;var f=b(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=d[C]||[];d[C]=N,N.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ya(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function nE(u){this.Aa=0,this.i=[],this.j=new ua,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ya("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ya("baseRetryDelayMs",5e3,u),this.cb=ya("retryDelaySeedMs",1e4,u),this.Wa=ya("forwardChannelMaxRetries",2,u),this.wa=ya("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Fw(u&&u.concurrentRequestLimit),this.Da=new AM,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nE.prototype,t.la=8,t.G=1,t.connect=function(u,d,f,g){It(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=dE(this,null,this.W),Eu(this)};function qf(u){if(rE(u),u.G==3){var d=u.U++,f=Un(u.I);if(Ae(f,"SID",u.K),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),va(u,f),d=new Sr(u,u.j,d),d.L=2,d.v=vu(Un(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=hE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),gu(d)}lE(u)}function wu(u){u.g&&(Gf(u),u.g.cancel(),u.g=null)}function rE(u){wu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Tu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Eu(u){if(!Vw(u.h)&&!u.s){u.s=!0;var d=u.Ga;ta||gw(),na||(ta(),na=!0),Tf.add(d,u),u.B=0}}function PM(u,d){return Uw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ca(m(u.Ga,u,d),uE(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new Sr(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(C.H=N,N=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=sE(this,C,d),f=Un(this.I),Ae(f,"RID",u),Ae(f,"CVER",22),this.D&&Ae(f,"X-HTTP-Session-Id",this.D),va(this,f),N&&(this.O?d="headers="+encodeURIComponent(String(Yw(N)))+"&"+d:this.m&&Hf(f,this.m,N)),$f(this.h,C),this.Ua&&Ae(f,"TYPE","init"),this.P?(Ae(f,"$req",d),Ae(f,"SID","null"),C.T=!0,Vf(C,f,null)):Vf(C,f,d),this.G=2}}else this.G==3&&(u?iE(this,u):this.i.length==0||Vw(this.h)||iE(this))};function iE(u,d){var f;d?f=d.l:f=u.U++;let g=Un(u.I);Ae(g,"SID",u.K),Ae(g,"RID",f),Ae(g,"AID",u.T),va(u,g),u.m&&u.o&&Hf(g,u.m,u.o),f=new Sr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=sE(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),$f(u.h,f),Vf(f,g,d)}function va(u,d){u.H&&q(u.H,function(f,g){Ae(d,g,f)}),u.l&&$w({},function(f,g){Ae(d,g,f)})}function sE(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let N=-1;for(;;){let L=["count="+f];N==-1?0<f?(N=C[0].g,L.push("ofs="+N)):N=0:L.push("ofs="+N);let Ee=!0;for(let tt=0;tt<f;tt++){let me=C[tt].g,at=C[tt].map;if(me-=N,0>me)N=Math.max(0,C[tt].g-100),Ee=!1;else try{RM(at,L,"req"+me+"_")}catch{g&&g(at)}}if(Ee){g=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function oE(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;ta||gw(),na||(ta(),na=!0),Tf.add(d,u),u.v=0}}function zf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ca(m(u.Fa,u),uE(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,aE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ca(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),wu(this),aE(this))};function Gf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function aE(u){u.g=new Sr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Un(u.qa);Ae(d,"RID","rpc"),Ae(d,"SID",u.K),Ae(d,"AID",u.T),Ae(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ae(d,"TO",u.ja),Ae(d,"TYPE","xmlhttp"),va(u,d),u.m&&u.o&&Hf(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=vu(Un(d)),f.m=null,f.P=!0,Ow(f,u)}t.Za=function(){this.C!=null&&(this.C=null,wu(this),zf(this),It(19))};function Tu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function cE(u,d){var f=null;if(u.g==d){Tu(u),Gf(u),u.g=null;var g=2}else if(Bf(u.h,d))f=d.D,jw(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=hu(),_t(g,new Nw(g,f)),Eu(u)}else oE(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&PM(u,d)||g==2&&zf(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:Ii(u,5);break;case 4:Ii(u,10);break;case 3:Ii(u,6);break;default:Ii(u,2)}}}function uE(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function Ii(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new _i(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mu(g,"https"),vu(g),C?CM(g.toString(),f):SM(g.toString(),f)}else It(2);u.G=0,u.l&&u.l.sa(d),lE(u),rE(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function lE(u){if(u.G=0,u.ka=[],u.l){let d=Bw(u.h);(d.length!=0||u.i.length!=0)&&(S(u.ka,d),S(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function dE(u,d,f){var g=f instanceof _i?Un(f):new _i(f);if(g.g!="")d&&(g.g=d+"."+g.g),yu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var N=new _i(null);g&&mu(N,g),d&&(N.g=d),C&&yu(N,C),f&&(N.l=f),g=N}return f=u.D,d=u.ya,f&&d&&Ae(g,f,d),Ae(g,"VER",u.la),va(u,g),g}function hE(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Le(new pa({eb:f})):new Le(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fE(){}t=fE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Du(){}Du.prototype.g=function(u,d){return new kt(u,d)};function kt(u,d){ot.call(this),this.g=new nE(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!V(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ys(this)}D(kt,ot),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){qf(this.g)},kt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=xf(u),u=f);d.i.push(new mM(d.Ya++,u)),d.G==3&&Eu(d)},kt.prototype.N=function(){this.g.l=null,delete this.j,qf(this.g),delete this.g,kt.aa.N.call(this)};function pE(u){Of.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}D(pE,Of);function gE(){kf.call(this),this.status=1}D(gE,kf);function ys(u){this.g=u}D(ys,fE),ys.prototype.ua=function(){_t(this.g,"a")},ys.prototype.ta=function(u){_t(this.g,new pE(u))},ys.prototype.sa=function(u){_t(this.g,new gE)},ys.prototype.ra=function(){_t(this.g,"b")},Du.prototype.createWebChannel=Du.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,Wv=vr.createWebChannelTransport=function(){return new Du},Gv=vr.getStatEventTarget=function(){return hu()},zv=vr.Event=yi,wh=vr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fu.NO_ERROR=0,fu.TIMEOUT=8,fu.HTTP_ERROR=6,Rc=vr.ErrorCode=fu,Mw.COMPLETE="complete",qv=vr.EventType=Mw,Cw.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Co=vr.WebChannel=Cw,pH=vr.FetchXmlHttpFactory=pa,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,Hv=vr.XhrIo=Le}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});var yA="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var zo="10.14.0";var is=new ti("@firebase/firestore");function Nc(){return is.logLevel}function j(t,...e){if(is.logLevel<=ce.DEBUG){let n=e.map(RI);is.debug(`Firestore (${zo}): ${t}`,...n)}}function _r(t,...e){if(is.logLevel<=ce.ERROR){let n=e.map(RI);is.error(`Firestore (${zo}): ${t}`,...n)}}function Po(t,...e){if(is.logLevel<=ce.WARN){let n=e.map(RI);is.warn(`Firestore (${zo}): ${t}`,...n)}}function RI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Y(t="Unexpected state"){let e=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: `+t;throw _r(e),new Error(e)}function we(t,e){t||Y()}function X(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends pt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ch=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Zv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(et.UNAUTHENTICATED))}shutdown(){}},Xv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},e_=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new gn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new Ch(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new et(e)}},t_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},n_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new t_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},r_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},i_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new r_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function gH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Sh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=gH(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ye(t,e){return t<e?-1:t>e?1:0}function Oo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var rt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new rt(0,0))}static max(){return new t(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ah=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Oe=class t extends Ah{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},mH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qt=class t extends Ah{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return mH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new F(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new F(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var W=class t{constructor(e){this.path=e}static fromPath(e){return new t(Oe.fromString(e))}static fromName(e){return new t(Oe.fromString(e).popFirst(5))}static empty(){return new t(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Oe(e.slice()))}};var s_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};s_.UNKNOWN_ID=-1;function yH(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new ss(i,W.empty(),e)}function vH(t){return new ss(t.readTime,t.key,-1)}var ss=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),W.empty(),-1)}static max(){return new t(te.max(),W.empty(),-1)}};function _H(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}var IH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",o_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jc(t){return _(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==IH)throw t;j("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function wH(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zc(t){return t.name==="IndexedDbTransactionError"}var ZA=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function af(t){return t==null}function Lc(t){return t===0&&1/t==-1/0}function EH(t){return typeof t=="number"&&Number.isInteger(t)&&!Lc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var TH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OQ=[...TH,"documentOverlays"],DH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bH=DH,CH=[...bH,"indexConfiguration","indexState","indexEntries"];var kQ=[...CH,"globals"];function vA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ds(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ue=class t{constructor(e,n){this.comparator=e,this.root=n||xn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new No(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new No(this.root,e,this.comparator,!1)}getReverseIterator(){return new No(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new No(this.root,e,this.comparator,!0)}},No=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},xn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();let e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}};xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class t{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rh(this.data.getIterator())}getIteratorFrom(e){return new Rh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Rh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var tn=class t{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new t([])}unionWith(e){let n=new mt(qt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Nh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var vt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nh("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};vt.EMPTY_BYTE_STRING=new vt("");var SH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(t){if(we(!!t),typeof t=="string"){let e=0,n=SH.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(t.seconds),nanos:xe(t.nanos)}}function xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function li(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}function NI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function MI(t){let e=t.mapValue.fields.__previous_value__;return NI(e)?MI(e):e}function Fc(t){let e=Ir(t.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}var a_=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Mh=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Eh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?NI(t)?4:tR(t)?9007199254740991:eR(t)?10:11:Y()}function kn(t,e){if(t===e)return!0;let n=os(t);if(n!==os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fc(t).isEqual(Fc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ir(i.timestampValue),a=Ir(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return li(i.bytesValue).isEqual(li(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return xe(i.geoPointValue.latitude)===xe(s.geoPointValue.latitude)&&xe(i.geoPointValue.longitude)===xe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xe(i.integerValue)===xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=xe(i.doubleValue),a=xe(s.doubleValue);return o===a?Lc(o)===Lc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Oo(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vA(o)!==vA(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!kn(o[c],a[c])))return!1;return!0}(t,e);default:return Y()}}function Vc(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function ko(t,e){if(t===e)return 0;let n=os(t),r=os(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=xe(s.integerValue||s.doubleValue),c=xe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return _A(t.timestampValue,e.timestampValue);case 4:return _A(Fc(t),Fc(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(s,o){let a=li(s),c=li(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ye(a[l],c[l]);if(h!==0)return h}return ye(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ye(xe(s.latitude),xe(o.latitude));return a!==0?a:ye(xe(s.longitude),xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return IA(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;let p=s.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,D=(c=m.value)===null||c===void 0?void 0:c.arrayValue,R=ye(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:IA(y,D)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Eh.mapValue&&o===Eh.mapValue)return 0;if(s===Eh.mapValue)return 1;if(o===Eh.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=ye(c[p],h[p]);if(m!==0)return m;let y=ko(a[c[p]],l[h[p]]);if(y!==0)return y}return ye(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Y()}}function _A(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);let n=Ir(t),r=Ir(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function IA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=ko(n[i],r[i]);if(s)return s}return ye(n.length,r.length)}function Lo(t){return c_(t)}function c_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Ir(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=c_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${c_(n.fields[o])}`;return i+"}"}(t.mapValue):Y()}function wA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function u_(t){return!!t&&"integerValue"in t}function xI(t){return!!t&&"arrayValue"in t}function EA(t){return!!t&&"nullValue"in t}function TA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dh(t){return!!t&&"mapValue"in t}function eR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function xc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ht=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xc(n)}setAll(e){let n=qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=xc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Dh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Dh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ds(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(xc(this.value))}};function nR(t){let e=[];return ds(t.fields,(n,r)=>{let i=new qt([n]);if(Dh(r)){let s=nR(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new tn(e)}var mn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Fo=class{constructor(e,n){this.position=e,this.inclusive=n}};function DA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=ko(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function bA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}var as=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function AH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var xh=class{},Ke=class t extends xh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new d_(e,n,r):n==="array-contains"?new p_(e,r):n==="in"?new g_(e,r):n==="not-in"?new m_(e,r):n==="array-contains-any"?new y_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new h_(e,r):new f_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ko(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},yn=class t extends xh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return rR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function rR(t){return t.op==="and"}function iR(t){return RH(t)&&rR(t)}function RH(t){for(let e of t.filters)if(e instanceof yn)return!1;return!0}function l_(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Lo(t.value);if(iR(t))return t.filters.map(e=>l_(e)).join(",");{let e=t.filters.map(n=>l_(n)).join(",");return`${t.op}(${e})`}}function sR(t,e){return t instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&kn(r.value,i.value)}(t,e):t instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sR(o,i.filters[a]),!0):!1}(t,e):void Y()}function oR(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Lo(n.value)}`}(t):t instanceof yn?function(n){return n.op.toString()+" {"+n.getFilters().map(oR).join(" ,")+"}"}(t):"Filter"}var d_=class extends Ke{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){let n=W.comparator(e.key,this.key);return this.matchesComparison(n)}},h_=class extends Ke{constructor(e,n){super(e,"in",n),this.keys=aR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},f_=class extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=aR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function aR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}var p_=class extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return xI(n)&&Vc(n.arrayValue,this.value)}},g_=class extends Ke{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Vc(this.value.arrayValue,n)}},m_=class extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Vc(this.value.arrayValue,n)}},y_=class extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!xI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vc(this.value.arrayValue,r))}};var v_=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function CA(t,e=null,n=[],r=[],i=null,s=null,o=null){return new v_(t,e,n,r,i,s,o)}function PI(t){let e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>l_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),af(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Lo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Lo(r)).join(",")),e.ue=n}return e.ue}function OI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!AH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bA(t.startAt,e.startAt)&&bA(t.endAt,e.endAt)}function __(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var di=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function NH(t,e,n,r,i,s,o,a){return new di(t,e,n,r,i,s,o,a)}function cf(t){return new di(t)}function SA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cR(t){return t.collectionGroup!==null}function Pc(t){let e=X(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new mt(qt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new as(s,r))}),n.has(qt.keyField().canonicalString())||e.ce.push(new as(qt.keyField(),r))}return e.ce}function Pn(t){let e=X(t);return e.le||(e.le=MH(e,Pc(t))),e.le}function MH(t,e){if(t.limitType==="F")return CA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new as(i.field,s)});let n=t.endAt?new Fo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fo(t.startAt.position,t.startAt.inclusive):null;return CA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function I_(t,e){let n=t.filters.concat([e]);return new di(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function w_(t,e,n){return new di(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uf(t,e){return OI(Pn(t),Pn(e))&&t.limitType===e.limitType}function uR(t){return`${PI(Pn(t))}|lt:${t.limitType}`}function So(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oR(i)).join(", ")}]`),af(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Lo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Lo(i)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function lf(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Pc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=DA(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Pc(r),i)||r.endAt&&!function(o,a,c){let l=DA(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Pc(r),i))}(t,e)}function xH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lR(t){return(e,n)=>{let r=!1;for(let i of Pc(t)){let s=PH(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function PH(t,e,n){let r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?ko(c,l):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}var hi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return XA(this.inner)}size(){return this.innerSize}};var OH=new Ue(W.comparator);function wr(){return OH}var dR=new Ue(W.comparator);function Mc(...t){let e=dR;for(let n of t)e=e.insert(n.key,n);return e}function hR(t){let e=dR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return Oc()}function fR(){return Oc()}function Oc(){return new hi(t=>t.toString(),(t,e)=>t.isEqual(e))}var kH=new Ue(W.comparator),LH=new mt(W.comparator);function le(...t){let e=LH;for(let n of t)e=e.add(n);return e}var FH=new mt(ye);function VH(){return FH}function kI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function pR(t){return{integerValue:""+t}}function UH(t,e){return EH(e)?pR(e):kI(t,e)}var Vo=class{constructor(){this._=void 0}};function jH(t,e,n){return t instanceof Uo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&NI(s)&&(s=MI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof cs?mR(t,e):t instanceof us?yR(t,e):function(i,s){let o=gR(i,s),a=AA(o)+AA(i.Pe);return u_(o)&&u_(i.Pe)?pR(a):kI(i.serializer,a)}(t,e)}function BH(t,e,n){return t instanceof cs?mR(t,e):t instanceof us?yR(t,e):n}function gR(t,e){return t instanceof jo?function(r){return u_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Uo=class extends Vo{},cs=class extends Vo{constructor(e){super(),this.elements=e}};function mR(t,e){let n=vR(e);for(let r of t.elements)n.some(i=>kn(i,r))||n.push(r);return{arrayValue:{values:n}}}var us=class extends Vo{constructor(e){super(),this.elements=e}};function yR(t,e){let n=vR(e);for(let r of t.elements)n=n.filter(i=>!kn(i,r));return{arrayValue:{values:n}}}var jo=class extends Vo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function AA(t){return xe(t.integerValue||t.doubleValue)}function vR(t){return xI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $H(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof cs&&i instanceof cs||r instanceof us&&i instanceof us?Oo(r.elements,i.elements,kn):r instanceof jo&&i instanceof jo?kn(r.Pe,i.Pe):r instanceof Uo&&i instanceof Uo}(t.transform,e.transform)}var E_=class{constructor(e,n){this.version=e,this.transformResults=n}},ci=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Bo=class{};function _R(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ph(t.key,ci.none()):new ls(t.key,t.data,ci.none());{let n=t.data,r=Ht.empty(),i=new mt(qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ln(t.key,r,new tn(i.toArray()),ci.none())}}function HH(t,e,n){t instanceof ls?function(i,s,o){let a=i.value.clone(),c=NA(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ln?function(i,s,o){if(!bh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=NA(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(IR(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function kc(t,e,n,r){return t instanceof ls?function(s,o,a,c){if(!bh(s.precondition,o))return a;let l=s.value.clone(),h=MA(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ln?function(s,o,a,c){if(!bh(s.precondition,o))return a;let l=MA(s.fieldTransforms,c,o),h=o.data;return h.setAll(IR(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return bh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function qH(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=gR(r.transform,i||null);s!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,s))}return n||null}function RA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oo(r,i,(s,o)=>$H(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ls=class extends Bo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ln=class extends Bo{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function IR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function NA(t,e,n){let r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,BH(o,a,n[i]))}return r}function MA(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,jH(s,o,e))}return r}var Ph=class extends Bo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},T_=class extends Bo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var D_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&HH(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=kc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=kc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=fR();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=_R(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(n,r)=>RA(n,r))&&Oo(this.baseMutations,e.baseMutations,(n,r)=>RA(n,r))}},b_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return kH}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var C_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var S_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ge,pe;function zH(t){switch(t){default:return Y();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function wR(t){if(t===void 0)return _r("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ge.OK:return M.OK;case Ge.CANCELLED:return M.CANCELLED;case Ge.UNKNOWN:return M.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return M.INTERNAL;case Ge.UNAVAILABLE:return M.UNAVAILABLE;case Ge.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ge.NOT_FOUND:return M.NOT_FOUND;case Ge.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ge.ABORTED:return M.ABORTED;case Ge.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ge.DATA_LOSS:return M.DATA_LOSS;default:return Y()}}(pe=Ge||(Ge={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var xA=null;function GH(){return new TextEncoder}var WH=new ai([4294967295,4294967295],0);function PA(t){let e=GH().encode(t),n=new $v;return n.update(e),new Uint8Array(n.digest())}function OA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ai([n,r],0),new ai([i,s],0)]}var A_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ns(`Invalid padding: ${n}`);if(r<0)throw new ns(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ns(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ns(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ai.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ai.fromNumber(r)));return i.compare(WH)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=PA(e),[r,i]=OA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=PA(e),[r,i]=OA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ns=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Oh=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new Ue(ye),wr(),le())}},Uc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var Mo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},kh=class{constructor(e,n){this.targetId=e,this.me=n}},Lh=class{constructor(e,n,r=vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Fh=class{constructor(){this.fe=0,this.ge=LA(),this.pe=vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new Uc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=LA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},R_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=wr(),this.qe=kA(),this.Qe=new Ue(ye)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(__(s))if(r===0){let o=new W(s.path);this.Ue(n,o,mn.newNoDocument(o,te.min()))}else we(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}xA?.et(function(h,p,m,y,D){var R,S,P,V,k,B;let ae={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},q=p.unchangedNames;return q&&(ae.bloomFilter={applied:D===0,hashCount:(R=q?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(V=(P=(S=q?.bits)===null||S===void 0?void 0:S.bitmap)===null||P===void 0?void 0:P.length)!==null&&V!==void 0?V:0,padding:(B=(k=q?.bits)===null||k===void 0?void 0:k.padding)!==null&&B!==void 0?B:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),ae}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=li(r).toUint8Array()}catch(c){if(c instanceof Nh)return Po("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new A_(o,i,s)}catch(c){return Po(c instanceof ns?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&__(a.target)){let c=new W(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,mn.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=le();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Oh(e,n,this.Qe,this.ke,r);return this.ke=wr(),this.qe=kA(),this.Qe=new Ue(ye),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Fh,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(ye),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Fh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function kA(){return new Ue(W.comparator)}function LA(){return new Ue(W.comparator)}var KH={asc:"ASCENDING",desc:"DESCENDING"},QH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YH={and:"AND",or:"OR"},N_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function M_(t,e){return t.useProto3Json||af(e)?e:{value:e}}function Vh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ER(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JH(t,e){return Vh(t,e.toTimestamp())}function On(t){return we(!!t),te.fromTimestamp(function(n){let r=Ir(n);return new rt(r.seconds,r.nanos)}(t))}function LI(t,e){return x_(t,e).canonicalString()}function x_(t,e){let n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TR(t){let e=Oe.fromString(t);return we(AR(e)),e}function P_(t,e){return LI(t.databaseId,e.path)}function Kv(t,e){let n=TR(e);if(n.get(1)!==t.databaseId.projectId)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(bR(n))}function DR(t,e){return LI(t.databaseId,e)}function ZH(t){let e=TR(t);return e.length===4?Oe.emptyPath():bR(e)}function O_(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bR(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function FA(t,e,n){return{name:P_(t,e),fields:n.value.mapValue.fields}}function XH(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(we(h===void 0||typeof h=="string"),vt.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:wR(l.code);return new F(h,l.message||"")}(o);n=new Lh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Kv(t,r.document.name),s=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):te.min(),a=new Ht({mapValue:{fields:r.document.fields}}),c=mn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Mo(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Kv(t,r.document),s=r.readTime?On(r.readTime):te.min(),o=mn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Mo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Kv(t,r.document),s=r.removedTargetIds||[];n=new Mo([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new S_(i,s),a=r.targetId;n=new kh(a,o)}}return n}function eq(t,e){let n;if(e instanceof ls)n={update:FA(t,e.key,e.value)};else if(e instanceof Ph)n={delete:P_(t,e.key)};else if(e instanceof Ln)n={update:FA(t,e.key,e.data),updateMask:uq(e.fieldMask)};else{if(!(e instanceof T_))return Y();n={verify:P_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Uo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof us)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jo)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:JH(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function tq(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?On(i.updateTime):On(s);return o.isEqual(te.min())&&(o=On(s)),new E_(o,i.transformResults||[])}(n,e))):[]}function nq(t,e){return{documents:[DR(t,e.path)]}}function rq(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DR(t,i);let s=function(l){if(l.length!==0)return SR(yn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ao(m.field),direction:oq(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=M_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function iq(t){let e=ZH(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){we(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=CR(p);return m instanceof yn&&iR(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(D){return new as(Ro(D.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,af(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){let m=!!p.before,y=p.values||[];return new Fo(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Fo(y,m)}(n.endAt)),NH(e,i,o,s,a,"F",c,l)}function sq(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ro(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ro(n.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ro(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ro(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(Ro(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yn.create(n.compositeFilter.filters.map(r=>CR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function oq(t){return KH[t]}function aq(t){return QH[t]}function cq(t){return YH[t]}function Ao(t){return{fieldPath:t.canonicalString()}}function Ro(t){return qt.fromServerFormat(t.fieldPath)}function SR(t){return t instanceof Ke?function(n){if(n.op==="=="){if(TA(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NAN"}};if(EA(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(TA(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NOT_NAN"}};if(EA(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(n.field),op:aq(n.op),value:n.value}}}(t):t instanceof yn?function(n){let r=n.getFilters().map(i=>SR(i));return r.length===1?r[0]:{compositeFilter:{op:cq(n.op),filters:r}}}(t):Y()}function uq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var jc=class t{constructor(e,n,r,i,s=te.min(),o=te.min(),a=vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var k_=class{constructor(e){this.ct=e}};function lq(t){let e=iq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?w_(e,e.limit,"L"):e}var Uh=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(xe(e.integerValue));else if("doubleValue"in e){let r=xe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Lc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ir(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(li(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?tR(e)?this.dt(n,Number.MAX_SAFE_INTEGER):eR(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Y()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(xe(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),W.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Uh.vt=new Uh;var L_=class{constructor(){this.un=new F_}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(ss.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},F_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new mt(Oe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(Oe.comparator)).toArray()}};var FQ=new Uint8Array(0);var Mn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(41943040,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);var Bc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var V_=class{constructor(){this.changes=new hi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var U_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var j_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&kc(r.mutation,i,tn.empty(),rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=ts();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Mc();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=wr(),o=Oc(),a=function(){return Oc()}();return n.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Ln)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),kc(h.mutation,l,h.mutation.getFieldMask(),rt.now())):o.set(l.key,tn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new U_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Oc(),i=new Ue((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let h=r.get(c)||tn.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||le()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=fR();h.forEach(m=>{if(!s.has(m)){let y=_R(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(ts()),a=-1,c=s;return o.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,le())).next(h=>({batchId:a,changes:hR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=Mc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Mc();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,c=>{let l=function(p,m){return new di(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,mn.newInvalidDocument(h)))});let a=Mc();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&kc(h.mutation,l,tn.empty(),rt.now()),lf(n,l)&&(a=a.insert(c,l))}),a})}};var B_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:lq(i.bundledQuery),readTime:On(i.readTime)}}(n)),O.resolve()}};var $_=class{constructor(){this.overlays=new Ue(W.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ts();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=ts(),s=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=ts(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ts(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new C_(n,r));let s=this.Ir.get(n);s===void 0&&(s=le(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var H_=class{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}};var $c=class{constructor(){this.Tr=new mt(We.Er),this.dr=new mt(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new W(new Oe([])),r=new We(n,e),i=new We(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new W(new Oe([])),r=new We(n,e),i=new We(n,e+1),s=le();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||W.comparator(e.key,n.key)}};var q_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mt(We.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new D_(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new We(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new We(n,0),i=new We(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(ye);return n.forEach(i=>{let s=new We(i,0),o=new We(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;W.isDocumentKey(s)||(s=s.child(""));let o=new We(new W(s),0),a=new mt(ye);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{let s=new We(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new We(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var z_=class{constructor(e){this.Mr=e,this.docs=function(){return new Ue(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let r=wr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=wr(),o=n.path,a=new W(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||_H(vH(h),r)<=0||(i.has(h.key)||lf(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new G_(this)}getSize(e){return O.resolve(this.size)}},G_=class extends V_{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var W_=class{constructor(e){this.persistence=e,this.Nr=new hi(n=>PI(n),OI),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $c,this.targetCount=0,this.kr=Bc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Bc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}};var K_=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ZA(0),this.Kr=!1,this.Kr=!0,this.$r=new H_,this.referenceDelegate=e(this),this.Ur=new W_(this),this.indexManager=new L_,this.remoteDocumentCache=function(i){return new z_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new k_(n),this.Gr=new B_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new q_(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new Q_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Q_=class extends o_{constructor(e){super(),this.currentSequenceNumber=e}},Y_=class t{constructor(e){this.persistence=e,this.Jr=new $c,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=W.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var J_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=le(),i=le();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Z_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var X_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return QS()?8:wH(Xe())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Z_;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Nc()<=ce.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",So(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Nc()<=ce.DEBUG&&j("QueryEngine","Query:",So(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Nc()<=ce.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",So(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):O.resolve())}Yi(e,n){if(SA(n))return O.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=w_(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=le(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,o,c.readTime)?this.Yi(e,w_(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return SA(n)||i.isEqual(te.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?O.resolve(null):(Nc()<=ce.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),So(n)),this.rs(e,o,n,yH(i,-1)).next(a=>a))})}ts(e,n){let r=new mt(lR(e));return n.forEach((i,s)=>{lf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Nc()<=ce.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",So(n)),this.Ji.getDocumentsMatchingQuery(e,n,ss.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var eI=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ue(ye),this._s=new hi(s=>PI(s),OI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function dq(t,e,n,r){return new eI(t,e,n,r)}function RR(t,e){return _(this,null,function*(){let n=X(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=le();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function hq(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),y=O.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(c,D)).next(R=>{let S=l.docVersions.get(D);we(S!==null),R.version.compareTo(S)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function NR(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function fq(t,e){let n=X(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(vt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(R,S,P){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let c=wr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(pq(s,o,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(te.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.os=i,s))}function pq(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=wr();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function gq(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mq(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new jc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function tI(t,e,n){return _(this,null,function*(){let r=X(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Zc(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function VA(t,e,n){let r=X(t),i=te.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let p=X(c),m=p._s.get(h);return m!==void 0?O.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,Pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:le())).next(a=>(yq(r,xH(e),a),{documents:a,Ts:s})))}function yq(t,e,n){let r=t.us.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var jh=class{constructor(){this.activeTargetIds=VH()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var nI=class{constructor(){this.so=new jh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new jh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var rI=class{_o(e){}shutdown(){}};var Bh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Th=null;function Qv(){return Th===null?Th=function(){return 268435456+Math.round(2147483648*Math.random())}():Th++,"0x"+Th.toString(16)}var vq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var iI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var gt="WebChannelConnection",sI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Qv(),c=this.xo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,c,l,i).then(h=>(j("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Po("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=vq[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Qv();return new Promise((o,a)=>{let c=new Hv;c.setWithCredentials(!0),c.listenOnce(qv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Rc.NO_ERROR:let h=c.getResponseJson();j(gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Rc.TIMEOUT:j(gt,`RPC '${e}' ${s} timed out`),a(new F(M.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:let p=c.getStatus();if(j(gt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(S){let P=S.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(P)>=0?P:M.UNKNOWN}(y.status);a(new F(D,y.message))}else a(new F(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new F(M.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{j(gt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);j(gt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Qv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Wv(),a=Gv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let h=s.join("");j(gt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c),m=!1,y=!1,D=new iI({Io:S=>{y?j(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(j(gt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(gt,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},To:()=>p.close()}),R=(S,P,V)=>{S.listen(P,k=>{try{V(k)}catch(B){setTimeout(()=>{throw B},0)}})};return R(p,Co.EventType.OPEN,()=>{y||(j(gt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),R(p,Co.EventType.CLOSE,()=>{y||(y=!0,j(gt,`RPC '${e}' stream ${i} transport closed`),D.So())}),R(p,Co.EventType.ERROR,S=>{y||(y=!0,Po(gt,`RPC '${e}' stream ${i} transport errored:`,S),D.So(new F(M.UNAVAILABLE,"The operation could not be completed")))}),R(p,Co.EventType.MESSAGE,S=>{var P;if(!y){let V=S.data[0];we(!!V);let k=V,B=k.error||((P=k[0])===null||P===void 0?void 0:P.error);if(B){j(gt,`RPC '${e}' stream ${i} received error:`,B);let ae=B.status,q=function(I){let T=Ge[I];if(T!==void 0)return wR(T)}(ae),E=B.message;q===void 0&&(q=M.INTERNAL,E="Unknown error status: "+ae+" with message "+B.message),y=!0,D.So(new F(q,E)),p.close()}else j(gt,`RPC '${e}' stream ${i} received:`,V),D.bo(V)}}),R(a,zv.STAT_EVENT,S=>{S.stat===wh.PROXY?j(gt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===wh.NOPROXY&&j(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function Yv(){return typeof document<"u"?document:null}function df(t){return new N_(t,!0)}var $h=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Hh=class{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $h(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(_r(n.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new F(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},oI=class extends Hh{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=XH(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?On(o.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=O_(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=__(c)?{documents:nq(s,c)}:{query:rq(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ER(s,o.resumeToken);let l=M_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=Vh(s,o.snapshotVersion.toTimestamp());let l=M_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=sq(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=O_(this.serializer),n.removeTarget=e,this.a_(n)}},aI=class extends Hh{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=tq(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=O_(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>eq(this.serializer,r))};this.a_(n)}};var cI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,x_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,x_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},uI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_r(n),this.D_=!1):j("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var lI=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){hs(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let l=X(c);l.L_.add(4),yield Xc(l),l.q_.set("Unknown"),l.L_.delete(4),yield hf(l)})}(this))}))}),this.q_=new uI(r,i)}};function hf(t){return _(this,null,function*(){if(hs(t))for(let e of t.B_)yield e(!0)})}function Xc(t){return _(this,null,function*(){for(let e of t.B_)yield e(!1)})}function MR(t,e){let n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),jI(n)?UI(n):Go(n).r_()&&VI(n,e))}function FI(t,e){let n=X(t),r=Go(n);n.N_.delete(e),r.r_()&&xR(n,e),n.N_.size===0&&(r.r_()?r.o_():hs(n)&&n.q_.set("Unknown"))}function VI(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Go(t).A_(e)}function xR(t,e){t.Q_.xe(e),Go(t).R_(e)}function UI(t){t.Q_=new R_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Go(t).start(),t.q_.v_()}function jI(t){return hs(t)&&!Go(t).n_()&&t.N_.size>0}function hs(t){return X(t).L_.size===0}function PR(t){t.Q_=void 0}function _q(t){return _(this,null,function*(){t.q_.set("Online")})}function Iq(t){return _(this,null,function*(){t.N_.forEach((e,n)=>{VI(t,e)})})}function wq(t,e){return _(this,null,function*(){PR(t),jI(t)?(t.q_.M_(e),UI(t)):t.q_.set("Unknown")})}function Eq(t,e,n){return _(this,null,function*(){if(t.q_.set("Online"),e instanceof Lh&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qh(t,r)}else if(e instanceof Mo?t.Q_.Ke(e):e instanceof kh?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{let r=yield NR(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(vt.EMPTY_BYTE_STRING,h.snapshotVersion)),xR(s,c);let p=new jc(h.target,c,l,h.sequenceNumber);VI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield qh(t,r)}})}function qh(t,e,n){return _(this,null,function*(){if(!Zc(e))throw e;t.L_.add(1),yield Xc(t),t.q_.set("Offline"),n||(n=()=>NR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield hf(t)}))})}function OR(t,e){return e().catch(n=>qh(t,n,e))}function ff(t){return _(this,null,function*(){let e=X(t),n=fi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Tq(e);)try{let i=yield gq(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Dq(e,i)}catch(i){yield qh(e,i)}kR(e)&&LR(e)})}function Tq(t){return hs(t)&&t.O_.length<10}function Dq(t,e){t.O_.push(e);let n=fi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function kR(t){return hs(t)&&!fi(t).n_()&&t.O_.length>0}function LR(t){fi(t).start()}function bq(t){return _(this,null,function*(){fi(t).p_()})}function Cq(t){return _(this,null,function*(){let e=fi(t);for(let n of t.O_)e.m_(n.mutations)})}function Sq(t,e,n){return _(this,null,function*(){let r=t.O_.shift(),i=b_.from(r,e,n);yield OR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ff(t)})}function Aq(t,e){return _(this,null,function*(){e&&fi(t).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return zH(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();fi(r).s_(),yield OR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield ff(r)}})}(t,e)),kR(t)&&LR(t)})}function UA(t,e){return _(this,null,function*(){let n=X(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=hs(n);n.L_.add(3),yield Xc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield hf(n)})}function Rq(t,e){return _(this,null,function*(){let n=X(t);e?(n.L_.delete(2),yield hf(n)):e||(n.L_.add(2),yield Xc(n),n.q_.set("Unknown"))})}function Go(t){return t.K_||(t.K_=function(n,r,i){let s=X(n);return s.w_(),new oI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:_q.bind(null,t),Ro:Iq.bind(null,t),mo:wq.bind(null,t),d_:Eq.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.K_.s_(),jI(t)?UI(t):t.q_.set("Unknown")):(yield t.K_.stop(),PR(t))}))),t.K_}function fi(t){return t.U_||(t.U_=function(n,r,i){let s=X(n);return s.w_(),new aI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bq.bind(null,t),mo:Aq.bind(null,t),f_:Cq.bind(null,t),g_:Sq.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.U_.s_(),yield ff(t)):(yield t.U_.stop(),t.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var dI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function BI(t,e){if(_r("AsyncQueue",`${e}: ${t}`),Zc(t))return new F(M.UNAVAILABLE,`${e}: ${t}`);throw t}var zh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Mc(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Gh=class{constructor(){this.W_=new Ue(W.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},$o=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,zh.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var hI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},fI=class{constructor(){this.queries=jA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=X(n),s=i.queries;i.queries=jA(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new F(M.ABORTED,"Firestore shutting down"))}};function jA(){return new hi(t=>uR(t),uf)}function $I(t,e){return _(this,null,function*(){let n=X(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new hI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=BI(o,`Initialization of query '${So(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&qI(n)})}function HI(t,e){return _(this,null,function*(){let n=X(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Nq(t,e){let n=X(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&qI(n)}function Mq(t,e,n){let r=X(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function qI(t){t.Y_.forEach(e=>{e.next()})}var pI,BA;(BA=pI||(pI={})).ea="default",BA.Cache="cache";var Hc=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new $o(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pI.Cache}};var Wh=class{constructor(e){this.key=e}},Kh=class{constructor(e){this.key=e}},gI=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=lR(e),this.Ra=new zh(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Gh,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=lf(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),S=!1;m&&y?m.data.isEqual(y.data)?D!==R&&(r.track({type:3,doc:y}),S=!0):this.ga(m,y)||(r.track({type:2,doc:y}),S=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),S=!0):m&&!y&&(r.track({type:1,doc:m}),S=!0,(c||l)&&(a=!0)),S&&(y?(o=o.add(y),s=R?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,D){let R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return R(y)-R(D)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new $o(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Gh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Kh(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Wh(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return $o.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},mI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},yI=class{constructor(e){this.key=e,this.va=!1}},vI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new hi(a=>uR(a),uf),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(W.comparator),this.Na=new Map,this.La=new $c,this.Ba={},this.ka=new Map,this.qa=Bc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function xq(t,e,n=!0){return _(this,null,function*(){let r=$R(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield FR(r,e,n,!0),i})}function Pq(t,e){return _(this,null,function*(){let n=$R(t);yield FR(n,e,!0,!1)})}function FR(t,e,n,r){return _(this,null,function*(){let i=yield mq(t.localStore,Pn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield Oq(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&MR(t.remoteStore,i),a})}function Oq(t,e,n,r,i){return _(this,null,function*(){t.Ka=(p,m,y)=>function(R,S,P,V){return _(this,null,function*(){let k=S.view.ma(P);k.ns&&(k=yield VA(R.localStore,S.query,!1).then(({documents:E})=>S.view.ma(E,k)));let B=V&&V.targetChanges.get(S.targetId),ae=V&&V.targetMismatches.get(S.targetId)!=null,q=S.view.applyChanges(k,R.isPrimaryClient,B,ae);return HA(R,S.targetId,q.wa),q.snapshot})}(t,p,m,y);let s=yield VA(t.localStore,e,!0),o=new gI(e,s.Ts),a=o.ma(s.documents),c=Uc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);HA(t,n,l.wa);let h=new mI(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function kq(t,e,n){return _(this,null,function*(){let r=X(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!uf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield tI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&FI(r.remoteStore,i.targetId),_I(r,i.targetId)}).catch(Jc))):(_I(r,i.targetId),yield tI(r.localStore,i.targetId,!0))})}function Lq(t,e){return _(this,null,function*(){let n=X(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),FI(n.remoteStore,r.targetId))})}function Fq(t,e,n){return _(this,null,function*(){let r=qq(t);try{let i=yield function(o,a){let c=X(o),l=rt.now(),h=a.reduce((y,D)=>y.add(D.key),le()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=wr(),R=le();return c.cs.getEntries(y,h).next(S=>{D=S,D.forEach((P,V)=>{V.isValidDocument()||(R=R.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,D)).next(S=>{p=S;let P=[];for(let V of a){let k=qH(V,p.get(V.key).overlayedDocument);k!=null&&P.push(new Ln(V.key,k,nR(k.value.mapValue),ci.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,P,a)}).next(S=>{m=S;let P=S.applyToLocalDocumentSet(p,R);return c.documentOverlayCache.saveOverlays(y,S.batchId,P)})}).then(()=>({batchId:m.batchId,changes:hR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ue(ye)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield eu(r,i.changes),yield ff(r.remoteStore)}catch(i){let s=BI(i,"Failed to persist write");n.reject(s)}})}function VR(t,e){return _(this,null,function*(){let n=X(t);try{let r=yield fq(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?we(o.va):i.removedDocuments.size>0&&(we(o.va),o.va=!1))}),yield eu(n,r,e)}catch(r){yield Jc(r)}})}function $A(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=X(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&qI(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Vq(t,e,n){return _(this,null,function*(){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ue(W.comparator);o=o.insert(s,mn.newNoDocument(s,te.min()));let a=le().add(s),c=new Oh(te.min(),new Map,new Ue(ye),o,a);yield VR(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),zI(r)}else yield tI(r.localStore,e,!1).then(()=>_I(r,e,n)).catch(Jc)})}function Uq(t,e){return _(this,null,function*(){let n=X(t),r=e.batch.batchId;try{let i=yield hq(n.localStore,e);jR(n,r,null),UR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield eu(n,i)}catch(i){yield Jc(i)}})}function jq(t,e,n){return _(this,null,function*(){let r=X(t);try{let i=yield function(o,a){let c=X(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(we(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);jR(r,e,n),UR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield eu(r,i)}catch(i){yield Jc(i)}})}function UR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function jR(t,e,n){let r=X(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function _I(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||BR(t,r)})}function BR(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(FI(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),zI(t))}function HA(t,e,n){for(let r of n)r instanceof Wh?(t.La.addReference(r.key,e),Bq(t,r)):r instanceof Kh?(j("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||BR(t,r.key)):Y()}function Bq(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(j("SyncEngine","New document in limbo: "+n),t.xa.add(r),zI(t))}function zI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new W(Oe.fromString(e)),r=t.qa.next();t.Na.set(r,new yI(n)),t.Oa=t.Oa.insert(n,r),MR(t.remoteStore,new jc(Pn(cf(n.path)),r,"TargetPurposeLimboResolution",ZA.oe))}}function eu(t,e,n){return _(this,null,function*(){let r=X(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=J_.Wi(c.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return _(this,null,function*(){let h=X(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>O.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Zc(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),D=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(m,R)}}})}(r.localStore,s))})}function $q(t,e){return _(this,null,function*(){let n=X(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield RR(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new F(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield eu(n,r.hs)}})}function Hq(t,e){let n=X(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let i=le(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function $R(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vq.bind(null,e),e.Ca.d_=Nq.bind(null,e.eventManager),e.Ca.$a=Mq.bind(null,e.eventManager),e}function qq(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jq.bind(null,e),e}var qA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=df(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return dq(this.persistence,new X_,n.initialUser,this.serializer)}Ga(n){return new K_(Y_.Zr,this.serializer)}Wa(n){return new nI}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var zq=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$A(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$q.bind(null,this.syncEngine),yield Rq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new fI}()}createDatastore(n){let r=df(n.databaseInfo.databaseId),i=function(o){return new sI(o)}(n.databaseInfo);return function(o,a,c,l){return new cI(o,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,c){return new lI(i,s,o,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>$A(this.syncEngine,r,0),function(){return Bh.D()?new Bh:new rI}())}createSyncEngine(n,r){return function(s,o,a,c,l,h,p){let m=new vI(s,o,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(s){return _(this,null,function*(){let o=X(s);j("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Xc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var qc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var II=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Sh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){j("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(j("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=BI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Jv(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield RR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function zA(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Gq(t);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>UA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>UA(e.remoteStore,i)),t._onlineComponents=e})}function Gq(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Po("Error using user provided cache. Falling back to memory cache: "+n),yield Jv(t,new qA)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield Jv(t,new qA);return t._offlineComponents})}function HR(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield zA(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield zA(t,new zq))),t._onlineComponents})}function Wq(t){return HR(t).then(e=>e.syncEngine)}function Qh(t){return _(this,null,function*(){let e=yield HR(t),n=e.eventManager;return n.onListen=xq.bind(null,e.syncEngine),n.onUnlisten=kq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Pq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Lq.bind(null,e.syncEngine),n})}function Kq(t,e,n={}){let r=new gn;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,c,l){let h=new qc({next:m=>{h.Za(),o.enqueueAndForget(()=>HI(s,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new F(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new F(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Hc(cf(a.path),h,{includeMetadataChanges:!0,_a:!0});return $I(s,p)}(yield Qh(t),t.asyncQueue,e,n,r)})),r.promise}function Qq(t,e,n={}){let r=new gn;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,c,l){let h=new qc({next:m=>{h.Za(),o.enqueueAndForget(()=>HI(s,p)),m.fromCache&&c.source==="server"?l.reject(new F(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Hc(a,h,{includeMetadataChanges:!0,_a:!0});return $I(s,p)}(yield Qh(t),t.asyncQueue,e,n,r)})),r.promise}function qR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var GA=new Map;function zR(t,e,n){if(!n)throw new F(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Yq(t,e,n,r){if(e===!0&&r===!0)throw new F(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WA(t){if(!W.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KA(t){if(W.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=pf(t);throw new F(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Yh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ho=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Zv;switch(r.type){case"firstParty":return new n_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=GA.get(n);r&&(j("ComponentProvider","Removing Datastore"),GA.delete(n),r.terminate())}(this),Promise.resolve()}};function GR(t,e,n,r={}){var i;let s=(t=nn(t,Ho))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=et.MOCK_USER;else{a=Qd(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new F(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new et(l)}t._authCredentials=new Xv(new Ch(a,c))}}var pi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},yt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ui=class t extends pi{constructor(e,n,r){super(e,n,cf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new W(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function WR(t,e,...n){if(t=Re(t),zR("collection","path",e),t instanceof Ho){let r=Oe.fromString(e,...n);return KA(r),new ui(t,null,r)}{if(!(t instanceof yt||t instanceof ui))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Oe.fromString(e,...n));return KA(r),new ui(t.firestore,null,r)}}function KR(t,e,...n){if(t=Re(t),arguments.length===1&&(e=Sh.newId()),zR("doc","path",e),t instanceof Ho){let r=Oe.fromString(e,...n);return WA(r),new yt(t,null,new W(r))}{if(!(t instanceof yt||t instanceof ui))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Oe.fromString(e,...n));return WA(r),new yt(t.firestore,t instanceof ui?t.converter:null,new W(r))}}var Jh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $h(this,"async_queue_retry"),this.Vu=()=>{let r=Yv();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Yv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Yv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new gn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Zc(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _r("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=dI.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function QA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Er=class extends Ho{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Jh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jh(e),this._firestoreClient=void 0,yield e}})}};function QR(t,e){let n=typeof t=="object"?t:lr(),r=typeof t=="string"?t:e||"(default)",i=ur(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Kd("firestore");s&&GR(i,...s)}return i}function gf(t){if(t._terminated)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Jq(t),t._firestoreClient}function Jq(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,h){return new a_(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qR(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new II(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}var zc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(vt.fromBase64String(e))}catch(n){throw new F(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var qo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gc=class{constructor(e){this._methodName=e}};var Wc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}};var Kc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Zq=/^__.*__$/,wI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ln(e,this.data,this.fieldMask,n,this.fieldTransforms):new ls(e,this.data,n,this.fieldTransforms)}},Zh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ln(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function YR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var EI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ef(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(YR(this.Cu)&&Zq.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},TI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||df(e)}Qu(e,n,r,i=!1){return new EI({Cu:e,methodName:n,qu:r,path:qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function GI(t){let e=t._freezeSettings(),n=df(t._databaseId);return new TI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xq(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);WI("Data must be an object, but it was:",o,r);let a=JR(r,o),c,l;if(s.merge)c=new tn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=DI(e,p,n);if(!o.contains(m))throw new F(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);XR(h,m)||h.push(m)}c=new tn(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new wI(new Ht(a),c,l)}var Xh=class t extends Gc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function ez(t,e,n,r){let i=t.Qu(1,e,n);WI("Data must be an object, but it was:",i,r);let s=[],o=Ht.empty();ds(r,(c,l)=>{let h=KI(e,c,n);l=Re(l);let p=i.Nu(h);if(l instanceof Xh)s.push(h);else{let m=tu(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new tn(s);return new Zh(o,a,i.fieldTransforms)}function tz(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[DI(e,r,n)],c=[i];if(s.length%2!=0)throw new F(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(DI(e,s[m])),c.push(s[m+1]);let l=[],h=Ht.empty();for(let m=a.length-1;m>=0;--m)if(!XR(l,a[m])){let y=a[m],D=c[m];D=Re(D);let R=o.Nu(y);if(D instanceof Xh)l.push(y);else{let S=tu(D,R);S!=null&&(l.push(y),h.set(y,S))}}let p=new tn(l);return new Zh(h,p,o.fieldTransforms)}function nz(t,e,n,r=!1){return tu(n,t.Qu(r?4:3,e))}function tu(t,e){if(ZR(t=Re(t)))return WI("Unsupported field value:",e,t),JR(t,e);if(t instanceof Gc)return function(r,i){if(!YR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=tu(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Re(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=rt.fromDate(r);return{timestampValue:Vh(i.serializer,s)}}if(r instanceof rt){let s=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vh(i.serializer,s)}}if(r instanceof Wc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zc)return{bytesValue:ER(i.serializer,r._byteString)};if(r instanceof yt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:LI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Kc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return kI(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${pf(r)}`)}(t,e)}function JR(t,e){let n={};return XA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(t,(r,i)=>{let s=tu(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ZR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof Wc||t instanceof zc||t instanceof yt||t instanceof Gc||t instanceof Kc)}function WI(t,e,n){if(!ZR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=pf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function DI(t,e,n){if((e=Re(e))instanceof qo)return e._internalPath;if(typeof e=="string")return KI(t,e);throw ef("Field path arguments must be of type string or ",t,!1,void 0,n)}var rz=new RegExp("[~\\*/\\[\\]]");function KI(t,e,n){if(e.search(rz)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qo(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ef(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new F(M.INVALID_ARGUMENT,a+t+c)}function XR(t,e){return t.some(n=>n.isEqual(e))}var tf=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new bI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(mf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},bI=class extends tf{data(){return super.data()}};function mf(t,e){return typeof e=="string"?KI(t,e):e instanceof qo?e._internalPath:e._delegate._internalPath}function eN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qc=class{},nf=class extends Qc{};function tN(t,e,...n){let r=[];e instanceof Qc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof CI).length,a=s.filter(c=>c instanceof rf).length;if(o>1||o>0&&a>0)throw new F(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var rf=class t extends nf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return iN(e._query,n),new pi(e.firestore,e.converter,I_(e._query,n))}_parse(e){let n=GI(e.firestore);return function(s,o,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){JA(p,h);let y=[];for(let D of p)y.push(YA(c,s,D));m={arrayValue:{values:y}}}else m=YA(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||JA(p,h),m=nz(a,o,p,h==="in"||h==="not-in");return Ke.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function nN(t,e,n){let r=e,i=mf("where",t);return rf._create(i,r,n)}var CI=class t extends Qc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)iN(o,c),o=I_(o,c)}(e._query,n),new pi(e.firestore,e.converter,I_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var SI=class t extends nf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new F(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new as(s,o)}(e._query,this._field,this._direction);return new pi(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new di(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function rN(t,e="asc"){let n=e,r=mf("orderBy",t);return SI._create(r,n)}function YA(t,e,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cR(e)&&n.indexOf("/")!==-1)throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Oe.fromString(n));if(!W.isDocumentKey(r))throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wA(t,new W(r))}if(n instanceof yt)return wA(t,n._key);throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pf(n)}.`)}function JA(t,e){if(!Array.isArray(t)||t.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iN(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var AI=class{convertValue(e,n="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ds(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>xe(o.doubleValue));return new Kc(s)}convertGeoPoint(e){return new Wc(xe(e.latitude),xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=MI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){let n=Ir(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Oe.fromString(e);we(AR(r));let i=new Mh(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||_r(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function iz(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var rs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},sf=class extends tf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new xo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(mf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},xo=class extends sf{data(e={}){return super.data(e)}},of=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new rs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xo(this._firestore,this._userDataWriter,r.key,r,new rs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new xo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new xo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:sz(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function sz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function sN(t){t=nn(t,yt);let e=nn(t.firestore,Er);return Kq(gf(e),t._key).then(n=>lN(e,t,n))}var Yc=class extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new zc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}};function oN(t){t=nn(t,pi);let e=nn(t.firestore,Er),n=gf(e),r=new Yc(e);return eN(t._query),Qq(n,t._query).then(i=>new of(e,r,t,i))}function aN(t,e,n){t=nn(t,yt);let r=nn(t.firestore,Er),i=iz(t.converter,e,n);return uN(r,[Xq(GI(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ci.none())])}function cN(t,e,n,...r){t=nn(t,yt);let i=nn(t.firestore,Er),s=GI(i),o;return o=typeof(e=Re(e))=="string"||e instanceof qo?tz(s,"updateDoc",t._key,e,n,r):ez(s,"updateDoc",t._key,e),uN(i,[o.toMutation(t._key,ci.exists(!0))])}function QI(t,...e){var n,r,i;t=Re(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||QA(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(QA(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(t instanceof yt)l=nn(t.firestore,Er),h=cf(t._key.path),c={next:p=>{e[o]&&e[o](lN(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=nn(t,pi);l=nn(p.firestore,Er),h=p._query;let m=new Yc(l);c={next:y=>{e[o]&&e[o](new of(l,m,p,y))},error:e[o+1],complete:e[o+2]},eN(t._query)}return function(m,y,D,R){let S=new qc(R),P=new Hc(y,S,D);return m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return $I(yield Qh(m),P)})),()=>{S.Za(),m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return HI(yield Qh(m),P)}))}}(gf(l),h,a,c)}function uN(t,e){return function(r,i){let s=new gn;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Fq(yield Wq(r),i,s)})),s.promise}(gf(t),e)}function lN(t,e,n){let r=n.docs.get(e._key),i=new Yc(t);return new sf(t,i,e._key,r,new rs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){zo=i})(fn),hn(new xt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Er(new e_(r.getProvider("auth-internal")),new i_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mh(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Se(yA,"4.7.3",e),Se(yA,"4.7.3","esm2017")})();var yf=function(){return yf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yf.apply(this,arguments)};var cz={includeMetadataChanges:!1};function YI(t,e){return e===void 0&&(e=cz),new se(function(n){var r=QI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function dN(t){return YI(t,{includeMetadataChanges:!0})}function hN(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:yf(yf({},r),(n={},n[e.idField]=t.id,n))}function fN(t){return YI(t,{includeMetadataChanges:!0}).pipe(J(function(e){return e.docs}))}function pN(t,e){return e===void 0&&(e={}),fN(t).pipe(J(function(n){return n.map(function(r){return hN(r,e)})}))}var fs=class{constructor(e){return e}},gN="firestore",JI=class{constructor(){return Qi(gN)}};var ZI=new $("angularfire2.firestore-instances");function uz(t,e){let n=To(gN,t,e);return n&&new fs(n)}function lz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new fs(r)}}var dz={provide:JI,deps:[[new je,ZI]]},hz={provide:fs,useFactory:uz,deps:[[new je,ZI],pn]};function lJ(t,...e){return Se("angularfire",dr.full,"fst"),Mt([hz,dz,{provide:ZI,useFactory:lz(t),multi:!0,deps:[he,Je,ii,hr,[new je,es],[new je,ri],...e]}])}var Tr=Ne(pN,!0);var vf=Ne(dN,!0);var Pt=Ne(WR,!0);var St=Ne(KR,!0);var mN=Ne(sN,!0);var yN=Ne(oN,!0);var dJ=Ne(QR,!0);var XI=Ne(rN,!0);var gi=Ne(tN,!0);var nu=Ne(aN,!0);var Dr=Ne(cN,!0);var Wo=Ne(nN,!0);var bN="firebasestorage.googleapis.com",CN="storageBucket",pz=2*60*1e3,gz=10*60*1e3,mz=1e3;var ke=class t extends pt{constructor(e,n,r=0){super(ew(e),`Firebase Storage: ${n} (${ew(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ew(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Pe=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Pe||{});function ew(t){return"storage/"+t}function uw(){let t="An unknown error occurred, please check the error payload for server response.";return new ke(Pe.UNKNOWN,t)}function yz(t){return new ke(Pe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function vz(t){return new ke(Pe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _z(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ke(Pe.UNAUTHENTICATED,t)}function Iz(){return new ke(Pe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wz(t){return new ke(Pe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function SN(){return new ke(Pe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AN(){return new ke(Pe.CANCELED,"User canceled the upload/download.")}function Ez(t){return new ke(Pe.INVALID_URL,"Invalid URL '"+t+"'.")}function Tz(t){return new ke(Pe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Dz(){return new ke(Pe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CN+"' property when initializing the app?")}function RN(){return new ke(Pe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bz(){return new ke(Pe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Cz(){return new ke(Pe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Sz(t){return new ke(Pe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function nw(t){return new ke(Pe.INVALID_ARGUMENT,t)}function NN(){return new ke(Pe.APP_DELETED,"The Firebase app was deleted.")}function Az(t){return new ke(Pe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function iu(t,e){return new ke(Pe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ru(t){throw new ke(Pe.INTERNAL_ERROR,"Internal error: "+t)}var vn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw Tz(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(B){B.path_=decodeURIComponent(B.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),D={bucket:1,path:3},R=n===bN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",P=new RegExp(`^https?://${R}/${i}/${S}`,"i"),k=[{regex:a,indices:c,postModify:s},{regex:y,indices:D,postModify:l},{regex:P,indices:{bucket:1,path:2},postModify:l}];for(let B=0;B<k.length;B++){let ae=k[B],q=ae.regex.exec(e);if(q){let E=q[ae.indices.bucket],v=q[ae.indices.path];v||(v=""),r=new t(E,v),ae.postModify(r);break}}if(r==null)throw Ez(e);return r}},rw=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Rz(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function h(...S){l||(l=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,t(y,c())},S)}function m(){s&&clearTimeout(s)}function y(S,...P){if(l){m();return}if(S){m(),h.call(null,S,...P);return}if(c()||o){m(),h.call(null,S,...P);return}r<64&&(r*=2);let k;a===1?(a=2,k=0):k=(r+Math.random())*1e3,p(k)}let D=!1;function R(S){D||(D=!0,m(),!l&&(i!==null?(S||(a=2),clearTimeout(i),p(0)):S||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,R(!0)},n),R}function Nz(t){t(!1)}function Mz(t){return t!==void 0}function xz(t){return typeof t=="function"}function Pz(t){return typeof t=="object"&&!Array.isArray(t)}function Ef(t){return typeof t=="string"||t instanceof String}function vN(t){return lw()&&t instanceof Blob}function lw(){return typeof Blob<"u"}function _N(t,e,n,r){if(r<e)throw nw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw nw(`Invalid value for '${t}'. Expected ${n} or less.`)}function au(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function MN(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Jo=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Jo||{});function xN(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var iw=class{constructor(e,n,r,i,s,o,a,c,l,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,D)=>{this.resolve_=y,this.reject_=D,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Yo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Jo.NO_ERROR,c=s.getStatus();if(!a||xN(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Jo.ABORT;r(!1,new Yo(!1,null,h));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Yo(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Mz(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=uw();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?NN():AN();o(c)}else{let c=SN();o(c)}};this.canceled_?n(!1,new Yo(!1,null,!0)):this.backoffId_=Rz(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Nz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Yo=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function Oz(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Lz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Fz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Vz(t,e,n,r,i,s,o=!0){let a=MN(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return Lz(l,e),Oz(l,n),kz(l,s),Fz(l,r),new iw(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function Uz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jz(...t){let e=Uz();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(lw())return new Blob(t);throw new ke(Pe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Bz(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function $z(t){if(typeof atob>"u")throw Sz("base-64");return atob(t)}var Fn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},su=class{constructor(e,n){this.data=e,this.contentType=n||null}};function Hz(t,e){switch(t){case Fn.RAW:return new su(PN(e));case Fn.BASE64:case Fn.BASE64URL:return new su(ON(t,e));case Fn.DATA_URL:return new su(zz(e),Gz(e))}throw uw()}function PN(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function qz(t){let e;try{e=decodeURIComponent(t)}catch{throw iu(Fn.DATA_URL,"Malformed data URL.")}return PN(e)}function ON(t,e){switch(t){case Fn.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw iu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Fn.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw iu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=$z(e)}catch(i){throw i.message.includes("polyfill")?i:iu(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var If=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw iu(Fn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=Wz(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function zz(t){let e=new If(t);return e.base64?ON(Fn.BASE64,e.rest):qz(e.rest)}function Gz(t){return new If(t).contentType}function Wz(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var wf=class t{constructor(e,n){let r=0,i="";vN(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(vN(this.data_)){let r=this.data_,i=Bz(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(lw()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(jz.apply(null,n))}else{let n=e.map(o=>Ef(o)?Hz(Fn.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function kN(t){let e;try{e=JSON.parse(t)}catch{return null}return Pz(e)?e:null}function Kz(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Qz(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function LN(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function Yz(t,e){return e}var it=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Yz}},_f=null;function Jz(t){return!Ef(t)||t.length<2?t:LN(t)}function FN(){if(_f)return _f;let t=[];t.push(new it("bucket")),t.push(new it("generation")),t.push(new it("metageneration")),t.push(new it("name","fullPath",!0));function e(s,o){return Jz(o)}let n=new it("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new it("size");return i.xform=r,t.push(i),t.push(new it("timeCreated")),t.push(new it("updated")),t.push(new it("md5Hash",null,!0)),t.push(new it("cacheControl",null,!0)),t.push(new it("contentDisposition",null,!0)),t.push(new it("contentEncoding",null,!0)),t.push(new it("contentLanguage",null,!0)),t.push(new it("contentType",null,!0)),t.push(new it("metadata","customMetadata",!0)),_f=t,_f}function Zz(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new vn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Xz(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return Zz(r,t),r}function VN(t,e,n){let r=kN(e);return r===null?null:Xz(t,r,n)}function e4(t,e,n,r){let i=kN(e);if(i===null||!Ef(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let h=t.bucket,p=t.fullPath,m="/b/"+o(h)+"/o/"+o(p),y=au(m,n,r),D=MN({alt:"media",token:l});return y+D})[0]}function UN(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var mi=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function br(t){if(!t)throw uw()}function dw(t,e){function n(r,i){let s=VN(t,i,e);return br(s!==null),s}return n}function t4(t,e){function n(r,i){let s=VN(t,i,e);return br(s!==null),e4(s,i,t.host,t._protocol)}return n}function cu(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Iz():i=_z():n.getStatus()===402?i=vz(t.bucket):n.getStatus()===403?i=wz(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function jN(t){let e=cu(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=yz(t.path)),s.serverResponse=i.serverResponse,s}return n}function n4(t,e,n){let r=e.fullServerUrl(),i=au(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new mi(i,s,dw(t,n),o);return a.errorHandler=jN(e),a}function r4(t,e,n){let r=e.fullServerUrl(),i=au(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new mi(i,s,t4(t,n),o);return a.errorHandler=jN(e),a}function i4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function BN(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=i4(null,e)),r}function s4(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let k="";for(let B=0;B<2;B++)k=k+Math.random().toString().slice(2);return k}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let l=BN(e,r,i),h=UN(l,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+c+"--",y=wf.getBlob(p,r,m);if(y===null)throw RN();let D={name:l.fullPath},R=au(s,t.host,t._protocol),S="POST",P=t.maxUploadRetryTime,V=new mi(R,S,dw(t,n),P);return V.urlParams=D,V.headers=o,V.body=y.uploadData(),V.errorHandler=cu(e),V}var Zo=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function hw(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{br(!1)}return br(!!n&&(e||["active"]).indexOf(n)!==-1),n}function o4(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o=BN(e,r,i),a={name:o.fullPath},c=au(s,t.host,t._protocol),l="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=UN(o,n),m=t.maxUploadRetryTime;function y(R){hw(R);let S;try{S=R.getResponseHeader("X-Goog-Upload-URL")}catch{br(!1)}return br(Ef(S)),S}let D=new mi(c,l,y,m);return D.urlParams=a,D.headers=h,D.body=p,D.errorHandler=cu(e),D}function a4(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function s(l){let h=hw(l,["active","final"]),p=null;try{p=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{br(!1)}p||br(!1);let m=Number(p);return br(!isNaN(m)),new Zo(m,r.size(),h==="final")}let o="POST",a=t.maxUploadRetryTime,c=new mi(n,o,s,a);return c.headers=i,c.errorHandler=cu(e),c}var IN=256*1024;function c4(t,e,n,r,i,s,o,a){let c=new Zo(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw bz();let l=c.total-c.current,h=l;i>0&&(h=Math.min(h,i));let p=c.current,m=p+h,y="";h===0?y="finalize":l===h?y="upload, finalize":y="upload";let D={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${c.current}`},R=r.slice(p,m);if(R===null)throw RN();function S(B,ae){let q=hw(B,["active","final"]),E=c.current+h,v=r.size(),I;return q==="final"?I=dw(e,s)(B,ae):I=null,new Zo(E,v,q==="final",I)}let P="POST",V=e.maxUploadRetryTime,k=new mi(n,P,S,V);return k.headers=D,k.body=R.uploadData(),k.progressCallback=a||null,k.errorHandler=cu(t),k}var Ot={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tw(t){switch(t){case"running":case"pausing":case"canceling":return Ot.RUNNING;case"paused":return Ot.PAUSED;case"success":return Ot.SUCCESS;case"canceled":return Ot.CANCELED;case"error":return Ot.ERROR;default:return Ot.ERROR}}var sw=class{constructor(e,n,r){if(xz(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function Ko(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var wN=null,ow=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ru("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ru("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ru("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ru("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ru("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},aw=class extends ow{initXhr(){this.xhr_.responseType="text"}};function Qo(){return wN?wN():new aw}var cw=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=FN(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Pe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(xN(i.status,[]))if(s)i=SN();else{this.sleepTime=Math.max(this.sleepTime*2,mz),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Pe.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=o4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Qo,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=a4(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Qo,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=IN*this._chunkMultiplier,n=new Zo(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=c4(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(o,Qo,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){IN*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=n4(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Qo,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=s4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Qo,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=AN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=tw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let s=new sw(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(tw(this._state)){case Ot.SUCCESS:Ko(this._resolve.bind(null,this.snapshot))();break;case Ot.CANCELED:case Ot.ERROR:let n=this._reject;Ko(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(tw(this._state)){case Ot.RUNNING:case Ot.PAUSED:e.next&&Ko(e.next.bind(e,this.snapshot))();break;case Ot.SUCCESS:e.complete&&Ko(e.complete.bind(e))();break;case Ot.CANCELED:case Ot.ERROR:e.error&&Ko(e.error.bind(e,this._error))();break;default:e.error&&Ko(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Xo=class t{constructor(e,n){this._service=e,n instanceof vn?this._location=n:this._location=vn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LN(this._location.path)}get storage(){return this._service}get parent(){let e=Kz(this._location.path);if(e===null)return null;let n=new vn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Az(e)}};function u4(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new cw(t,new wf(e),n)}function l4(t){t._throwIfRoot("getDownloadURL");let e=r4(t.storage,t._location,FN());return t.storage.makeRequestWithTokens(e,Qo).then(n=>{if(n===null)throw Cz();return n})}function d4(t,e){let n=Qz(t._location.path,e),r=new vn(t._location.bucket,n);return new Xo(t.storage,r)}function h4(t){return/^[A-Za-z]+:\/\//.test(t)}function f4(t,e){return new Xo(t,e)}function $N(t,e){if(t instanceof ou){let n=t;if(n._bucket==null)throw Dz();let r=new Xo(n,n._bucket);return e!=null?$N(r,e):r}else return e!==void 0?d4(t,e):t}function p4(t,e){if(e&&h4(e)){if(t instanceof ou)return f4(t,e);throw nw("To use ref(service, url), the first argument must be a Storage instance.")}else return $N(t,e)}function EN(t,e){let n=e?.[CN];return n==null?null:vn.makeFromBucketSpec(n,t)}function g4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Qd(i,t.app.options.projectId))}var ou=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=bN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pz,this._maxUploadRetryTime=gz,this._requests=new Set,i!=null?this._bucket=vn.makeFromBucketSpec(i,this._host):this._bucket=EN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vn.makeFromBucketSpec(this._url,e):this._bucket=EN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_N("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_N("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return _(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return _(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new rw(NN());{let o=Vz(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return _(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},TN="@firebase/storage",DN="0.13.2";var HN="storage";function qN(t,e,n){return t=Re(t),u4(t,e,n)}function zN(t){return t=Re(t),l4(t)}function GN(t,e){return t=Re(t),p4(t,e)}function WN(t=lr(),e){t=Re(t);let r=ur(t,HN).getImmediate({identifier:e}),i=Kd("storage");return i&&KN(r,...i),r}function KN(t,e,n,r={}){g4(t,e,n,r)}function m4(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ou(n,r,i,e,fn)}function y4(){hn(new xt(HN,m4,"PUBLIC").setMultipleInstances(!0)),Se(TN,DN,""),Se(TN,DN,"esm2017")}y4();var ps=class{constructor(e){return e}},QN="storage",fw=class{constructor(){return Qi(QN)}};var pw=new $("angularfire2.storage-instances");function v4(t,e){let n=To(QN,t,e);return n&&new ps(n)}function _4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ps(r)}}var I4={provide:fw,deps:[[new je,pw]]},w4={provide:ps,useFactory:v4,deps:[[new je,pw],pn]};function FJ(t,...e){return Se("angularfire",dr.full,"gcs"),Mt([w4,I4,{provide:pw,useFactory:_4(t),multi:!0,deps:[he,Je,ii,hr,[new je,es],[new je,ri],...e]}])}var YN=Ne(zN,!0);var VJ=Ne(WN,!0);var JN=Ne(GN,!0);var ZN=Ne(qN,!0);var XN=class t{constructor(e,n){this.firestore=e;this.storage=n}obtenerDatosUsuario(e){return mN(St(this.firestore,"usuarios",e))}asignarDatosUsuario(e){let n=St(this.firestore,"usuarios",e);return vf(n).pipe(J(r=>{if(vf.exists())return vf.data()}))}obtenerUsuarios(){let e=Pt(this.firestore,"usuarios"),n=gi(e,XI("tipo","desc"));return Tr(n,{idField:"id"})}obtenerEspecialistas(){let e=Pt(this.firestore,"usuarios"),n=gi(e,Wo("tipo","==","especialista"));return Tr(n,{idField:"id"})}obtenerPacientes(){let e=Pt(this.firestore,"usuarios"),n=gi(e,Wo("tipo","==","paciente"));return Tr(n,{idField:"id"})}obtenerEspecialidades(){let e=Pt(this.firestore,"especialidades");return Tr(e,{idField:"id"})}agregarEspecialidad(e){let n=Pt(this.firestore,"especialidades"),r=St(n),i=r.id;nu(r,{id:i,nombre:e})}agregarUsuario(e){return _(this,null,function*(){let n=Pt(this.firestore,"usuarios");e.imagen1=yield this.subirArchivos(e.imagen1,e.id+"-1"),e.imagen2&&(e.imagen2=yield this.subirArchivos(e.imagen2,e.id+"-2"));let r=St(n,e.id);nu(r,e)})}cambiarEstado(e,n){let r=St(this.firestore,"usuarios",e);return Dr(r,{habilitado:n})}subirArchivos(e,n){return _(this,null,function*(){let r=JN(this.storage,`imagenes/${n}`),i=yield ZN(r,e);return yield YN(r)})}usuarioExiste(e){return _(this,null,function*(){let n=Pt(this.firestore,"usuarios"),r=gi(n,Wo("email","==",e));return(yield yN(r)).size!==0})}generarLog(e){if(e){let n=Pt(this.firestore,"logs"),r=St(n),i=r.id;nu(r,{id:i,idUsuario:e.id,nombre:e.nombre+" "+e.apellido,dni:e.dni,tipo:e.tipo,fecha:new Date().toUTCString()})}}obtenerLogs(){let e=Pt(this.firestore,"logs"),n=gi(e,XI("fecha","asc"));return Tr(n,{idField:"id"})}actualizarHorarios(e,n){let r=St(this.firestore,"usuarios",e);return Dr(r,{horarios:n})}obtenerTurnosAdmin(){let e=Pt(this.firestore,"turnos");return Tr(e,{idField:"id"})}obtenerTurnosPaciente(e){let n=new Date,r=Pt(this.firestore,"turnos"),i=gi(r,Wo("idPaciente","==",e));return Tr(i,{idField:"id"})}obtenerTurnosEspecialista(e){let n=Pt(this.firestore,"turnos"),r=gi(n,Wo("idEspecialista","==",e));return Tr(r,{idField:"id"})}agregarTurno(e,n,r,i){let s=Pt(this.firestore,"turnos"),o=St(s),a=o.id,c=n.horarios?.find(l=>l.especialidad===r);nu(o,{id:a,idPaciente:e.id,nombrePaciente:e.nombre+" "+e.apellido,dniPaciente:e.dni,idEspecialista:n.id,nombreEspecialista:n.nombre+" "+n.apellido,tipo:r,fecha:i.toUTCString(),duracion:c?.tiempo,estado:0})}actualizarEstadoTurno(e,n){let r=St(this.firestore,"turnos",e.id);return Dr(r,{estado:n})}agregarMensajeCancelacionTurno(e,n){let r=St(this.firestore,"turnos",e.id);return Dr(r,{mensajeCancelacion:n})}agregarMensajeEncuestaTurno(e,n){let r=St(this.firestore,"turnos",e.id);return Dr(r,{encuesta:n})}agregarMensajeReseniaTurno(e,n){let r=St(this.firestore,"turnos",e.id);return Dr(r,{resenia:n})}agregarMensajeCalificacionTurno(e,n){let r=St(this.firestore,"turnos",e.id);return Dr(r,{calificacion:n})}agregarHistoriaClinica(e,n){let r=St(this.firestore,"turnos",e.id);return Dr(r,{historiaClinica:n})}static \u0275fac=function(n){return new(n||t)(z(fs),z(ps))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};export{ut as a,Me as b,J as c,ax as d,G as e,$T as f,H as g,Ys as h,$ as i,oe as j,z as k,x as l,rD as m,Js as n,ji as o,xg as p,Oa as q,j8 as r,B8 as s,zg as t,Je as u,lt as v,he as w,Jn as x,IO as y,$8 as z,H8 as A,Ve as B,Fa as C,W8 as D,p1 as E,C1 as F,j1 as G,B1 as H,Xb as I,eC as J,mm as K,K8 as L,ym as M,Q8 as N,Y8 as O,aL as P,cL as Q,J8 as R,Z8 as S,dL as T,nC as U,hL as V,fL as W,X8 as X,pL as Y,e5 as Z,iC as _,t5 as $,n5 as aa,r5 as ba,i5 as ca,s5 as da,eo as ea,o5 as fa,to as ga,Ua as ha,a5 as ia,Em as ja,ro as ka,N5 as la,M5 as ma,x5 as na,P5 as oa,O5 as pa,yF as qa,SF as ra,K5 as sa,IK as ta,UV as ua,or as va,UK as wa,jK as xa,BK as ya,uj as za,dj as Aa,ar as Ba,qK as Ca,ZS as Da,xt as Ea,ti as Fa,yc as Ga,Yy as Ha,u2 as Ia,hn as Ja,fn as Ka,Xd as La,ev as Ma,Se as Na,g0 as Oa,m0 as Pa,_2 as Qa,E7 as Ra,T7 as Sa,Ac as Ta,mQ as Ua,yQ as Va,vQ as Wa,_Q as Xa,IQ as Ya,lJ as Za,dJ as _a,FJ as $a,VJ as ab,pA as bb,XN as cb};
